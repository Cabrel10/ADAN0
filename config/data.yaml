# Data processing and feature engineering configuration
# Generated by configuration migration on 2025-08-22T08:08:09.527276

data:
  # Timestamp configuration
  timestamp:
    column_name: 'timestamp'  # Name of the timestamp column in the data
    format: 'auto'           # 'auto' for automatic detection, or specify format like '%Y-%m-%d %H:%M:%S'
    timezone: 'UTC'          # Timezone for the timestamps
    # Whether to set the timestamp as the DataFrame index
    set_as_index: true
    # Whether to sort the DataFrame by timestamp
    sort: true
    # Handle duplicate timestamps (keep first, last, or drop)
    handle_duplicates: 'first'  # 'first', 'last', or 'drop'
  data_dir: /home/morningstar/Documents/trading/bot/data/processed/indicators
  file_structure:
    assets:
    - BTCUSDT
    - ETHUSDT
    - SOLUSDT
    - XRPUSDT
    - ADAUSDT
    pattern: '{asset}/{timeframe}.parquet'
    # Timestamp handling for file naming
    timestamp_in_filename: false  # Set to true if filenames contain timestamps
    filename_timestamp_format: '%Y%m%d_%H%M%S'  # Format if timestamp is in filename
    timeframes:
    - 5m
    - 1h
    - 4h
  test_dir: /home/morningstar/Documents/trading/bot/data/processed/indicators/test
  train_dir: /home/morningstar/Documents/trading/bot/data/processed/indicators/train
  val_dir: /home/morningstar/Documents/trading/bot/data/processed/indicators/val
data_augmentation:
  apply_order:
  - time_warping
  - gaussian_noise
  - window_permutation
  - random_scaling
  - trend_augmentation
  - partial_shuffle
  - random_impulses
  enabled: true
  gaussian_noise:
    enabled: true
    exclude_columns:
    - volume
    - trades
    std: 0.01
  partial_shuffle:
    enabled: false
    exclude_columns:
    - volume
    - trades
    segment_size: 5
  random_impulses:
    enabled: false
    exclude_columns:
    - volume
    - trades
    max_impulse: 0.1
    probability: 0.01
  random_scaling:
    enabled: false
    exclude_columns:
    - volume
    - trades
    scale_range:
    - 0.9
    - 1.1
  time_warping:
    enabled: true
    exclude_columns:
    - volume
    - trades
    sigma: 0.2
    window: 10
  trend_augmentation:
    enabled: false
    exclude_columns:
    - volume
    - trades
    max_trend: 0.01
  window_permutation:
    enabled: false
    exclude_columns:
    - volume
    - trades
    n_permutations: 1
    window_size: 5
data_processing:
  max_lookahead: 100
  temporal_transforms:
    bollinger_std: 2.0
    bollinger_window: 20
    diffs:
    - close
    - volume
    enabled: true
    macd_fast: 12
    macd_signal: 9
    macd_slow: 26
    moving_averages:
    - ma5
    - ma10
    - ma20
    rolling_windows:
    - 5
    - 10
    - 20
    - 50
    rsi_window: 14
feature_engineering:
  columns_to_normalize:
  - open
  - high
  - low
  - close
  - volume
  indicators:
    common:
      atr:
        window: 14
      bollinger:
        window: 20
        window_dev: 2.0
      macd:
        fast: 12
        signal: 9
        slow: 26
      psar:
        max_step: 0.2
        step: 0.02
      rsi:
        window: 14
      supertrend:
        multiplier: 2.0
        window: 14
    timeframes:
      5m:
        - OPEN
        - HIGH
        - LOW
        - CLOSE
        - VOLUME
        - RSI_14
        - STOCHk_14_3_3
        - STOCHd_14_3_3
        - MACD_HIST
        - ATR_14
        - EMA_5
        - EMA_12
        - BB_UPPER
        - BB_MIDDLE
        - BB_LOWER
      1h:
        - OPEN
        - HIGH
        - LOW
        - CLOSE
        - VOLUME
        - RSI_14
        - MACD_HIST
        - ADX_14
        - STOCHk_14_3_3
        - STOCHd_14_3_3
        - EMA_26
        - EMA_50
        - BB_UPPER
        - BB_MIDDLE
        - BB_LOWER
      4h:
        - OPEN
        - HIGH
        - LOW
        - CLOSE
        - VOLUME
        - RSI_14
        - MACD_HIST
        - ADX_14
        - ATR_14
        - OBV
        - EMA_50
        - EMA_200
        - STOCHk_14_3_3
        - STOCHd_14_3_3
        - SMA_200
  performance:
    cache_indicators: true
    chunk_size: 1000
    n_jobs: -1
    parallel_timeframes: true
  preprocessing:
    fillna: true
    min_data_points: 50
    normalize: true
    remove_outliers: true
  timeframes:
  - 5m
  - 1h
  - 4h
  validation:
    check_feature_correlation: true
    check_nan_percentage: true
    max_correlation_threshold: 0.95
    max_nan_percentage: 0.05

# Configuration du prétraitement des données (mise à jour le 01/09/2025)
preprocessing:
  # Configuration de la normalisation
  normalization:
    clip_values: [-5, 5]  # Valeurs de clipping
    method: robust        # Méthode robuste pour gérer les valeurs aberrantes
    scale_per_asset: true # Mise à l'échelle par actif
    scale_per_timeframe: true  # Mise à l'échelle par timeframe
    winsorize: true       # Réduction de l'impact des valeurs extrêmes
    winsorize_limits: [0.01, 0.99]  # Limites de winsorization

  # Transformation des séries temporelles
  stationarity:
    price_transform: log_returns  # Transformation des prix en rendements logarithmiques
    volume_transform: log1p       # Transformation du volume avec log(1+x)

  # Configuration des indicateurs techniques
  technical_indicators:
    # Paramètres d'activation
    use_price_indicators: true
    use_volatility_indicators: true
    use_volume_indicators: true

    # Indicateurs de prix
    price_indicators:
      moving_averages: [SMA_20, EMA_12, EMA_26, EMA_50]
      momentum: [RSI_14, MACD_HIST]
      volatility: [ATR_14, SUPERTREND_14_2.0]
      trend: [ADX_14]

    # Indicateurs de volatilité
    volatility_indicators: [ATR_14, VOLATILITY_20]

    # Indicateurs de volume
    volume_indicators: [VOLUME, VOLUME_MA_20, VOLUME_MA_50, OBV]

  # Configuration des fenêtres de traitement
  window_config:
    min_window_size: 5     # Taille minimale de la fenêtre
    step_size: 1           # Pas d'incrémentation de la fenêtre
    window_sizes:          # Tailles de fenêtre par timeframe
      5m: 20              # 20 périodes de 5 minutes (100 minutes)
      1h: 10              # 10 périodes de 1 heure (10 heures)
      4h: 5               # 5 périodes de 4 heures (20 heures)
