# Trading environment and portfolio configuration
# Generated by configuration migration on 2025-08-22T08:08:09.514853

environment:
  assets:
  - BTCUSDT
  - ETHUSDT
  - SOLUSDT
  - XRPUSDT
  - ADAUSDT
  base_currency: USDT
  initial_balance: 20.0
  max_chunks_per_episode: 2
  max_steps: 50
  memory:
    aggressive_cleanup: true
    batch_size: 32
    chunk_size: 1000
    drop_last: true
    force_gc_after_chunk: true
    include_portfolio_state: true
    max_chunks_in_memory: 2
    memory_critical_threshold_mb: 9000
    memory_warning_threshold_mb: 8000
    num_workers: 1
    pin_memory: false
    prefetch_factor: 1
    shuffle: true
  mode: backtest
  observation:
    shape: [3, 20, 13]  # Mise à jour de la forme pour refléter le nouveau nombre de fonctionnalités
    window_sizes:
      5m: 20
      1h: 20
      4h: 20
    features_per_timeframe:
      5m: 13  # OPEN, HIGH, LOW, CLOSE, VOLUME, RSI_14, ATR_14, ADX_14, EMA_5, EMA_20, EMA_50, MACD_HIST, SUPERTREND_14_2.0
      1h: 13  # OPEN, HIGH, LOW, CLOSE, VOLUME, RSI_14, ATR_14, ADX_14, EMA_12, EMA_50, EMA_200, MACD_HIST, SUPERTREND_14_2.0
      4h: 13  # OPEN, HIGH, LOW, CLOSE, VOLUME, RSI_14, ATR_14, ADX_14, EMA_12, EMA_50, EMA_200, MACD_HIST, SUPERTREND_14_2.0
    warmup_steps: 10
  penalties:
    base_inaction_penalty: -0.001
    inaction_freq_threshold: 0.15
    inaction_pnl_threshold: 0.05
    invalid_action: -0.1
    order_rejection: -0.5
  reward_shaping:
    chunk_size: 1000
    ewc_lambda: 0.2
    optimal_trade_bonus: 2.0
    performance_threshold: 0.6
    realized_pnl_multiplier: 1.0
    reward_clipping_range:
    - -3.0
    - 3.0
    unrealized_pnl_multiplier: 0.1
    use_ewc: true
    use_prioritized_replay: true
  risk_management:
    position_sizing:
      concentration_limits:
        ADAUSDT: 10.0
        BTCUSDT: 30.0
        ETHUSDT: 25.0
        SOLUSDT: 20.0
        XRPUSDT: 15.0
      max_asset_allocation_pct: 20.0
      max_risk_per_trade_pct: 5.0
      take_profit:
        enabled: true
        risk_reward_ratio: 2.0
        trailing_deviation_pct: 1.0
        trailing_enabled: true
  trading_fees: 0.01
data:
  # Jeu de données à utiliser pour les runs courts de validation/monitoring
  data_split: val
  # Timeframes pris en charge par le chargeur de données
  timeframes:
  - 5m
  - 1h
  - 4h
  # Définition des features par timeframe (utilisé par ChunkedDataLoader et l'env)
  features_per_timeframe:
    5m:
    - OPEN
    - HIGH
    - LOW
    - CLOSE
    - VOLUME
    - RSI_14
    - ATR_14
    - ADX_14
    - EMA_5
    - EMA_20
    - EMA_50
    - MACD_HIST
    - SUPERTREND_14_2.0

    1h:
    - OPEN
    - HIGH
    - LOW
    - CLOSE
    - VOLUME
    - RSI_14
    - ATR_14
    - ADX_14
    - EMA_12
    - EMA_50
    - EMA_200
    - MACD_HIST
    - SUPERTREND_14_2.0

    4h:
    - OPEN
    - HIGH
    - LOW
    - CLOSE
    - VOLUME
    - RSI_14
    - ATR_14
    - ADX_14
    - EMA_12
    - EMA_50
    - EMA_200
    - MACD_HIST
    - SUPERTREND_14_2.0
paths:
  indicators_data_dir: /home/morningstar/Documents/trading/bot/data/processed/indicators
portfolio:
  include_portfolio_state: true
  initial_balance: 20.0
  portfolio_state_features:
  - cash_available
  - total_equity
  - total_return_pct
  - sharpe_ratio
  - max_drawdown_pct
  - num_positions
  - largest_positions: 5
