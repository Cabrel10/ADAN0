2025-09-12 05:40:23,624 - adan_trading_bot - INFO - ADAN Trading Bot v0.1.0 initialized
2025-09-12 05:40:23,731 - __main__ - INFO - Configuration chargée depuis config/config.yaml
2025-09-12 05:40:23,732 - __main__ - INFO - Démarrage de l'entraînement avec un timeout de 3600 secondes
2025-09-12 05:40:23,732 - __main__ - INFO - Utilisation de DummyVecEnv (sans parallélisme réel)
2025-09-12 05:40:23,732 - __main__ - INFO - Configuration data_dirs: {'base': '/home/morningstar/Documents/trading/bot/data/processed/indicators', 'train': '/home/morningstar/Documents/trading/bot/data/processed/indicators/train', 'val': '/home/morningstar/Documents/trading/bot/data/processed/indicators/val', 'test': '/home/morningstar/Documents/trading/bot/data/processed/indicators/test'}
2025-09-12 05:40:23,732 - __main__ - INFO - Data split utilisé: val
2025-09-12 05:40:23,732 - __main__ - INFO - Dossier de données final: /home/morningstar/Documents/trading/bot/data/processed/indicators/val
2025-09-12 05:40:23,732 - __main__ - INFO - Chargement des données depuis : /home/morningstar/Documents/trading/bot/data/processed/indicators/val
2025-09-12 05:40:23,732 - __main__ - INFO - Actifs: ['btcusdt']
2025-09-12 05:40:23,732 - __main__ - INFO - Timeframes: ['5m', '1h', '4h']
2025-09-12 05:40:23,732 - __main__ - INFO - Split de données: val
2025-09-12 05:40:23,767 - __main__ - INFO - Données chargées: BTCUSDT/5m - 16553 lignes
2025-09-12 05:40:23,774 - __main__ - INFO - Données chargées: BTCUSDT/1h - 1357 lignes
2025-09-12 05:40:23,779 - __main__ - INFO - Données chargées: BTCUSDT/4h - 322 lignes
2025-09-12 05:40:23,779 - __main__ - INFO - Taille de la fenêtre: 50
2025-09-12 05:40:23,779 - __main__ - INFO - Configuration des caractéristiques: {'price': ['open', 'high', 'low', 'close'], 'volume': ['volume'], 'indicators': ['rsi_14', 'macd_hist', 'atr_14', 'bb_upper', 'bb_middle', 'bb_lower']}
2025-09-12 05:40:23,780 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Paramètres de risque initialisés - Taille position: 10.0% (5.0%-25.0%), Risque/trade: 1.00%, Drawdown max: 25.0%, Trades conc.: 5
[DEBUG] Starting resolution of environment variables
[DEBUG] Processing config section: root
[DEBUG] Current config keys: ['general', 'paths', 'model', 'data', 'portfolio', 'workers', 'preprocessing', 'feature_engineering', 'environment', 'trading_rules', 'capital_tiers', 'agent', 'data_processing', 'data_augmentation', 'regularization', 'training', 'risk_parameters', 'dbe', 'reward_shaping']
[DEBUG] Processing config section: general
[DEBUG] Current config keys: ['project_name', 'random_seed', 'timezone', 'debug_mode', 'n_jobs']
[DEBUG] Processing config section: paths
[DEBUG] Current config keys: ['base_dir', 'data_dir', 'raw_data_dir', 'processed_data_dir', 'indicators_data_dir', 'final_data_dir', 'models_dir', 'trained_models_dir', 'logs_dir', 'reports_dir', 'figures_dir', 'metrics_dir']
[DEBUG] Processing config section: model
[DEBUG] Current config keys: ['architecture', 'diagnostics', 'style']
[DEBUG] Processing config section: model.architecture
[DEBUG] Current config keys: ['block_a', 'block_b', 'attention', 'head']
[DEBUG] Processing config section: model.architecture.block_a
[DEBUG] Current config keys: ['out_channels', 'kernel_size', 'padding', 'leaky_relu_negative_slope', 'dropout']
[DEBUG] Processing config section: model.architecture.block_b
[DEBUG] Current config keys: ['multi_scale', 'se_ratio', 'dropout']
[DEBUG] Processing config section: model.architecture.attention
[DEBUG] Current config keys: ['num_heads', 'dropout', 'use_residual']
[DEBUG] Processing config section: model.architecture.head
[DEBUG] Current config keys: ['hidden_units', 'dropout', 'activation']
[DEBUG] Processing config section: model.diagnostics
[DEBUG] Current config keys: ['use_grad_cam', 'use_integrated_gradients', 'target_layer', 'save_attention_maps', 'attention_map_dir', 'volume_up', 'volume_down', 'ma_short', 'ma_medium', 'ma_long', 'bollinger_mid', 'bollinger_band', 'rsi_line', 'rsi_overbought', 'rsi_oversold', 'macd_line', 'signal_line', 'histogram_up', 'histogram_down', 'background', 'grid']
[DEBUG] Resolving nested path in model.diagnostics.attention_map_dir: ${paths.models_dir}/attention_maps
[DEBUG] Resolving variable path: paths.models_dir
[DEBUG] Resolved path part: paths.models_dir.paths = {'base_dir': '/home/morningstar/Documents/trading/bot', 'data_dir': '/home/morningstar/Documents/trading/bot/data', 'raw_data_dir': '/home/morningstar/Documents/trading/bot/data/raw', 'processed_data_dir': '/home/morningstar/Documents/trading/bot/data/processed', 'indicators_data_dir': '/home/morningstar/Documents/trading/bot/data/processed/indicators', 'final_data_dir': '/home/morningstar/Documents/trading/bot/data/final', 'models_dir': '/home/morningstar/Documents/trading/bot/models', 'trained_models_dir': '/home/morningstar/Documents/trading/bot/models/rl_agents', 'logs_dir': '/home/morningstar/Documents/trading/bot/logs', 'reports_dir': '/home/morningstar/Documents/trading/bot/reports', 'figures_dir': '/home/morningstar/Documents/trading/bot/reports/figures', 'metrics_dir': '/home/morningstar/Documents/trading/bot/reports/metrics'}
[DEBUG] Resolved path part: paths.models_dir.paths.models_dir = /home/morningstar/Documents/trading/bot/models
[DEBUG] Successfully resolved full path: paths.models_dir = /home/morningstar/Documents/trading/bot/models
[DEBUG] Processing config section: model.style
[DEBUG] Current config keys: ['figure_facecolor', 'axes_facecolor', 'grid_alpha', 'font_family', 'font_size', 'candle_width', 'volume_alpha', 'line_width', 'legend_loc', 'legend_frameon', 'legend_facecolor', 'legend_edgecolor', 'left_margin', 'right_margin', 'top_margin', 'bottom_margin', 'hspace']
[DEBUG] Processing config section: data
[DEBUG] Current config keys: ['include', 'assets', 'processed_data', 'timeframes', 'data_dirs', 'features_per_timeframe']
[DEBUG] Processing config section: data.processed_data
[DEBUG] Current config keys: ['train', 'validation', 'test']
[DEBUG] Processing config section: data.data_dirs
[DEBUG] Current config keys: ['base', 'train', 'val', 'test']
[DEBUG] Processing config section: data.features_per_timeframe
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: portfolio
[DEBUG] Current config keys: ['initial_balance', 'include_portfolio_state', 'portfolio_state_features']
[DEBUG] Processing config section: workers
[DEBUG] Current config keys: ['w1', 'w2', 'w3', 'w4']
[DEBUG] Processing config section: workers.w1
[DEBUG] Current config keys: ['name', 'description', 'assets', 'timeframes', 'data_split', 'trading_mode', 'agent_config', 'reward_config']
[DEBUG] Processing config section: workers.w1.agent_config
[DEBUG] Current config keys: ['ent_coef', 'learning_rate', 'batch_size', 'n_steps', 'n_epochs', 'clip_range']
[DEBUG] Processing config section: workers.w1.reward_config
[DEBUG] Current config keys: ['drawdown_penalty', 'profit_factor_bonus', 'sharpe_ratio_bonus', 'win_rate_bonus']
[DEBUG] Processing config section: workers.w2
[DEBUG] Current config keys: ['name', 'description', 'assets', 'timeframes', 'data_split', 'trading_mode', 'agent_config', 'reward_config']
[DEBUG] Processing config section: workers.w2.agent_config
[DEBUG] Current config keys: ['ent_coef', 'learning_rate', 'batch_size', 'n_steps', 'n_epochs', 'clip_range']
[DEBUG] Processing config section: workers.w2.reward_config
[DEBUG] Current config keys: ['drawdown_penalty', 'profit_factor_bonus', 'sharpe_ratio_bonus', 'win_rate_bonus']
[DEBUG] Processing config section: workers.w3
[DEBUG] Current config keys: ['name', 'description', 'assets', 'timeframes', 'data_split', 'trading_mode', 'agent_config', 'reward_config']
[DEBUG] Processing config section: workers.w3.agent_config
[DEBUG] Current config keys: ['ent_coef', 'learning_rate', 'batch_size', 'n_steps', 'n_epochs', 'clip_range']
[DEBUG] Processing config section: workers.w3.reward_config
[DEBUG] Current config keys: ['drawdown_penalty', 'profit_factor_bonus', 'sharpe_ratio_bonus']
[DEBUG] Processing config section: workers.w4
[DEBUG] Current config keys: ['name', 'description', 'assets', 'timeframes', 'data_split', 'trading_mode', 'agent_config', 'reward_config']
[DEBUG] Processing config section: workers.w4.agent_config
[DEBUG] Current config keys: ['learning_rate', 'ent_coef']
[DEBUG] Processing config section: workers.w4.reward_config
[DEBUG] Current config keys: ['volatility_bonus', 'drawdown_penalty']
[DEBUG] Processing config section: preprocessing
[DEBUG] Current config keys: ['normalization', 'stationarity', 'window_config', 'technical_indicators']
[DEBUG] Processing config section: preprocessing.normalization
[DEBUG] Current config keys: ['method', 'clip_values', 'scale_per_asset', 'scale_per_timeframe']
[DEBUG] Processing config section: preprocessing.stationarity
[DEBUG] Current config keys: ['price_transform', 'volume_transform']
[DEBUG] Processing config section: preprocessing.window_config
[DEBUG] Current config keys: ['window_sizes', 'min_window_size', 'step_size']
[DEBUG] Processing config section: preprocessing.window_config.window_sizes
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: preprocessing.technical_indicators
[DEBUG] Current config keys: ['use_price_indicators', 'price_indicators', 'use_volume_indicators', 'volume_indicators', 'use_volatility_indicators', 'volatility_indicators']
[DEBUG] Processing config section: feature_engineering
[DEBUG] Current config keys: ['timeframes', 'columns_to_normalize', 'indicators', 'preprocessing', 'performance', 'validation']
[DEBUG] Processing config section: feature_engineering.indicators
[DEBUG] Current config keys: ['timeframes', 'common']
[DEBUG] Processing config section: feature_engineering.indicators.timeframes
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: feature_engineering.indicators.timeframes.5m
[DEBUG] Current config keys: ['momentum', 'trend', 'volatility', 'volume']
[DEBUG] Processing config section: feature_engineering.indicators.timeframes.1h
[DEBUG] Current config keys: ['momentum', 'trend', 'volatility', 'volume']
[DEBUG] Processing config section: feature_engineering.indicators.timeframes.4h
[DEBUG] Current config keys: ['momentum', 'trend', 'volatility', 'volume']
[DEBUG] Processing config section: feature_engineering.indicators.common
[DEBUG] Current config keys: ['bollinger', 'rsi', 'macd', 'atr', 'supertrend', 'psar']
[DEBUG] Processing config section: feature_engineering.indicators.common.bollinger
[DEBUG] Current config keys: ['window', 'window_dev']
[DEBUG] Processing config section: feature_engineering.indicators.common.rsi
[DEBUG] Current config keys: ['window']
[DEBUG] Processing config section: feature_engineering.indicators.common.macd
[DEBUG] Current config keys: ['fast', 'slow', 'signal']
[DEBUG] Processing config section: feature_engineering.indicators.common.atr
[DEBUG] Current config keys: ['window']
[DEBUG] Processing config section: feature_engineering.indicators.common.supertrend
[DEBUG] Current config keys: ['window', 'multiplier']
[DEBUG] Processing config section: feature_engineering.indicators.common.psar
[DEBUG] Current config keys: ['step', 'max_step']
[DEBUG] Processing config section: feature_engineering.preprocessing
[DEBUG] Current config keys: ['fillna', 'normalize', 'remove_outliers', 'min_data_points']
[DEBUG] Processing config section: feature_engineering.performance
[DEBUG] Current config keys: ['chunk_size', 'n_jobs', 'cache_indicators', 'parallel_timeframes']
[DEBUG] Processing config section: feature_engineering.validation
[DEBUG] Current config keys: ['check_nan_percentage', 'max_nan_percentage', 'check_feature_correlation', 'max_correlation_threshold']
[DEBUG] Processing config section: environment
[DEBUG] Current config keys: ['max_steps', 'initial_balance', 'commission', 'reward_scaling', 'window_size', 'features_config', 'max_chunks_per_episode', 'assets', 'observation', 'mode', 'base_currency', 'memory', 'risk_management', 'penalties']
[DEBUG] Processing config section: environment.features_config
[DEBUG] Current config keys: ['price', 'volume', 'indicators']
[DEBUG] Processing config section: environment.observation
[DEBUG] Current config keys: ['shape', 'window_sizes', 'warmup_steps', 'timeframes', 'features']
[DEBUG] Processing config section: environment.observation.window_sizes
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: environment.observation.features
[DEBUG] Current config keys: ['base', 'indicators', 'expected_features']
[DEBUG] Processing config section: environment.observation.features.indicators
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: environment.memory
[DEBUG] Current config keys: ['chunk_size', 'max_chunks_in_memory', 'aggressive_cleanup', 'force_gc_after_chunk', 'memory_warning_threshold_mb', 'memory_critical_threshold_mb', 'num_workers', 'pin_memory', 'batch_size', 'prefetch_factor', 'shuffle', 'drop_last', 'include_portfolio_state']
[DEBUG] Processing config section: environment.risk_management
[DEBUG] Current config keys: ['position_sizing']
[DEBUG] Processing config section: environment.risk_management.position_sizing
[DEBUG] Current config keys: ['max_position_size', 'initial_sl_pct', 'initial_tp_pct', 'initial_position_size', 'min_trade_value', 'max_risk_per_trade_pct', 'max_asset_allocation_pct', 'concentration_limits', 'take_profit', 'risk_parameters']
[DEBUG] Processing config section: environment.risk_management.position_sizing.concentration_limits
[DEBUG] Current config keys: ['BTCUSDT', 'ETHUSDT', 'SOLUSDT', 'XRPUSDT', 'ADAUSDT']
[DEBUG] Processing config section: environment.risk_management.position_sizing.take_profit
[DEBUG] Current config keys: ['enabled', 'risk_reward_ratio', 'trailing_enabled', 'trailing_deviation_pct']
[DEBUG] Processing config section: environment.risk_management.position_sizing.risk_parameters
[DEBUG] Current config keys: ['min_risk_level', 'max_risk_level', 'base_sl_pct', 'base_tp_pct', 'max_sl_pct', 'min_sl_pct', 'daily_loss_limit', 'weekly_loss_limit']
[DEBUG] Processing config section: environment.penalties
[DEBUG] Current config keys: ['invalid_action', 'order_rejection', 'inaction_freq_threshold', 'inaction_pnl_threshold', 'base_inaction_penalty']
[DEBUG] Processing config section: trading_rules
[DEBUG] Current config keys: ['futures_enabled', 'leverage', 'commission_pct', 'min_order_value_usdt', 'slippage_pct', 'stop_loss_pct', 'take_profit_pct', 'trailing_stop']
[DEBUG] Processing config section: agent
[DEBUG] Current config keys: ['algorithm', 'policy', 'learning_rate', 'n_steps', 'batch_size', 'n_epochs', 'gamma', 'gae_lambda', 'clip_range', 'clip_range_vf', 'ent_coef', 'vf_coef', 'max_grad_norm', 'target_kl', 'seed', 'verbose', 'deterministic_inference', 'custom_log_freq_rollouts', 'eval_freq', 'eval_episodes', 'checkpoint_freq', 'n_envs', 'buffer_size', 'window_size', 'features_extractor_kwargs', 'learning_rate_schedule', 'ent_coef_schedule']
[DEBUG] Processing config section: agent.features_extractor_kwargs
[DEBUG] Current config keys: ['cnn_configs', 'fc_layers', 'attention', 'normalization', 'initialization', 'dropout', 'activation', 'policy_kwargs', 'ppo']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.5m
[DEBUG] Current config keys: ['input_shape', 'channel_groups', 'groups']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.5m.groups
[DEBUG] Current config keys: ['price', 'volume', 'indicators']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.5m.groups.price
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.5m.groups.volume
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.5m.groups.indicators
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.1h
[DEBUG] Current config keys: ['input_shape', 'channel_groups', 'groups']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.1h.groups
[DEBUG] Current config keys: ['price', 'volume', 'indicators']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.1h.groups.price
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.1h.groups.volume
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.1h.groups.indicators
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.4h
[DEBUG] Current config keys: ['input_shape', 'channel_groups', 'groups', 'conv_blocks', 'activation', 'batch_norm', 'final_dropout', 'use_channel_attention', 'use_temporal_attention', 'temporal_attention_heads']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.4h.groups
[DEBUG] Current config keys: ['price', 'volume', 'indicators']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.4h.groups.price
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.4h.groups.volume
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.4h.groups.indicators
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.attention
[DEBUG] Current config keys: ['num_heads', 'dropout', 'use_relative_positions']
[DEBUG] Processing config section: agent.features_extractor_kwargs.normalization
[DEBUG] Current config keys: ['use_batch_norm', 'use_layer_norm']
[DEBUG] Processing config section: agent.features_extractor_kwargs.initialization
[DEBUG] Current config keys: ['conv', 'dense', 'bias']
[DEBUG] Processing config section: agent.features_extractor_kwargs.policy_kwargs
[DEBUG] Current config keys: ['net_arch', 'activation_fn']
[DEBUG] Processing config section: agent.features_extractor_kwargs.policy_kwargs.net_arch
[DEBUG] Current config keys: ['shared', 'pi', 'vf']
[DEBUG] Processing config section: agent.features_extractor_kwargs.ppo
[DEBUG] Current config keys: ['n_steps', 'batch_size', 'n_epochs', 'gae_lambda', 'clip_range', 'clip_range_vf', 'ent_coef', 'vf_coef', 'max_grad_norm', 'normalize_advantage', 'use_sde', 'sde_sample_freq', 'use_reparameterization']
[DEBUG] Processing config section: agent.learning_rate_schedule
[DEBUG] Current config keys: ['type', 'start', 'end']
[DEBUG] Processing config section: agent.ent_coef_schedule
[DEBUG] Current config keys: ['type', 'start', 'end']
[DEBUG] Processing config section: data_processing
[DEBUG] Current config keys: ['max_lookahead', 'temporal_transforms']
[DEBUG] Processing config section: data_processing.temporal_transforms
[DEBUG] Current config keys: ['enabled', 'diffs', 'moving_averages', 'rolling_windows', 'rsi_window', 'macd_fast', 'macd_slow', 'macd_signal', 'bollinger_window', 'bollinger_std']
[DEBUG] Processing config section: data_augmentation
[DEBUG] Current config keys: ['enabled', 'time_warping', 'gaussian_noise', 'window_permutation', 'random_scaling', 'trend_augmentation', 'partial_shuffle', 'random_impulses', 'apply_order']
[DEBUG] Processing config section: data_augmentation.time_warping
[DEBUG] Current config keys: ['enabled', 'window', 'sigma', 'exclude_columns']
[DEBUG] Processing config section: data_augmentation.gaussian_noise
[DEBUG] Current config keys: ['enabled', 'std', 'exclude_columns']
[DEBUG] Processing config section: data_augmentation.window_permutation
[DEBUG] Current config keys: ['enabled', 'window_size', 'n_permutations', 'exclude_columns']
[DEBUG] Processing config section: data_augmentation.random_scaling
[DEBUG] Current config keys: ['enabled', 'scale_range', 'exclude_columns']
[DEBUG] Processing config section: data_augmentation.trend_augmentation
[DEBUG] Current config keys: ['enabled', 'max_trend', 'exclude_columns']
[DEBUG] Processing config section: data_augmentation.partial_shuffle
[DEBUG] Current config keys: ['enabled', 'segment_size', 'exclude_columns']
[DEBUG] Processing config section: data_augmentation.random_impulses
[DEBUG] Current config keys: ['enabled', 'probability', 'max_impulse', 'exclude_columns']
[DEBUG] Processing config section: regularization
[DEBUG] Current config keys: ['dropout_rate', 'use_batch_norm', 'batch_norm_momentum', 'batch_norm_epsilon', 'weight_decay', 'gradient_clip']
[DEBUG] Processing config section: training
[DEBUG] Current config keys: ['num_instances', 'timesteps_per_instance', 'batch_size', 'save_freq', 'checkpointing', 'progress_bar', 'use_custom_progress']
[DEBUG] Processing config section: training.checkpointing
[DEBUG] Current config keys: ['enabled', 'save_freq', 'model_name', 'save_path']
[DEBUG] Processing config section: risk_parameters
[DEBUG] Current config keys: ['base_sl_pct', 'base_tp_pct', 'max_sl_pct', 'min_sl_pct', 'min_tp_pct', 'max_tp_pct', 'drawdown_risk_multiplier', 'volatility_impact', 'volatility_sl_factor', 'winrate_tp_factor', 'max_drawdown_pct', 'min_risk_level', 'max_risk_level', 'risk_step', 'daily_loss_limit', 'weekly_loss_limit']
[DEBUG] Processing config section: dbe
[DEBUG] Current config keys: ['default_reset_capital', 'capital_tiers', 'market_regime_detection', 'regime_parameters', 'risk_management', 'take_profit', 'performance', 'logging']
[DEBUG] Processing config section: dbe.market_regime_detection
[DEBUG] Current config keys: ['adx_threshold', 'rsi_overbought', 'rsi_oversold', 'ema_fast', 'ema_slow', 'atr_multiplier', 'macd_signal']
[DEBUG] Processing config section: dbe.regime_parameters
[DEBUG] Current config keys: ['bull', 'bear', 'volatile', 'sideways']
[DEBUG] Processing config section: dbe.regime_parameters.bull
[DEBUG] Current config keys: ['sl_multiplier', 'tp_multiplier', 'position_size_multiplier']
[DEBUG] Processing config section: dbe.regime_parameters.bear
[DEBUG] Current config keys: ['sl_multiplier', 'tp_multiplier', 'position_size_multiplier']
[DEBUG] Processing config section: dbe.regime_parameters.volatile
[DEBUG] Current config keys: ['sl_multiplier', 'tp_multiplier', 'position_size_multiplier']
[DEBUG] Processing config section: dbe.regime_parameters.sideways
[DEBUG] Current config keys: ['sl_multiplier', 'tp_multiplier', 'position_size_multiplier']
[DEBUG] Processing config section: dbe.risk_management
[DEBUG] Current config keys: ['min_trade_value', 'max_leverage', 'max_consecutive_losses']
[DEBUG] Processing config section: dbe.take_profit
[DEBUG] Current config keys: ['enabled', 'risk_reward_ratio', 'trailing_enabled', 'trailing_deviation_pct', 'volatility_adjustment', 'min_volatility', 'max_volatility', 'atr_period']
[DEBUG] Processing config section: dbe.performance
[DEBUG] Current config keys: ['lookback_window', 'min_trades_for_metrics', 'winrate_target', 'profit_factor_target', 'adaptation']
[DEBUG] Processing config section: dbe.performance.adaptation
[DEBUG] Current config keys: ['learning_rate', 'min_risk_level', 'max_risk_level', 'risk_increment', 'risk_decrement', 'use_dynamic_sizing', 'volatility_smoothing']
[DEBUG] Processing config section: dbe.logging
[DEBUG] Current config keys: ['level', 'save_trade_history', 'performance_metrics', 'save_interval']
[DEBUG] Processing config section: reward_shaping
[DEBUG] Current config keys: ['risk_factor', 'volatility_factor', 'drawdown_penalty', 'sharpe_factor', 'position_reward', 'commission_reward', 'slippage_reward', 'profit_factor_bonus', 'risk_reward_ratio', 'max_position_size', 'max_order_size', 'min_order_value_usdt', 'commission_pct', 'commission_penalty', 'min_profit_multiplier', 'slippage_pct', 'dbe', 'tier_rewards', 'logging']
[DEBUG] Processing config section: reward_shaping.dbe
[DEBUG] Current config keys: ['initial_risk', 'min_risk', 'max_risk', 'winrate_decay', 'drawdown_impact', 'cash_utilization_impact']
[DEBUG] Processing config section: reward_shaping.tier_rewards
[DEBUG] Current config keys: ['promotion_bonus', 'demotion_penalty', 'checkpoint_on_promotion', 'checkpoint_dir', 'min_episodes_for_promotion', 'min_profit_for_promotion', 'tier_performance_multipliers']
[DEBUG] Processing config section: reward_shaping.logging
[DEBUG] Current config keys: ['version', 'disable_existing_loggers', 'log_dirs', 'formatters', 'handlers', 'loggers', 'root']
[DEBUG] Processing config section: reward_shaping.logging.log_dirs
[DEBUG] Current config keys: ['base', 'dbe_replay', 'metrics', 'models', 'performance', 'data_quality', 'memory']
[DEBUG] Processing config section: reward_shaping.logging.formatters
[DEBUG] Current config keys: ['standard', 'detailed', 'json']
[DEBUG] Processing config section: reward_shaping.logging.formatters.standard
[DEBUG] Current config keys: ['format', 'datefmt']
[DEBUG] Processing config section: reward_shaping.logging.formatters.detailed
[DEBUG] Current config keys: ['format', 'datefmt']
[DEBUG] Processing config section: reward_shaping.logging.formatters.json
[DEBUG] Current config keys: ['class', 'format', 'datefmt']
[DEBUG] Processing config section: reward_shaping.logging.handlers
[DEBUG] Current config keys: ['console', 'file_handler', 'error_file_handler', 'json_file_handler']
[DEBUG] Processing config section: reward_shaping.logging.handlers.console
[DEBUG] Current config keys: ['class', 'level', 'formatter', 'stream']
[DEBUG] Processing config section: reward_shaping.logging.handlers.file_handler
[DEBUG] Current config keys: ['class', 'level', 'formatter', 'filename', 'when', 'backupCount', 'encoding', 'utc']
[DEBUG] Processing config section: reward_shaping.logging.handlers.error_file_handler
[DEBUG] Current config keys: ['class', 'level', 'formatter', 'filename', 'maxBytes', 'backupCount', 'encoding']
[DEBUG] Processing config section: reward_shaping.logging.handlers.json_file_handler
[DEBUG] Current config keys: ['class', 'level', 'formatter', 'filename', 'maxBytes', 'backupCount', 'encoding']
[DEBUG] Processing config section: reward_shaping.logging.loggers2025-09-12 05:40:23 - adan_trading_bot.data_processing.data_loader - INFO - Total chunks disponibles: 10
2025-09-12 05:40:23,782 - adan_trading_bot.data_processing.data_loader - INFO - Total chunks disponibles: 10
2025-09-12 05:40:23 - adan_trading_bot.data_processing.data_loader - INFO - Initialisation du ChunkedDataLoader avec 1 actifs et 3 timeframes
2025-09-12 05:40:23,782 - adan_trading_bot.data_processing.data_loader - INFO - Initialisation du ChunkedDataLoader avec 1 actifs et 3 timeframes
2025-09-12 05:40:23 - adan_trading_bot.data_processing.data_loader - INFO - Chargement des données pour 1 actifs et 3 timeframes en parallèle (max 8 workers)
2025-09-12 05:40:23,782 - adan_trading_bot.data_processing.data_loader - INFO - Chargement des données pour 1 actifs et 3 timeframes en parallèle (max 8 workers)
2025-09-12 05:40:23 - adan_trading_bot.portfolio.portfolio_manager - INFO - 5 paliers de capital chargés avec succès: Micro Capital (11.0+), Small Capital (30.0+), Medium Capital (100.0+), High Capital (300.0+), Enterprise (1000.0+)
2025-09-12 05:40:23,783 - adan_trading_bot.portfolio.portfolio_manager - INFO - 5 paliers de capital chargés avec succès: Micro Capital (11.0+), Small Capital (30.0+), Medium Capital (100.0+), High Capital (300.0+), Enterprise (1000.0+)
2025-09-12 05:40:23 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Performing full reset (reason: new_epoch=True, capital=$0.00, threshold=$11.00)
2025-09-12 05:40:23,783 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Performing full reset (reason: new_epoch=True, capital=$0.00, threshold=$11.00)
2025-09-12 05:40:23 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Portefeuille réinitialisé au capital initial: 20.50
2025-09-12 05:40:23,783 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Portefeuille réinitialisé au capital initial: 20.50
2025-09-12 05:40:23,783 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Configuration de la fenêtre pour 5m: 20 périodes
2025-09-12 05:40:23,783 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Configuration de la fenêtre pour 1h: 20 périodes
2025-09-12 05:40:23,783 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Configuration de la fenêtre pour 4h: 20 périodes
2025-09-12 05:40:23 - adan_trading_bot.data_processing.state_builder - INFO - === Configuration des caractéristiques par timeframe ===
2025-09-12 05:40:23,783 - adan_trading_bot.data_processing.state_builder - INFO - === Configuration des caractéristiques par timeframe ===
2025-09-12 05:40:23 - adan_trading_bot.data_processing.state_builder - INFO - Timeframe 5m: 15 features - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:23,783 - adan_trading_bot.data_processing.state_builder - INFO - Timeframe 5m: 15 features - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:23 - adan_trading_bot.data_processing.state_builder - INFO - Timeframe 1h: 15 features - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:23,783 - adan_trading_bot.data_processing.state_builder - INFO - Timeframe 1h: 15 features - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:23 - adan_trading_bot.data_processing.state_builder - INFO - Timeframe 4h: 15 features - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:23,783 - adan_trading_bot.data_processing.state_builder - INFO - Timeframe 4h: 15 features - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:23 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités pour 5m: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:23,783 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités pour 5m: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:23 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités pour 1h: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:23,783 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités pour 1h: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:23 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités pour 4h: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:23,783 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités pour 4h: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:23 - adan_trading_bot.data_processing.state_builder - INFO - Initialized scalers for timeframes: ['5m', '1h', '4h']
2025-09-12 05:40:23,940 - adan_trading_bot.data_processing.state_builder - INFO - Initialized scalers for timeframes: ['5m', '1h', '4h']
2025-09-12 05:40:23 - adan_trading_bot.data_processing.state_builder - INFO - Scaler initialized for timeframe 5m: minmax with params: {'scaler_type': 'minmax', 'feature_range': (0, 1)}
2025-09-12 05:40:23,940 - adan_trading_bot.data_processing.state_builder - INFO - Scaler initialized for timeframe 5m: minmax with params: {'scaler_type': 'minmax', 'feature_range': (0, 1)}
2025-09-12 05:40:23 - adan_trading_bot.data_processing.state_builder - INFO - Scaler initialized for timeframe 1h: standard with params: {'scaler_type': 'standard'}
2025-09-12 05:40:23,940 - adan_trading_bot.data_processing.state_builder - INFO - Scaler initialized for timeframe 1h: standard with params: {'scaler_type': 'standard'}
2025-09-12 05:40:23 - adan_trading_bot.data_processing.state_builder - INFO - Scaler initialized for timeframe 4h: robust with params: {'scaler_type': 'robust'}
2025-09-12 05:40:23,940 - adan_trading_bot.data_processing.state_builder - INFO - Scaler initialized for timeframe 4h: robust with params: {'scaler_type': 'robust'}
2025-09-12 05:40:23 - adan_trading_bot.data_processing.state_builder - INFO - Observation dimensions - Market: 900 + Portfolio: 17 = Total: 917
2025-09-12 05:40:23,940 - adan_trading_bot.data_processing.state_builder - INFO - Observation dimensions - Market: 900 + Portfolio: 17 = Total: 917
2025-09-12 05:40:23 - adan_trading_bot.data_processing.state_builder - INFO - StateBuilder initialized. Target flattened observation size: 917
2025-09-12 05:40:23,940 - adan_trading_bot.data_processing.state_builder - INFO - StateBuilder initialized. Target flattened observation size: 917
2025-09-12 05:40:23 - adan_trading_bot.data_processing.state_builder - INFO - Features per timeframe: {'5m': 15, '1h': 15, '4h': 15}
2025-09-12 05:40:23,941 - adan_trading_bot.data_processing.state_builder - INFO - Features per timeframe: {'5m': 15, '1h': 15, '4h': 15}
2025-09-12 05:40:23 - adan_trading_bot.data_processing.state_builder - INFO - StateBuilder initialized with base_window_size=20, adaptive_window=True, timeframes=['5m', '1h', '4h'], features_per_timeframe={self.nb_features_per_tf}
2025-09-12 05:40:23,941 - adan_trading_bot.data_processing.state_builder - INFO - StateBuilder initialized with base_window_size=20, adaptive_window=True, timeframes=['5m', '1h', '4h'], features_per_timeframe={self.nb_features_per_tf}
2025-09-12 05:40:23 - adan_trading_bot.data_processing.state_builder - INFO - Configuration du timeframe 5m: fenêtre=20, features=15
2025-09-12 05:40:23,941 - adan_trading_bot.data_processing.state_builder - INFO - Configuration du timeframe 5m: fenêtre=20, features=15
2025-09-12 05:40:23,941 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Configuration appliquée pour 5m: fenêtre=20, features=15
2025-09-12 05:40:23 - adan_trading_bot.data_processing.state_builder - INFO - Configuration du timeframe 1h: fenêtre=20, features=15
2025-09-12 05:40:23,941 - adan_trading_bot.data_processing.state_builder - INFO - Configuration du timeframe 1h: fenêtre=20, features=15
2025-09-12 05:40:23,941 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Configuration appliquée pour 1h: fenêtre=20, features=15
2025-09-12 05:40:23 - adan_trading_bot.data_processing.state_builder - INFO - Configuration du timeframe 4h: fenêtre=20, features=15
2025-09-12 05:40:23,941 - adan_trading_bot.data_processing.state_builder - INFO - Configuration du timeframe 4h: fenêtre=20, features=15
2025-09-12 05:40:23,941 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Configuration appliquée pour 4h: fenêtre=20, features=15
2025-09-12 05:40:23,942 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Using fixed observation shape: (3, 20, 15)
2025-09-12 05:40:23,942 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Portfolio state dimension: 17
2025-09-12 05:40:23,943 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation space configured: Dict('observation': Box(-inf, inf, (3, 20, 15), float32), 'portfolio_state': Box(-inf, inf, (17,), float32))
2025-09-12 05:40:23,943 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - DynamicBehaviorEngine initialisé avec succès
2025-09-12 05:40:23,943 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Initialized max_steps to 500000 and max_chunks_per_episode to 10
2025-09-12 05:40:23,943 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Chunk configuration - Total chunks: 10, Max chunks per episode: 10
2025-09-12 05:40:23,943 - root - INFO - OrderManager initialized.
2025-09-12 05:40:23 - adan_trading_bot.common.reward_logger - INFO - RewardLogger initialized with base path: logs/rewards
2025-09-12 05:40:23,944 - adan_trading_bot.common.reward_logger - INFO - RewardLogger initialized with base path: logs/rewards
2025-09-12 05:40:23 - adan_trading_bot.environment.reward_calculator - INFO - RewardCalculator initialized with multi-objective optimization and detailed logging.
2025-09-12 05:40:23,944 - adan_trading_bot.environment.reward_calculator - INFO - RewardCalculator initialized with multi-objective optimization and detailed logging.
2025-09-12 05:40:23,945 - __main__ - INFO - Environnement 0 créé avec succès
2025-09-12 05:40:23,945 - __main__ - INFO - [WORKER-0] Environnement 0 initialisé avec succès
2025-09-12 05:40:23,945 - __main__ - INFO - Configuration data_dirs: {'base': '/home/morningstar/Documents/trading/bot/data/processed/indicators', 'train': '/home/morningstar/Documents/trading/bot/data/processed/indicators/train', 'val': '/home/morningstar/Documents/trading/bot/data/processed/indicators/val', 'test': '/home/morningstar/Documents/trading/bot/data/processed/indicators/test'}
2025-09-12 05:40:23,945 - __main__ - INFO - Data split utilisé: val
2025-09-12 05:40:23,945 - __main__ - INFO - Dossier de données final: /home/morningstar/Documents/trading/bot/data/processed/indicators/val
2025-09-12 05:40:23,945 - __main__ - INFO - Chargement des données depuis : /home/morningstar/Documents/trading/bot/data/processed/indicators/val
2025-09-12 05:40:23,945 - __main__ - INFO - Actifs: ['btcusdt']
2025-09-12 05:40:23,945 - __main__ - INFO - Timeframes: ['5m', '1h', '4h']
2025-09-12 05:40:23,945 - __main__ - INFO - Split de données: val
2025-09-12 05:40:23,961 - __main__ - INFO - Données chargées: BTCUSDT/5m - 16553 lignes
2025-09-12 05:40:23,969 - __main__ - INFO - Données chargées: BTCUSDT/1h - 1357 lignes
2025-09-12 05:40:23,976 - __main__ - INFO - Données chargées: BTCUSDT/4h - 322 lignes
2025-09-12 05:40:23,977 - __main__ - INFO - Taille de la fenêtre: 50
2025-09-12 05:40:23,977 - __main__ - INFO - Configuration des caractéristiques: {'price': ['open', 'high', 'low', 'close'], 'volume': ['volume'], 'indicators': ['rsi_14', 'macd_hist', 'atr_14', 'bb_upper', 'bb_middle', 'bb_lower']}
2025-09-12 05:40:23,977 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Paramètres de risque initialisés - Taille position: 10.0% (5.0%-25.0%), Risque/trade: 1.00%, Drawdown max: 25.0%, Trades conc.: 5

[DEBUG] Current config keys: ['', 'adan', 'tensorflow', 'stable_baselines3', 'urllib3', 'pyarrow']
[DEBUG] Processing config section: reward_shaping.logging.loggers.
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Processing config section: reward_shaping.logging.loggers.adan
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Processing config section: reward_shaping.logging.loggers.tensorflow
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Processing config section: reward_shaping.logging.loggers.stable_baselines3
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Processing config section: reward_shaping.logging.loggers.urllib3
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Processing config section: reward_shaping.logging.loggers.pyarrow
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Processing config section: reward_shaping.logging.root
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Starting resolution of environment variables
[DEBUG] Processing config section: root
[DEBUG] Current config keys: ['rank', 'worker_id', 'log_prefix', 'num_workers', 'assets', 'timeframes', 'chunk_sizes', 'data_loader', 'use_subproc', 'data_split_override']
[DEBUG] Processing config section: chunk_sizes
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: data_loader
[DEBUG] Current config keys: ['batch_size', 'shuffle', 'num_workers']
[DEBUG] Starting resolution of environment variables
[DEBUG] Processing config section: root
[DEBUG] Current config keys: ['general', 'paths', 'model', 'data', 'portfolio', 'workers', 'preprocessing', 'feature_engineering', 'environment', 'trading_rules', 'capital_tiers', 'agent', 'data_processing', 'data_augmentation', 'regularization', 'training', 'risk_parameters', 'dbe', 'reward_shaping']
[DEBUG] Processing config section: general
[DEBUG] Current config keys: ['project_name', 'random_seed', 'timezone', 'debug_mode', 'n_jobs']
[DEBUG] Processing config section: paths
[DEBUG] Current config keys: ['base_dir', 'data_dir', 'raw_data_dir', 'processed_data_dir', 'indicators_data_dir', 'final_data_dir', 'models_dir', 'trained_models_dir', 'logs_dir', 'reports_dir', 'figures_dir', 'metrics_dir']
[DEBUG] Processing config section: model
[DEBUG] Current config keys: ['architecture', 'diagnostics', 'style']
[DEBUG] Processing config section: model.architecture
[DEBUG] Current config keys: ['block_a', 'block_b', 'attention', 'head']
[DEBUG] Processing config section: model.architecture.block_a
[DEBUG] Current config keys: ['out_channels', 'kernel_size', 'padding', 'leaky_relu_negative_slope', 'dropout']
[DEBUG] Processing config section: model.architecture.block_b
[DEBUG] Current config keys: ['multi_scale', 'se_ratio', 'dropout']
[DEBUG] Processing config section: model.architecture.attention
[DEBUG] Current config keys: ['num_heads', 'dropout', 'use_residual']
[DEBUG] Processing config section: model.architecture.head
[DEBUG] Current config keys: ['hidden_units', 'dropout', 'activation']
[DEBUG] Processing config section: model.diagnostics
[DEBUG] Current config keys: ['use_grad_cam', 'use_integrated_gradients', 'target_layer', 'save_attention_maps', 'attention_map_dir', 'volume_up', 'volume_down', 'ma_short', 'ma_medium', 'ma_long', 'bollinger_mid', 'bollinger_band', 'rsi_line', 'rsi_overbought', 'rsi_oversold', 'macd_line', 'signal_line', 'histogram_up', 'histogram_down', 'background', 'grid']
[DEBUG] Resolving nested path in model.diagnostics.attention_map_dir: ${paths.models_dir}/attention_maps
[DEBUG] Resolving variable path: paths.models_dir
[DEBUG] Resolved path part: paths.models_dir.paths = {'base_dir': '/home/morningstar/Documents/trading/bot', 'data_dir': '/home/morningstar/Documents/trading/bot/data', 'raw_data_dir': '/home/morningstar/Documents/trading/bot/data/raw', 'processed_data_dir': '/home/morningstar/Documents/trading/bot/data/processed', 'indicators_data_dir': '/home/morningstar/Documents/trading/bot/data/processed/indicators', 'final_data_dir': '/home/morningstar/Documents/trading/bot/data/final', 'models_dir': '/home/morningstar/Documents/trading/bot/models', 'trained_models_dir': '/home/morningstar/Documents/trading/bot/models/rl_agents', 'logs_dir': '/home/morningstar/Documents/trading/bot/logs', 'reports_dir': '/home/morningstar/Documents/trading/bot/reports', 'figures_dir': '/home/morningstar/Documents/trading/bot/reports/figures', 'metrics_dir': '/home/morningstar/Documents/trading/bot/reports/metrics'}
[DEBUG] Resolved path part: paths.models_dir.paths.models_dir = /home/morningstar/Documents/trading/bot/models
[DEBUG] Successfully resolved full path: paths.models_dir = /home/morningstar/Documents/trading/bot/models
[DEBUG] Processing config section: model.style
[DEBUG] Current config keys: ['figure_facecolor', 'axes_facecolor', 'grid_alpha', 'font_family', 'font_size', 'candle_width', 'volume_alpha', 'line_width', 'legend_loc', 'legend_frameon', 'legend_facecolor', 'legend_edgecolor', 'left_margin', 'right_margin', 'top_margin', 'bottom_margin', 'hspace']
[DEBUG] Processing config section: data
[DEBUG] Current config keys: ['include', 'assets', 'processed_data', 'timeframes', 'data_dirs', 'features_per_timeframe']
[DEBUG] Processing config section: data.processed_data
[DEBUG] Current config keys: ['train', 'validation', 'test']
[DEBUG] Processing config section: data.data_dirs
[DEBUG] Current config keys: ['base', 'train', 'val', 'test']
[DEBUG] Processing config section: data.features_per_timeframe
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: portfolio
[DEBUG] Current config keys: ['initial_balance', 'include_portfolio_state', 'portfolio_state_features']
[DEBUG] Processing config section: workers
[DEBUG] Current config keys: ['w1', 'w2', 'w3', 'w4']
[DEBUG] Processing config section: workers.w1
[DEBUG] Current config keys: ['name', 'description', 'assets', 'timeframes', 'data_split', 'trading_mode', 'agent_config', 'reward_config']
[DEBUG] Processing config section: workers.w1.agent_config
[DEBUG] Current config keys: ['ent_coef', 'learning_rate', 'batch_size', 'n_steps', 'n_epochs', 'clip_range']
[DEBUG] Processing config section: workers.w1.reward_config
[DEBUG] Current config keys: ['drawdown_penalty', 'profit_factor_bonus', 'sharpe_ratio_bonus', 'win_rate_bonus']
[DEBUG] Processing config section: workers.w2
[DEBUG] Current config keys: ['name', 'description', 'assets', 'timeframes', 'data_split', 'trading_mode', 'agent_config', 'reward_config']
[DEBUG] Processing config section: workers.w2.agent_config
[DEBUG] Current config keys: ['ent_coef', 'learning_rate', 'batch_size', 'n_steps', 'n_epochs', 'clip_range']
[DEBUG] Processing config section: workers.w2.reward_config
[DEBUG] Current config keys: ['drawdown_penalty', 'profit_factor_bonus', 'sharpe_ratio_bonus', 'win_rate_bonus']
[DEBUG] Processing config section: workers.w3
[DEBUG] Current config keys: ['name', 'description', 'assets', 'timeframes', 'data_split', 'trading_mode', 'agent_config', 'reward_config']
[DEBUG] Processing config section: workers.w3.agent_config
[DEBUG] Current config keys: ['ent_coef', 'learning_rate', 'batch_size', 'n_steps', 'n_epochs', 'clip_range']
[DEBUG] Processing config section: workers.w3.reward_config
[DEBUG] Current config keys: ['drawdown_penalty', 'profit_factor_bonus', 'sharpe_ratio_bonus']
[DEBUG] Processing config section: workers.w4
[DEBUG] Current config keys: ['name', 'description', 'assets', 'timeframes', 'data_split', 'trading_mode', 'agent_config', 'reward_config']
[DEBUG] Processing config section: workers.w4.agent_config
[DEBUG] Current config keys: ['learning_rate', 'ent_coef']
[DEBUG] Processing config section: workers.w4.reward_config
[DEBUG] Current config keys: ['volatility_bonus', 'drawdown_penalty']
[DEBUG] Processing config section: preprocessing
[DEBUG] Current config keys: ['normalization', 'stationarity', 'window_config', 'technical_indicators']
[DEBUG] Processing config section: preprocessing.normalization
[DEBUG] Current config keys: ['method', 'clip_values', 'scale_per_asset', 'scale_per_timeframe']
[DEBUG] Processing config section: preprocessing.stationarity
[DEBUG] Current config keys: ['price_transform', 'volume_transform']
[DEBUG] Processing config section: preprocessing.window_config
[DEBUG] Current config keys: ['window_sizes', 'min_window_size', 'step_size']
[DEBUG] Processing config section: preprocessing.window_config.window_sizes
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: preprocessing.technical_indicators
[DEBUG] Current config keys: ['use_price_indicators', 'price_indicators', 'use_volume_indicators', 'volume_indicators', 'use_volatility_indicators', 'volatility_indicators']
[DEBUG] Processing config section: feature_engineering
[DEBUG] Current config keys: ['timeframes', 'columns_to_normalize', 'indicators', 'preprocessing', 'performance', 'validation']
[DEBUG] Processing config section: feature_engineering.indicators
[DEBUG] Current config keys: ['timeframes', 'common']
[DEBUG] Processing config section: feature_engineering.indicators.timeframes
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: feature_engineering.indicators.timeframes.5m
[DEBUG] Current config keys: ['momentum', 'trend', 'volatility', 'volume']
[DEBUG] Processing config section: feature_engineering.indicators.timeframes.1h
[DEBUG] Current config keys: ['momentum', 'trend', 'volatility', 'volume']
[DEBUG] Processing config section: feature_engineering.indicators.timeframes.4h
[DEBUG] Current config keys: ['momentum', 'trend', 'volatility', 'volume']
[DEBUG] Processing config section: feature_engineering.indicators.common
[DEBUG] Current config keys: ['bollinger', 'rsi', 'macd', 'atr', 'supertrend', 'psar']
[DEBUG] Processing config section: feature_engineering.indicators.common.bollinger
[DEBUG] Current config keys: ['window', 'window_dev']
[DEBUG] Processing config section: feature_engineering.indicators.common.rsi
[DEBUG] Current config keys: ['window']
[DEBUG] Processing config section: feature_engineering.indicators.common.macd
[DEBUG] Current config keys: ['fast', 'slow', 'signal']
[DEBUG] Processing config section: feature_engineering.indicators.common.atr
[DEBUG] Current config keys: ['window']
[DEBUG] Processing config section: feature_engineering.indicators.common.supertrend
[DEBUG] Current config keys: ['window', 'multiplier']
[DEBUG] Processing config section: feature_engineering.indicators.common.psar
[DEBUG] Current config keys: ['step', 'max_step']
[DEBUG] Processing config section: feature_engineering.preprocessing
[DEBUG] Current config keys: ['fillna', 'normalize', 'remove_outliers', 'min_data_points']
[DEBUG] Processing config section: feature_engineering.performance
[DEBUG] Current config keys: ['chunk_size', 'n_jobs', 'cache_indicators', 'parallel_timeframes']
[DEBUG] Processing config section: feature_engineering.validation
[DEBUG] Current config keys: ['check_nan_percentage', 'max_nan_percentage', 'check_feature_correlation', 'max_correlation_threshold']
[DEBUG] Processing config section: environment
[DEBUG] Current config keys: ['max_steps', 'initial_balance', 'commission', 'reward_scaling', 'window_size', 'features_config', 'max_chunks_per_episode', 'assets', 'observation', 'mode', 'base_currency', 'memory', 'risk_management', 'penalties']
[DEBUG] Processing config section: environment.features_config
[DEBUG] Current config keys: ['price', 'volume', 'indicators']
[DEBUG] Processing config section: environment.observation
[DEBUG] Current config keys: ['shape', 'window_sizes', 'warmup_steps', 'timeframes', 'features']
[DEBUG] Processing config section: environment.observation.window_sizes
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: environment.observation.features
[DEBUG] Current config keys: ['base', 'indicators', 'expected_features']
[DEBUG] Processing config section: environment.observation.features.indicators
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: environment.memory
[DEBUG] Current config keys: ['chunk_size', 'max_chunks_in_memory', 'aggressive_cleanup', 'force_gc_after_chunk', 'memory_warning_threshold_mb', 'memory_critical_threshold_mb', 'num_workers', 'pin_memory', 'batch_size', 'prefetch_factor', 'shuffle', 'drop_last', 'include_portfolio_state']
[DEBUG] Processing config section: environment.risk_management
[DEBUG] Current config keys: ['position_sizing']
[DEBUG] Processing config section: environment.risk_management.position_sizing
[DEBUG] Current config keys: ['max_position_size', 'initial_sl_pct', 'initial_tp_pct', 'initial_position_size', 'min_trade_value', 'max_risk_per_trade_pct', 'max_asset_allocation_pct', 'concentration_limits', 'take_profit', 'risk_parameters']
[DEBUG] Processing config section: environment.risk_management.position_sizing.concentration_limits
[DEBUG] Current config keys: ['BTCUSDT', 'ETHUSDT', 'SOLUSDT', 'XRPUSDT', 'ADAUSDT']
[DEBUG] Processing config section: environment.risk_management.position_sizing.take_profit
[DEBUG] Current config keys: ['enabled', 'risk_reward_ratio', 'trailing_enabled', 'trailing_deviation_pct']
[DEBUG] Processing config section: environment.risk_management.position_sizing.risk_parameters
[DEBUG] Current config keys: ['min_risk_level', 'max_risk_level', 'base_sl_pct', 'base_tp_pct', 'max_sl_pct', 'min_sl_pct', 'daily_loss_limit', 'weekly_loss_limit']
[DEBUG] Processing config section: environment.penalties
[DEBUG] Current config keys: ['invalid_action', 'order_rejection', 'inaction_freq_threshold', 'inaction_pnl_threshold', 'base_inaction_penalty']
[DEBUG] Processing config section: trading_rules
[DEBUG] Current config keys: ['futures_enabled', 'leverage', 'commission_pct', 'min_order_value_usdt', 'slippage_pct', 'stop_loss_pct', 'take_profit_pct', 'trailing_stop']
[DEBUG] Processing config section: agent
[DEBUG] Current config keys: ['algorithm', 'policy', 'learning_rate', 'n_steps', 'batch_size', 'n_epochs', 'gamma', 'gae_lambda', 'clip_range', 'clip_range_vf', 'ent_coef', 'vf_coef', 'max_grad_norm', 'target_kl', 'seed', 'verbose', 'deterministic_inference', 'custom_log_freq_rollouts', 'eval_freq', 'eval_episodes', 'checkpoint_freq', 'n_envs', 'buffer_size', 'window_size', 'features_extractor_kwargs', 'learning_rate_schedule', 'ent_coef_schedule']
[DEBUG] Processing config section: agent.features_extractor_kwargs
[DEBUG] Current config keys: ['cnn_configs', 'fc_layers', 'attention', 'normalization', 'initialization', 'dropout', 'activation', 'policy_kwargs', 'ppo']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.5m
[DEBUG] Current config keys: ['input_shape', 'channel_groups', 'groups']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.5m.groups
[DEBUG] Current config keys: ['price', 'volume', 'indicators']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.5m.groups.price
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.5m.groups.volume
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.5m.groups.indicators
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.1h
[DEBUG] Current config keys: ['input_shape', 'channel_groups', 'groups']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.1h.groups
[DEBUG] Current config keys: ['price', 'volume', 'indicators']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.1h.groups.price
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.1h.groups.volume
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.1h.groups.indicators
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.4h
[DEBUG] Current config keys: ['input_shape', 'channel_groups', 'groups', 'conv_blocks', 'activation', 'batch_norm', 'final_dropout', 'use_channel_attention', 'use_temporal_attention', 'temporal_attention_heads']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.4h.groups
[DEBUG] Current config keys: ['price', 'volume', 'indicators']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.4h.groups.price
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.4h.groups.volume
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.4h.groups.indicators
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.attention
[DEBUG] Current config keys: ['num_heads', 'dropout', 'use_relative_positions']
[DEBUG] Processing config section: agent.features_extractor_kwargs.normalization
[DEBUG] Current config keys: ['use_batch_norm', 'use_layer_norm']
[DEBUG] Processing config section: agent.features_extractor_kwargs.initialization
[DEBUG] Current config keys: ['conv', 'dense', 'bias']
[DEBUG] Processing config section: agent.features_extractor_kwargs.policy_kwargs
[DEBUG] Current config keys: ['net_arch', 'activation_fn']
[DEBUG] Processing config section: agent.features_extractor_kwargs.policy_kwargs.net_arch
[DEBUG] Current config keys: ['shared', 'pi', 'vf']
[DEBUG] Processing config section: agent.features_extractor_kwargs.ppo
[DEBUG] Current config keys: ['n_steps', 'batch_size', 'n_epochs', 'gae_lambda', 'clip_range', 'clip_range_vf', 'ent_coef', 'vf_coef', 'max_grad_norm', 'normalize_advantage', 'use_sde', 'sde_sample_freq', 'use_reparameterization']
[DEBUG] Processing config section: agent.learning_rate_schedule
[DEBUG] Current config keys: ['type', 'start', 'end']
[DEBUG] Processing config section: agent.ent_coef_schedule
[DEBUG] Current config keys: ['type', 'start', 'end']
[DEBUG] Processing config section: data_processing
[DEBUG] Current config keys: ['max_lookahead', 'temporal_transforms']
[DEBUG] Processing config section: data_processing.temporal_transforms
[DEBUG] Current config keys: ['enabled', 'diffs', 'moving_averages', 'rolling_windows', 'rsi_window', 'macd_fast', 'macd_slow', 'macd_signal', 'bollinger_window', 'bollinger_std']
[DEBUG] Processing config section: data_augmentation
[DEBUG] Current config keys: ['enabled', 'time_warping', 'gaussian_noise', 'window_permutation', 'random_scaling', 'trend_augmentation', 'partial_shuffle', 'random_impulses', 'apply_order']
[DEBUG] Processing config section: data_augmentation.time_warping
[DEBUG] Current config keys: ['enabled', 'window', 'sigma', 'exclude_columns']
[DEBUG] Processing config section: data_augmentation.gaussian_noise
[DEBUG] Current config keys: ['enabled', 'std', 'exclude_columns']
[DEBUG] Processing config section: data_augmentation.window_permutation
[DEBUG] Current config keys: ['enabled', 'window_size', 'n_permutations', 'exclude_columns']
[DEBUG] Processing config section: data_augmentation.random_scaling
[DEBUG] Current config keys: ['enabled', 'scale_range', 'exclude_columns']
[DEBUG] Processing config section: data_augmentation.trend_augmentation
[DEBUG] Current config keys: ['enabled', 'max_trend', 'exclude_columns']
[DEBUG] Processing config section: data_augmentation.partial_shuffle
[DEBUG] Current config keys: ['enabled', 'segment_size', 'exclude_columns']
[DEBUG] Processing config section: data_augmentation.random_impulses
[DEBUG] Current config keys: ['enabled', 'probability', 'max_impulse', 'exclude_columns']
[DEBUG] Processing config section: regularization
[DEBUG] Current config keys: ['dropout_rate', 'use_batch_norm', 'batch_norm_momentum', 'batch_norm_epsilon', 'weight_decay', 'gradient_clip']
[DEBUG] Processing config section: training
[DEBUG] Current config keys: ['num_instances', 'timesteps_per_instance', 'batch_size', 'save_freq', 'checkpointing', 'progress_bar', 'use_custom_progress']
[DEBUG] Processing config section: training.checkpointing
[DEBUG] Current config keys: ['enabled', 'save_freq', 'model_name', 'save_path']
[DEBUG] Processing config section: risk_parameters
[DEBUG] Current config keys: ['base_sl_pct', 'base_tp_pct', 'max_sl_pct', 'min_sl_pct', 'min_tp_pct', 'max_tp_pct', 'drawdown_risk_multiplier', 'volatility_impact', 'volatility_sl_factor', 'winrate_tp_factor', 'max_drawdown_pct', 'min_risk_level', 'max_risk_level', 'risk_step', 'daily_loss_limit', 'weekly_loss_limit']
[DEBUG] Processing config section: dbe
[DEBUG] Current config keys: ['default_reset_capital', 'capital_tiers', 'market_regime_detection', 'regime_parameters', 'risk_management', 'take_profit', 'performance', 'logging', 'risk_parameters', 'position_sizing']
[DEBUG] Processing config section: dbe.market_regime_detection
[DEBUG] Current config keys: ['adx_threshold', 'rsi_overbought', 'rsi_oversold', 'ema_fast', 'ema_slow', 'atr_multiplier', 'macd_signal']
[DEBUG] Processing config section: dbe.regime_parameters
[DEBUG] Current config keys: ['bull', 'bear', 'volatile', 'sideways']
[DEBUG] Processing config section: dbe.regime_parameters.bull
[DEBUG] Current config keys: ['sl_multiplier', 'tp_multiplier', 'position_size_multiplier']
[DEBUG] Processing config section: dbe.regime_parameters.bear
[DEBUG] Current config keys: ['sl_multiplier', 'tp_multiplier', 'position_size_multiplier']
[DEBUG] Processing config section: dbe.regime_parameters.volatile
[DEBUG] Current config keys: ['sl_multiplier', 'tp_multiplier', 'position_size_multiplier']
[DEBUG] Processing config section: dbe.regime_parameters.sideways
[DEBUG] Current config keys: ['sl_multiplier', 'tp_multiplier', 'position_size_multiplier']
[DEBUG] Processing config section: dbe.risk_management
[DEBUG] Current config keys: ['min_trade_value', 'max_leverage', 'max_consecutive_losses']
[DEBUG] Processing config section: dbe.take_profit
[DEBUG] Current config keys: ['enabled', 'risk_reward_ratio', 'trailing_enabled', 'trailing_deviation_pct', 'volatility_adjustment', 'min_volatility', 'max_volatility', 'atr_period']
[DEBUG] Processing config section: dbe.performance
[DEBUG] Current config keys: ['lookback_window', 'min_trades_for_metrics', 'winrate_target', 'profit_factor_target', 'adaptation']
[DEBUG] Processing config section: dbe.performance.adaptation
[DEBUG] Current config keys: ['learning_rate', 'min_risk_level', 'max_risk_level', 'risk_increment', 'risk_decrement', 'use_dynamic_sizing', 'volatility_smoothing']
[DEBUG] Processing config section: dbe.logging
[DEBUG] Current config keys: ['level', 'save_trade_history', 'performance_metrics', 'save_interval']
[DEBUG] Processing config section: dbe.risk_parameters
[DEBUG] Current config keys: []
[DEBUG] Processing config section: dbe.position_sizing
[DEBUG] Current config keys: ['max_position_size', 'initial_sl_pct', 'initial_tp_pct', 'initial_position_size', 'min_trade_value', 'max_risk_per_trade_pct', 'max_asset_allocation_pct', 'concentration_limits', 'take_profit', 'risk_parameters']
[DEBUG] Processing config section: dbe.position_sizing.concentration_limits
[DEBUG] Current config keys: ['BTCUSDT', 'ETHUSDT', 'SOLUSDT', 'XRPUSDT', 'ADAUSDT']
[DEBUG] Processing config section: dbe.position_sizing.take_profit
[DEBUG] Current config keys: ['enabled', 'risk_reward_ratio', 'trailing_enabled', 'trailing_deviation_pct']
[DEBUG] Processing config section: dbe.position_sizing.risk_parameters
[DEBUG] Current config keys: ['min_risk_level', 'max_risk_level', 'base_sl_pct', 'base_tp_pct', 'max_sl_pct', 'min_sl_pct', 'daily_loss_limit', 'weekly_loss_limit']
[DEBUG] Processing config section: reward_shaping
[DEBUG] Current config keys: ['risk_factor', 'volatility_factor', 'drawdown_penalty', 'sharpe_factor', 'position_reward', 'commission_reward', 'slippage_reward', 'profit_factor_bonus', 'risk_reward_ratio', 'max_position_size', 'max_order_size', 'min_order_value_usdt', 'commission_pct', 'commission_penalty', 'min_profit_multiplier', 'slippage_pct', 'dbe', 'tier_rewards', 'logging']2025-09-12 05:40:23 - adan_trading_bot.data_processing.data_loader - INFO - Total chunks disponibles: 10
2025-09-12 05:40:23,979 - adan_trading_bot.data_processing.data_loader - INFO - Total chunks disponibles: 10
2025-09-12 05:40:23 - adan_trading_bot.data_processing.data_loader - INFO - Initialisation du ChunkedDataLoader avec 1 actifs et 3 timeframes
2025-09-12 05:40:23,979 - adan_trading_bot.data_processing.data_loader - INFO - Initialisation du ChunkedDataLoader avec 1 actifs et 3 timeframes
2025-09-12 05:40:23 - adan_trading_bot.data_processing.data_loader - INFO - Chargement des données pour 1 actifs et 3 timeframes en parallèle (max 8 workers)
2025-09-12 05:40:23,979 - adan_trading_bot.data_processing.data_loader - INFO - Chargement des données pour 1 actifs et 3 timeframes en parallèle (max 8 workers)
2025-09-12 05:40:23 - adan_trading_bot.portfolio.portfolio_manager - INFO - 5 paliers de capital chargés avec succès: Micro Capital (11.0+), Small Capital (30.0+), Medium Capital (100.0+), High Capital (300.0+), Enterprise (1000.0+)
2025-09-12 05:40:23,980 - adan_trading_bot.portfolio.portfolio_manager - INFO - 5 paliers de capital chargés avec succès: Micro Capital (11.0+), Small Capital (30.0+), Medium Capital (100.0+), High Capital (300.0+), Enterprise (1000.0+)
2025-09-12 05:40:23 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Performing full reset (reason: new_epoch=True, capital=$0.00, threshold=$11.00)
2025-09-12 05:40:23,980 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Performing full reset (reason: new_epoch=True, capital=$0.00, threshold=$11.00)
2025-09-12 05:40:23 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Portefeuille réinitialisé au capital initial: 20.50
2025-09-12 05:40:23,980 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Portefeuille réinitialisé au capital initial: 20.50
2025-09-12 05:40:23,980 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Configuration de la fenêtre pour 5m: 20 périodes
2025-09-12 05:40:23,980 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Configuration de la fenêtre pour 1h: 20 périodes
2025-09-12 05:40:23,980 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Configuration de la fenêtre pour 4h: 20 périodes
2025-09-12 05:40:23 - adan_trading_bot.data_processing.state_builder - INFO - === Configuration des caractéristiques par timeframe ===
2025-09-12 05:40:23,980 - adan_trading_bot.data_processing.state_builder - INFO - === Configuration des caractéristiques par timeframe ===
2025-09-12 05:40:23 - adan_trading_bot.data_processing.state_builder - INFO - Timeframe 5m: 15 features - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:23,980 - adan_trading_bot.data_processing.state_builder - INFO - Timeframe 5m: 15 features - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:23 - adan_trading_bot.data_processing.state_builder - INFO - Timeframe 1h: 15 features - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:23,980 - adan_trading_bot.data_processing.state_builder - INFO - Timeframe 1h: 15 features - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:23 - adan_trading_bot.data_processing.state_builder - INFO - Timeframe 4h: 15 features - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:23,980 - adan_trading_bot.data_processing.state_builder - INFO - Timeframe 4h: 15 features - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:23 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités pour 5m: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:23,981 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités pour 5m: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:23 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités pour 1h: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:23,981 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités pour 1h: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:23 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités pour 4h: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:23,981 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités pour 4h: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Initialized scalers for timeframes: ['5m', '1h', '4h']
2025-09-12 05:40:24,140 - adan_trading_bot.data_processing.state_builder - INFO - Initialized scalers for timeframes: ['5m', '1h', '4h']
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Scaler initialized for timeframe 5m: minmax with params: {'scaler_type': 'minmax', 'feature_range': (0, 1)}
2025-09-12 05:40:24,141 - adan_trading_bot.data_processing.state_builder - INFO - Scaler initialized for timeframe 5m: minmax with params: {'scaler_type': 'minmax', 'feature_range': (0, 1)}
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Scaler initialized for timeframe 1h: standard with params: {'scaler_type': 'standard'}
2025-09-12 05:40:24,141 - adan_trading_bot.data_processing.state_builder - INFO - Scaler initialized for timeframe 1h: standard with params: {'scaler_type': 'standard'}
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Scaler initialized for timeframe 4h: robust with params: {'scaler_type': 'robust'}
2025-09-12 05:40:24,141 - adan_trading_bot.data_processing.state_builder - INFO - Scaler initialized for timeframe 4h: robust with params: {'scaler_type': 'robust'}
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Observation dimensions - Market: 900 + Portfolio: 17 = Total: 917
2025-09-12 05:40:24,141 - adan_trading_bot.data_processing.state_builder - INFO - Observation dimensions - Market: 900 + Portfolio: 17 = Total: 917
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - StateBuilder initialized. Target flattened observation size: 917
2025-09-12 05:40:24,141 - adan_trading_bot.data_processing.state_builder - INFO - StateBuilder initialized. Target flattened observation size: 917
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Features per timeframe: {'5m': 15, '1h': 15, '4h': 15}
2025-09-12 05:40:24,141 - adan_trading_bot.data_processing.state_builder - INFO - Features per timeframe: {'5m': 15, '1h': 15, '4h': 15}
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - StateBuilder initialized with base_window_size=20, adaptive_window=True, timeframes=['5m', '1h', '4h'], features_per_timeframe={self.nb_features_per_tf}
2025-09-12 05:40:24,141 - adan_trading_bot.data_processing.state_builder - INFO - StateBuilder initialized with base_window_size=20, adaptive_window=True, timeframes=['5m', '1h', '4h'], features_per_timeframe={self.nb_features_per_tf}
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Configuration du timeframe 5m: fenêtre=20, features=15
2025-09-12 05:40:24,141 - adan_trading_bot.data_processing.state_builder - INFO - Configuration du timeframe 5m: fenêtre=20, features=15
2025-09-12 05:40:24,141 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Configuration appliquée pour 5m: fenêtre=20, features=15
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Configuration du timeframe 1h: fenêtre=20, features=15
2025-09-12 05:40:24,142 - adan_trading_bot.data_processing.state_builder - INFO - Configuration du timeframe 1h: fenêtre=20, features=15
2025-09-12 05:40:24,142 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Configuration appliquée pour 1h: fenêtre=20, features=15
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Configuration du timeframe 4h: fenêtre=20, features=15
2025-09-12 05:40:24,142 - adan_trading_bot.data_processing.state_builder - INFO - Configuration du timeframe 4h: fenêtre=20, features=15
2025-09-12 05:40:24,142 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Configuration appliquée pour 4h: fenêtre=20, features=15
2025-09-12 05:40:24,142 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Using fixed observation shape: (3, 20, 15)
2025-09-12 05:40:24,142 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Portfolio state dimension: 17
2025-09-12 05:40:24,143 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation space configured: Dict('observation': Box(-inf, inf, (3, 20, 15), float32), 'portfolio_state': Box(-inf, inf, (17,), float32))
2025-09-12 05:40:24,144 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - DynamicBehaviorEngine initialisé avec succès
2025-09-12 05:40:24,144 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Initialized max_steps to 500000 and max_chunks_per_episode to 10
2025-09-12 05:40:24,144 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Chunk configuration - Total chunks: 10, Max chunks per episode: 10
2025-09-12 05:40:24,144 - root - INFO - OrderManager initialized.
2025-09-12 05:40:24 - adan_trading_bot.common.reward_logger - INFO - RewardLogger initialized with base path: logs/rewards
2025-09-12 05:40:24,145 - adan_trading_bot.common.reward_logger - INFO - RewardLogger initialized with base path: logs/rewards
2025-09-12 05:40:24 - adan_trading_bot.environment.reward_calculator - INFO - RewardCalculator initialized with multi-objective optimization and detailed logging.
2025-09-12 05:40:24,145 - adan_trading_bot.environment.reward_calculator - INFO - RewardCalculator initialized with multi-objective optimization and detailed logging.
2025-09-12 05:40:24,145 - __main__ - INFO - Environnement 1 créé avec succès
2025-09-12 05:40:24,146 - __main__ - INFO - [WORKER-1] Environnement 1 initialisé avec succès
2025-09-12 05:40:24,146 - __main__ - INFO - Configuration data_dirs: {'base': '/home/morningstar/Documents/trading/bot/data/processed/indicators', 'train': '/home/morningstar/Documents/trading/bot/data/processed/indicators/train', 'val': '/home/morningstar/Documents/trading/bot/data/processed/indicators/val', 'test': '/home/morningstar/Documents/trading/bot/data/processed/indicators/test'}
2025-09-12 05:40:24,146 - __main__ - INFO - Data split utilisé: val
2025-09-12 05:40:24,146 - __main__ - INFO - Dossier de données final: /home/morningstar/Documents/trading/bot/data/processed/indicators/val
2025-09-12 05:40:24,146 - __main__ - INFO - Chargement des données depuis : /home/morningstar/Documents/trading/bot/data/processed/indicators/val
2025-09-12 05:40:24,146 - __main__ - INFO - Actifs: ['btcusdt']
2025-09-12 05:40:24,146 - __main__ - INFO - Timeframes: ['5m', '1h', '4h']
2025-09-12 05:40:24,146 - __main__ - INFO - Split de données: val
2025-09-12 05:40:24,161 - __main__ - INFO - Données chargées: BTCUSDT/5m - 16553 lignes
2025-09-12 05:40:24,169 - __main__ - INFO - Données chargées: BTCUSDT/1h - 1357 lignes
2025-09-12 05:40:24,176 - __main__ - INFO - Données chargées: BTCUSDT/4h - 322 lignes
2025-09-12 05:40:24,177 - __main__ - INFO - Taille de la fenêtre: 50
2025-09-12 05:40:24,177 - __main__ - INFO - Configuration des caractéristiques: {'price': ['open', 'high', 'low', 'close'], 'volume': ['volume'], 'indicators': ['rsi_14', 'macd_hist', 'atr_14', 'bb_upper', 'bb_middle', 'bb_lower']}
2025-09-12 05:40:24,177 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Paramètres de risque initialisés - Taille position: 10.0% (5.0%-25.0%), Risque/trade: 1.00%, Drawdown max: 25.0%, Trades conc.: 5

[DEBUG] Processing config section: reward_shaping.dbe
[DEBUG] Current config keys: ['initial_risk', 'min_risk', 'max_risk', 'winrate_decay', 'drawdown_impact', 'cash_utilization_impact']
[DEBUG] Processing config section: reward_shaping.tier_rewards
[DEBUG] Current config keys: ['promotion_bonus', 'demotion_penalty', 'checkpoint_on_promotion', 'checkpoint_dir', 'min_episodes_for_promotion', 'min_profit_for_promotion', 'tier_performance_multipliers']
[DEBUG] Processing config section: reward_shaping.logging
[DEBUG] Current config keys: ['version', 'disable_existing_loggers', 'log_dirs', 'formatters', 'handlers', 'loggers', 'root']
[DEBUG] Processing config section: reward_shaping.logging.log_dirs
[DEBUG] Current config keys: ['base', 'dbe_replay', 'metrics', 'models', 'performance', 'data_quality', 'memory']
[DEBUG] Processing config section: reward_shaping.logging.formatters
[DEBUG] Current config keys: ['standard', 'detailed', 'json']
[DEBUG] Processing config section: reward_shaping.logging.formatters.standard
[DEBUG] Current config keys: ['format', 'datefmt']
[DEBUG] Processing config section: reward_shaping.logging.formatters.detailed
[DEBUG] Current config keys: ['format', 'datefmt']
[DEBUG] Processing config section: reward_shaping.logging.formatters.json
[DEBUG] Current config keys: ['class', 'format', 'datefmt']
[DEBUG] Processing config section: reward_shaping.logging.handlers
[DEBUG] Current config keys: ['console', 'file_handler', 'error_file_handler', 'json_file_handler']
[DEBUG] Processing config section: reward_shaping.logging.handlers.console
[DEBUG] Current config keys: ['class', 'level', 'formatter', 'stream']
[DEBUG] Processing config section: reward_shaping.logging.handlers.file_handler
[DEBUG] Current config keys: ['class', 'level', 'formatter', 'filename', 'when', 'backupCount', 'encoding', 'utc']
[DEBUG] Processing config section: reward_shaping.logging.handlers.error_file_handler
[DEBUG] Current config keys: ['class', 'level', 'formatter', 'filename', 'maxBytes', 'backupCount', 'encoding']
[DEBUG] Processing config section: reward_shaping.logging.handlers.json_file_handler
[DEBUG] Current config keys: ['class', 'level', 'formatter', 'filename', 'maxBytes', 'backupCount', 'encoding']
[DEBUG] Processing config section: reward_shaping.logging.loggers
[DEBUG] Current config keys: ['', 'adan', 'tensorflow', 'stable_baselines3', 'urllib3', 'pyarrow']
[DEBUG] Processing config section: reward_shaping.logging.loggers.
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Processing config section: reward_shaping.logging.loggers.adan
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Processing config section: reward_shaping.logging.loggers.tensorflow
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Processing config section: reward_shaping.logging.loggers.stable_baselines3
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Processing config section: reward_shaping.logging.loggers.urllib3
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Processing config section: reward_shaping.logging.loggers.pyarrow
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Processing config section: reward_shaping.logging.root
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Starting resolution of environment variables
[DEBUG] Processing config section: root
[DEBUG] Current config keys: ['rank', 'worker_id', 'log_prefix', 'num_workers', 'assets', 'timeframes', 'chunk_sizes', 'data_loader', 'use_subproc', 'data_split_override']
[DEBUG] Processing config section: chunk_sizes
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: data_loader
[DEBUG] Current config keys: ['batch_size', 'shuffle', 'num_workers']
[DEBUG] Starting resolution of environment variables
[DEBUG] Processing config section: root
[DEBUG] Current config keys: ['general', 'paths', 'model', 'data', 'portfolio', 'workers', 'preprocessing', 'feature_engineering', 'environment', 'trading_rules', 'capital_tiers', 'agent', 'data_processing', 'data_augmentation', 'regularization', 'training', 'risk_parameters', 'dbe', 'reward_shaping']
[DEBUG] Processing config section: general
[DEBUG] Current config keys: ['project_name', 'random_seed', 'timezone', 'debug_mode', 'n_jobs']
[DEBUG] Processing config section: paths
[DEBUG] Current config keys: ['base_dir', 'data_dir', 'raw_data_dir', 'processed_data_dir', 'indicators_data_dir', 'final_data_dir', 'models_dir', 'trained_models_dir', 'logs_dir', 'reports_dir', 'figures_dir', 'metrics_dir']
[DEBUG] Processing config section: model
[DEBUG] Current config keys: ['architecture', 'diagnostics', 'style']
[DEBUG] Processing config section: model.architecture
[DEBUG] Current config keys: ['block_a', 'block_b', 'attention', 'head']
[DEBUG] Processing config section: model.architecture.block_a
[DEBUG] Current config keys: ['out_channels', 'kernel_size', 'padding', 'leaky_relu_negative_slope', 'dropout']
[DEBUG] Processing config section: model.architecture.block_b
[DEBUG] Current config keys: ['multi_scale', 'se_ratio', 'dropout']
[DEBUG] Processing config section: model.architecture.attention
[DEBUG] Current config keys: ['num_heads', 'dropout', 'use_residual']
[DEBUG] Processing config section: model.architecture.head
[DEBUG] Current config keys: ['hidden_units', 'dropout', 'activation']
[DEBUG] Processing config section: model.diagnostics
[DEBUG] Current config keys: ['use_grad_cam', 'use_integrated_gradients', 'target_layer', 'save_attention_maps', 'attention_map_dir', 'volume_up', 'volume_down', 'ma_short', 'ma_medium', 'ma_long', 'bollinger_mid', 'bollinger_band', 'rsi_line', 'rsi_overbought', 'rsi_oversold', 'macd_line', 'signal_line', 'histogram_up', 'histogram_down', 'background', 'grid']
[DEBUG] Resolving nested path in model.diagnostics.attention_map_dir: ${paths.models_dir}/attention_maps
[DEBUG] Resolving variable path: paths.models_dir
[DEBUG] Resolved path part: paths.models_dir.paths = {'base_dir': '/home/morningstar/Documents/trading/bot', 'data_dir': '/home/morningstar/Documents/trading/bot/data', 'raw_data_dir': '/home/morningstar/Documents/trading/bot/data/raw', 'processed_data_dir': '/home/morningstar/Documents/trading/bot/data/processed', 'indicators_data_dir': '/home/morningstar/Documents/trading/bot/data/processed/indicators', 'final_data_dir': '/home/morningstar/Documents/trading/bot/data/final', 'models_dir': '/home/morningstar/Documents/trading/bot/models', 'trained_models_dir': '/home/morningstar/Documents/trading/bot/models/rl_agents', 'logs_dir': '/home/morningstar/Documents/trading/bot/logs', 'reports_dir': '/home/morningstar/Documents/trading/bot/reports', 'figures_dir': '/home/morningstar/Documents/trading/bot/reports/figures', 'metrics_dir': '/home/morningstar/Documents/trading/bot/reports/metrics'}
[DEBUG] Resolved path part: paths.models_dir.paths.models_dir = /home/morningstar/Documents/trading/bot/models
[DEBUG] Successfully resolved full path: paths.models_dir = /home/morningstar/Documents/trading/bot/models
[DEBUG] Processing config section: model.style
[DEBUG] Current config keys: ['figure_facecolor', 'axes_facecolor', 'grid_alpha', 'font_family', 'font_size', 'candle_width', 'volume_alpha', 'line_width', 'legend_loc', 'legend_frameon', 'legend_facecolor', 'legend_edgecolor', 'left_margin', 'right_margin', 'top_margin', 'bottom_margin', 'hspace']
[DEBUG] Processing config section: data
[DEBUG] Current config keys: ['include', 'assets', 'processed_data', 'timeframes', 'data_dirs', 'features_per_timeframe']
[DEBUG] Processing config section: data.processed_data
[DEBUG] Current config keys: ['train', 'validation', 'test']
[DEBUG] Processing config section: data.data_dirs
[DEBUG] Current config keys: ['base', 'train', 'val', 'test']
[DEBUG] Processing config section: data.features_per_timeframe
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: portfolio
[DEBUG] Current config keys: ['initial_balance', 'include_portfolio_state', 'portfolio_state_features']
[DEBUG] Processing config section: workers
[DEBUG] Current config keys: ['w1', 'w2', 'w3', 'w4']
[DEBUG] Processing config section: workers.w1
[DEBUG] Current config keys: ['name', 'description', 'assets', 'timeframes', 'data_split', 'trading_mode', 'agent_config', 'reward_config']
[DEBUG] Processing config section: workers.w1.agent_config
[DEBUG] Current config keys: ['ent_coef', 'learning_rate', 'batch_size', 'n_steps', 'n_epochs', 'clip_range']
[DEBUG] Processing config section: workers.w1.reward_config
[DEBUG] Current config keys: ['drawdown_penalty', 'profit_factor_bonus', 'sharpe_ratio_bonus', 'win_rate_bonus']
[DEBUG] Processing config section: workers.w2
[DEBUG] Current config keys: ['name', 'description', 'assets', 'timeframes', 'data_split', 'trading_mode', 'agent_config', 'reward_config']
[DEBUG] Processing config section: workers.w2.agent_config
[DEBUG] Current config keys: ['ent_coef', 'learning_rate', 'batch_size', 'n_steps', 'n_epochs', 'clip_range']
[DEBUG] Processing config section: workers.w2.reward_config
[DEBUG] Current config keys: ['drawdown_penalty', 'profit_factor_bonus', 'sharpe_ratio_bonus', 'win_rate_bonus']
[DEBUG] Processing config section: workers.w3
[DEBUG] Current config keys: ['name', 'description', 'assets', 'timeframes', 'data_split', 'trading_mode', 'agent_config', 'reward_config']
[DEBUG] Processing config section: workers.w3.agent_config
[DEBUG] Current config keys: ['ent_coef', 'learning_rate', 'batch_size', 'n_steps', 'n_epochs', 'clip_range']
[DEBUG] Processing config section: workers.w3.reward_config
[DEBUG] Current config keys: ['drawdown_penalty', 'profit_factor_bonus', 'sharpe_ratio_bonus']
[DEBUG] Processing config section: workers.w4
[DEBUG] Current config keys: ['name', 'description', 'assets', 'timeframes', 'data_split', 'trading_mode', 'agent_config', 'reward_config']
[DEBUG] Processing config section: workers.w4.agent_config
[DEBUG] Current config keys: ['learning_rate', 'ent_coef']
[DEBUG] Processing config section: workers.w4.reward_config
[DEBUG] Current config keys: ['volatility_bonus', 'drawdown_penalty']
[DEBUG] Processing config section: preprocessing
[DEBUG] Current config keys: ['normalization', 'stationarity', 'window_config', 'technical_indicators']
[DEBUG] Processing config section: preprocessing.normalization
[DEBUG] Current config keys: ['method', 'clip_values', 'scale_per_asset', 'scale_per_timeframe']
[DEBUG] Processing config section: preprocessing.stationarity
[DEBUG] Current config keys: ['price_transform', 'volume_transform']
[DEBUG] Processing config section: preprocessing.window_config
[DEBUG] Current config keys: ['window_sizes', 'min_window_size', 'step_size']
[DEBUG] Processing config section: preprocessing.window_config.window_sizes
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: preprocessing.technical_indicators
[DEBUG] Current config keys: ['use_price_indicators', 'price_indicators', 'use_volume_indicators', 'volume_indicators', 'use_volatility_indicators', 'volatility_indicators']
[DEBUG] Processing config section: feature_engineering
[DEBUG] Current config keys: ['timeframes', 'columns_to_normalize', 'indicators', 'preprocessing', 'performance', 'validation']
[DEBUG] Processing config section: feature_engineering.indicators
[DEBUG] Current config keys: ['timeframes', 'common']
[DEBUG] Processing config section: feature_engineering.indicators.timeframes
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: feature_engineering.indicators.timeframes.5m
[DEBUG] Current config keys: ['momentum', 'trend', 'volatility', 'volume']
[DEBUG] Processing config section: feature_engineering.indicators.timeframes.1h
[DEBUG] Current config keys: ['momentum', 'trend', 'volatility', 'volume']
[DEBUG] Processing config section: feature_engineering.indicators.timeframes.4h
[DEBUG] Current config keys: ['momentum', 'trend', 'volatility', 'volume']
[DEBUG] Processing config section: feature_engineering.indicators.common
[DEBUG] Current config keys: ['bollinger', 'rsi', 'macd', 'atr', 'supertrend', 'psar']
[DEBUG] Processing config section: feature_engineering.indicators.common.bollinger
[DEBUG] Current config keys: ['window', 'window_dev']
[DEBUG] Processing config section: feature_engineering.indicators.common.rsi
[DEBUG] Current config keys: ['window']
[DEBUG] Processing config section: feature_engineering.indicators.common.macd
[DEBUG] Current config keys: ['fast', 'slow', 'signal']
[DEBUG] Processing config section: feature_engineering.indicators.common.atr
[DEBUG] Current config keys: ['window']
[DEBUG] Processing config section: feature_engineering.indicators.common.supertrend
[DEBUG] Current config keys: ['window', 'multiplier']
[DEBUG] Processing config section: feature_engineering.indicators.common.psar
[DEBUG] Current config keys: ['step', 'max_step']
[DEBUG] Processing config section: feature_engineering.preprocessing
[DEBUG] Current config keys: ['fillna', 'normalize', 'remove_outliers', 'min_data_points']
[DEBUG] Processing config section: feature_engineering.performance
[DEBUG] Current config keys: ['chunk_size', 'n_jobs', 'cache_indicators', 'parallel_timeframes']
[DEBUG] Processing config section: feature_engineering.validation
[DEBUG] Current config keys: ['check_nan_percentage', 'max_nan_percentage', 'check_feature_correlation', 'max_correlation_threshold']
[DEBUG] Processing config section: environment
[DEBUG] Current config keys: ['max_steps', 'initial_balance', 'commission', 'reward_scaling', 'window_size', 'features_config', 'max_chunks_per_episode', 'assets', 'observation', 'mode', 'base_currency', 'memory', 'risk_management', 'penalties']
[DEBUG] Processing config section: environment.features_config
[DEBUG] Current config keys: ['price', 'volume', 'indicators']
[DEBUG] Processing config section: environment.observation
[DEBUG] Current config keys: ['shape', 'window_sizes', 'warmup_steps', 'timeframes', 'features']
[DEBUG] Processing config section: environment.observation.window_sizes
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: environment.observation.features
[DEBUG] Current config keys: ['base', 'indicators', 'expected_features']
[DEBUG] Processing config section: environment.observation.features.indicators
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: environment.memory
[DEBUG] Current config keys: ['chunk_size', 'max_chunks_in_memory', 'aggressive_cleanup', 'force_gc_after_chunk', 'memory_warning_threshold_mb', 'memory_critical_threshold_mb', 'num_workers', 'pin_memory', 'batch_size', 'prefetch_factor', 'shuffle', 'drop_last', 'include_portfolio_state']
[DEBUG] Processing config section: environment.risk_management
[DEBUG] Current config keys: ['position_sizing']
[DEBUG] Processing config section: environment.risk_management.position_sizing
[DEBUG] Current config keys: ['max_position_size', 'initial_sl_pct', 'initial_tp_pct', 'initial_position_size', 'min_trade_value', 'max_risk_per_trade_pct', 'max_asset_allocation_pct', 'concentration_limits', 'take_profit', 'risk_parameters']
[DEBUG] Processing config section: environment.risk_management.position_sizing.concentration_limits
[DEBUG] Current config keys: ['BTCUSDT', 'ETHUSDT', 'SOLUSDT', 'XRPUSDT', 'ADAUSDT']
[DEBUG] Processing config section: environment.risk_management.position_sizing.take_profit
[DEBUG] Current config keys: ['enabled', 'risk_reward_ratio', 'trailing_enabled', 'trailing_deviation_pct']
[DEBUG] Processing config section: environment.risk_management.position_sizing.risk_parameters
[DEBUG] Current config keys: ['min_risk_level', 'max_risk_level', 'base_sl_pct', 'base_tp_pct', 'max_sl_pct', 'min_sl_pct', 'daily_loss_limit', 'weekly_loss_limit']
[DEBUG] Processing config section: environment.penalties
[DEBUG] Current config keys: ['invalid_action', 'order_rejection', 'inaction_freq_threshold', 'inaction_pnl_threshold', 'base_inaction_penalty']
[DEBUG] Processing config section: trading_rules
[DEBUG] Current config keys: ['futures_enabled', 'leverage', 'commission_pct', 'min_order_value_usdt', 'slippage_pct', 'stop_loss_pct', 'take_profit_pct', 'trailing_stop']
[DEBUG] Processing config section: agent
[DEBUG] Current config keys: ['algorithm', 'policy', 'learning_rate', 'n_steps', 'batch_size', 'n_epochs', 'gamma', 'gae_lambda', 'clip_range', 'clip_range_vf', 'ent_coef', 'vf_coef', 'max_grad_norm', 'target_kl', 'seed', 'verbose', 'deterministic_inference', 'custom_log_freq_rollouts', 'eval_freq', 'eval_episodes', 'checkpoint_freq', 'n_envs', 'buffer_size', 'window_size', 'features_extractor_kwargs', 'learning_rate_schedule', 'ent_coef_schedule']
[DEBUG] Processing config section: agent.features_extractor_kwargs
[DEBUG] Current config keys: ['cnn_configs', 'fc_layers', 'attention', 'normalization', 'initialization', 'dropout', 'activation', 'policy_kwargs', 'ppo']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.5m
[DEBUG] Current config keys: ['input_shape', 'channel_groups', 'groups']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.5m.groups
[DEBUG] Current config keys: ['price', 'volume', 'indicators']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.5m.groups.price
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.5m.groups.volume
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.5m.groups.indicators
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.1h
[DEBUG] Current config keys: ['input_shape', 'channel_groups', 'groups']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.1h.groups
[DEBUG] Current config keys: ['price', 'volume', 'indicators']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.1h.groups.price
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.1h.groups.volume
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.1h.groups.indicators
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.4h
[DEBUG] Current config keys: ['input_shape', 'channel_groups', 'groups', 'conv_blocks', 'activation', 'batch_norm', 'final_dropout', 'use_channel_attention', 'use_temporal_attention', 'temporal_attention_heads']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.4h.groups
[DEBUG] Current config keys: ['price', 'volume', 'indicators']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.4h.groups.price
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.4h.groups.volume
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.4h.groups.indicators
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.attention
[DEBUG] Current config keys: ['num_heads', 'dropout', 'use_relative_positions']
[DEBUG] Processing config section: agent.features_extractor_kwargs.normalization
[DEBUG] Current config keys: ['use_batch_norm', 'use_layer_norm']
[DEBUG] Processing config section: agent.features_extractor_kwargs.initialization
[DEBUG] Current config keys: ['conv', 'dense', 'bias']
[DEBUG] Processing config section: agent.features_extractor_kwargs.policy_kwargs
[DEBUG] Current config keys: ['net_arch', 'activation_fn']
[DEBUG] Processing config section: agent.features_extractor_kwargs.policy_kwargs.net_arch
[DEBUG] Current config keys: ['shared', 'pi', 'vf']
[DEBUG] Processing config section: agent.features_extractor_kwargs.ppo
[DEBUG] Current config keys: ['n_steps', 'batch_size', 'n_epochs', 'gae_lambda', 'clip_range', 'clip_range_vf', 'ent_coef', 'vf_coef', 'max_grad_norm', 'normalize_advantage', 'use_sde', 'sde_sample_freq', 'use_reparameterization']
[DEBUG] Processing config section: agent.learning_rate_schedule
[DEBUG] Current config keys: ['type', 'start', 'end']
[DEBUG] Processing config section: agent.ent_coef_schedule
[DEBUG] Current config keys: ['type', 'start', 'end']
[DEBUG] Processing config section: data_processing
[DEBUG] Current config keys: ['max_lookahead', 'temporal_transforms']
[DEBUG] Processing config section: data_processing.temporal_transforms
[DEBUG] Current config keys: ['enabled', 'diffs', 'moving_averages', 'rolling_windows', 'rsi_window', 'macd_fast', 'macd_slow', 'macd_signal', 'bollinger_window', 'bollinger_std']
[DEBUG] Processing config section: data_augmentation
[DEBUG] Current config keys: ['enabled', 'time_warping', 'gaussian_noise', 'window_permutation', 'random_scaling', 'trend_augmentation', 'partial_shuffle', 'random_impulses', 'apply_order']
[DEBUG] Processing config section: data_augmentation.time_warping
[DEBUG] Current config keys: ['enabled', 'window', 'sigma', 'exclude_columns']
[DEBUG] Processing config section: data_augmentation.gaussian_noise
[DEBUG] Current config keys: ['enabled', 'std', 'exclude_columns']
[DEBUG] Processing config section: data_augmentation.window_permutation
[DEBUG] Current config keys: ['enabled', 'window_size', 'n_permutations', 'exclude_columns']
[DEBUG] Processing config section: data_augmentation.random_scaling
[DEBUG] Current config keys: ['enabled', 'scale_range', 'exclude_columns']
[DEBUG] Processing config section: data_augmentation.trend_augmentation
[DEBUG] Current config keys: ['enabled', 'max_trend', 'exclude_columns']
[DEBUG] Processing config section: data_augmentation.partial_shuffle
[DEBUG] Current config keys: ['enabled', 'segment_size', 'exclude_columns']
[DEBUG] Processing config section: data_augmentation.random_impulses
[DEBUG] Current config keys: ['enabled', 'probability', 'max_impulse', 'exclude_columns']
[DEBUG] Processing config section: regularization
[DEBUG] Current config keys: ['dropout_rate', 'use_batch_norm', 'batch_norm_momentum', 'batch_norm_epsilon', 'weight_decay', 'gradient_clip']
[DEBUG] Processing config section: training
[DEBUG] Current config keys: ['num_instances', 'timesteps_per_instance', 'batch_size', 'save_freq', 'checkpointing', 'progress_bar', 'use_custom_progress']
[DEBUG] Processing config section: training.checkpointing
[DEBUG] Current config keys: ['enabled', 'save_freq', 'model_name', 'save_path']
[DEBUG] Processing config section: risk_parameters
[DEBUG] Current config keys: ['base_sl_pct', 'base_tp_pct', 'max_sl_pct', 'min_sl_pct', 'min_tp_pct', 'max_tp_pct', 'drawdown_risk_multiplier', 'volatility_impact', 'volatility_sl_factor', 'winrate_tp_factor', 'max_drawdown_pct', 'min_risk_level', 'max_risk_level', 'risk_step', 'daily_loss_limit', 'weekly_loss_limit']
[DEBUG] Processing config section: dbe
[DEBUG] Current config keys: ['default_reset_capital', 'capital_tiers', 'market_regime_detection', 'regime_parameters', 'risk_management', 'take_profit', 'performance', 'logging', 'risk_parameters', 'position_sizing']
[DEBUG] Processing config section: dbe.market_regime_detection
[DEBUG] Current config keys: ['adx_threshold', 'rsi_overbought', 'rsi_oversold', 'ema_fast', 'ema_slow', 'atr_multiplier', 'macd_signal']
[DEBUG] Processing config section: dbe.regime_parameters
[DEBUG] Current config keys: ['bull', 'bear', 'volatile', 'sideways']
[DEBUG] Processing config section: dbe.regime_parameters.bull
[DEBUG] Current config keys: ['sl_multiplier', 'tp_multiplier', 'position_size_multiplier']
[DEBUG] Processing config section: dbe.regime_parameters.bear
[DEBUG] Current config keys: ['sl_multiplier', 'tp_multiplier', 'position_size_multiplier']
[DEBUG] Processing config section: dbe.regime_parameters.volatile
[DEBUG] Current config keys: ['sl_multiplier', 'tp_multiplier', 'position_size_multiplier']
[DEBUG] Processing config section: dbe.regime_parameters.sideways
[DEBUG] Current config keys: ['sl_multiplier', 'tp_multiplier', 'position_size_multiplier']
[DEBUG] Processing config section: dbe.risk_management
[DEBUG] Current config keys: ['min_trade_value', 'max_leverage', 'max_consecutive_losses']2025-09-12 05:40:24 - adan_trading_bot.data_processing.data_loader - INFO - Total chunks disponibles: 10
2025-09-12 05:40:24,180 - adan_trading_bot.data_processing.data_loader - INFO - Total chunks disponibles: 10
2025-09-12 05:40:24 - adan_trading_bot.data_processing.data_loader - INFO - Initialisation du ChunkedDataLoader avec 1 actifs et 3 timeframes
2025-09-12 05:40:24,182 - adan_trading_bot.data_processing.data_loader - INFO - Initialisation du ChunkedDataLoader avec 1 actifs et 3 timeframes
2025-09-12 05:40:24 - adan_trading_bot.data_processing.data_loader - INFO - Chargement des données pour 1 actifs et 3 timeframes en parallèle (max 8 workers)
2025-09-12 05:40:24,182 - adan_trading_bot.data_processing.data_loader - INFO - Chargement des données pour 1 actifs et 3 timeframes en parallèle (max 8 workers)
2025-09-12 05:40:24 - adan_trading_bot.portfolio.portfolio_manager - INFO - 5 paliers de capital chargés avec succès: Micro Capital (11.0+), Small Capital (30.0+), Medium Capital (100.0+), High Capital (300.0+), Enterprise (1000.0+)
2025-09-12 05:40:24,183 - adan_trading_bot.portfolio.portfolio_manager - INFO - 5 paliers de capital chargés avec succès: Micro Capital (11.0+), Small Capital (30.0+), Medium Capital (100.0+), High Capital (300.0+), Enterprise (1000.0+)
2025-09-12 05:40:24 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Performing full reset (reason: new_epoch=True, capital=$0.00, threshold=$11.00)
2025-09-12 05:40:24,183 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Performing full reset (reason: new_epoch=True, capital=$0.00, threshold=$11.00)
2025-09-12 05:40:24 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Portefeuille réinitialisé au capital initial: 20.50
2025-09-12 05:40:24,183 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Portefeuille réinitialisé au capital initial: 20.50
2025-09-12 05:40:24,183 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Configuration de la fenêtre pour 5m: 20 périodes
2025-09-12 05:40:24,183 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Configuration de la fenêtre pour 1h: 20 périodes
2025-09-12 05:40:24,183 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Configuration de la fenêtre pour 4h: 20 périodes
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - === Configuration des caractéristiques par timeframe ===
2025-09-12 05:40:24,183 - adan_trading_bot.data_processing.state_builder - INFO - === Configuration des caractéristiques par timeframe ===
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Timeframe 5m: 15 features - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:24,183 - adan_trading_bot.data_processing.state_builder - INFO - Timeframe 5m: 15 features - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Timeframe 1h: 15 features - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:24,183 - adan_trading_bot.data_processing.state_builder - INFO - Timeframe 1h: 15 features - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Timeframe 4h: 15 features - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:24,183 - adan_trading_bot.data_processing.state_builder - INFO - Timeframe 4h: 15 features - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités pour 5m: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:24,183 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités pour 5m: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités pour 1h: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:24,183 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités pour 1h: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités pour 4h: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:24,183 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités pour 4h: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Initialized scalers for timeframes: ['5m', '1h', '4h']
2025-09-12 05:40:24,348 - adan_trading_bot.data_processing.state_builder - INFO - Initialized scalers for timeframes: ['5m', '1h', '4h']
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Scaler initialized for timeframe 5m: minmax with params: {'scaler_type': 'minmax', 'feature_range': (0, 1)}
2025-09-12 05:40:24,348 - adan_trading_bot.data_processing.state_builder - INFO - Scaler initialized for timeframe 5m: minmax with params: {'scaler_type': 'minmax', 'feature_range': (0, 1)}
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Scaler initialized for timeframe 1h: standard with params: {'scaler_type': 'standard'}
2025-09-12 05:40:24,349 - adan_trading_bot.data_processing.state_builder - INFO - Scaler initialized for timeframe 1h: standard with params: {'scaler_type': 'standard'}
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Scaler initialized for timeframe 4h: robust with params: {'scaler_type': 'robust'}
2025-09-12 05:40:24,349 - adan_trading_bot.data_processing.state_builder - INFO - Scaler initialized for timeframe 4h: robust with params: {'scaler_type': 'robust'}
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Observation dimensions - Market: 900 + Portfolio: 17 = Total: 917
2025-09-12 05:40:24,349 - adan_trading_bot.data_processing.state_builder - INFO - Observation dimensions - Market: 900 + Portfolio: 17 = Total: 917
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - StateBuilder initialized. Target flattened observation size: 917
2025-09-12 05:40:24,349 - adan_trading_bot.data_processing.state_builder - INFO - StateBuilder initialized. Target flattened observation size: 917
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Features per timeframe: {'5m': 15, '1h': 15, '4h': 15}
2025-09-12 05:40:24,349 - adan_trading_bot.data_processing.state_builder - INFO - Features per timeframe: {'5m': 15, '1h': 15, '4h': 15}
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - StateBuilder initialized with base_window_size=20, adaptive_window=True, timeframes=['5m', '1h', '4h'], features_per_timeframe={self.nb_features_per_tf}
2025-09-12 05:40:24,349 - adan_trading_bot.data_processing.state_builder - INFO - StateBuilder initialized with base_window_size=20, adaptive_window=True, timeframes=['5m', '1h', '4h'], features_per_timeframe={self.nb_features_per_tf}
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Configuration du timeframe 5m: fenêtre=20, features=15
2025-09-12 05:40:24,349 - adan_trading_bot.data_processing.state_builder - INFO - Configuration du timeframe 5m: fenêtre=20, features=15
2025-09-12 05:40:24,349 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Configuration appliquée pour 5m: fenêtre=20, features=15
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Configuration du timeframe 1h: fenêtre=20, features=15
2025-09-12 05:40:24,349 - adan_trading_bot.data_processing.state_builder - INFO - Configuration du timeframe 1h: fenêtre=20, features=15
2025-09-12 05:40:24,350 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Configuration appliquée pour 1h: fenêtre=20, features=15
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Configuration du timeframe 4h: fenêtre=20, features=15
2025-09-12 05:40:24,350 - adan_trading_bot.data_processing.state_builder - INFO - Configuration du timeframe 4h: fenêtre=20, features=15
2025-09-12 05:40:24,350 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Configuration appliquée pour 4h: fenêtre=20, features=15
2025-09-12 05:40:24,350 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Using fixed observation shape: (3, 20, 15)
2025-09-12 05:40:24,350 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Portfolio state dimension: 17
2025-09-12 05:40:24,351 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation space configured: Dict('observation': Box(-inf, inf, (3, 20, 15), float32), 'portfolio_state': Box(-inf, inf, (17,), float32))
2025-09-12 05:40:24,351 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - DynamicBehaviorEngine initialisé avec succès
2025-09-12 05:40:24,352 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Initialized max_steps to 500000 and max_chunks_per_episode to 10
2025-09-12 05:40:24,352 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Chunk configuration - Total chunks: 10, Max chunks per episode: 10
2025-09-12 05:40:24,352 - root - INFO - OrderManager initialized.
2025-09-12 05:40:24 - adan_trading_bot.common.reward_logger - INFO - RewardLogger initialized with base path: logs/rewards
2025-09-12 05:40:24,352 - adan_trading_bot.common.reward_logger - INFO - RewardLogger initialized with base path: logs/rewards
2025-09-12 05:40:24 - adan_trading_bot.environment.reward_calculator - INFO - RewardCalculator initialized with multi-objective optimization and detailed logging.
2025-09-12 05:40:24,353 - adan_trading_bot.environment.reward_calculator - INFO - RewardCalculator initialized with multi-objective optimization and detailed logging.
2025-09-12 05:40:24,353 - __main__ - INFO - Environnement 2 créé avec succès
2025-09-12 05:40:24,353 - __main__ - INFO - [WORKER-2] Environnement 2 initialisé avec succès
2025-09-12 05:40:24,354 - __main__ - INFO - Configuration data_dirs: {'base': '/home/morningstar/Documents/trading/bot/data/processed/indicators', 'train': '/home/morningstar/Documents/trading/bot/data/processed/indicators/train', 'val': '/home/morningstar/Documents/trading/bot/data/processed/indicators/val', 'test': '/home/morningstar/Documents/trading/bot/data/processed/indicators/test'}
2025-09-12 05:40:24,354 - __main__ - INFO - Data split utilisé: val
2025-09-12 05:40:24,354 - __main__ - INFO - Dossier de données final: /home/morningstar/Documents/trading/bot/data/processed/indicators/val
2025-09-12 05:40:24,354 - __main__ - INFO - Chargement des données depuis : /home/morningstar/Documents/trading/bot/data/processed/indicators/val
2025-09-12 05:40:24,354 - __main__ - INFO - Actifs: ['btcusdt']
2025-09-12 05:40:24,354 - __main__ - INFO - Timeframes: ['5m', '1h', '4h']
2025-09-12 05:40:24,354 - __main__ - INFO - Split de données: val
2025-09-12 05:40:24,370 - __main__ - INFO - Données chargées: BTCUSDT/5m - 16553 lignes
2025-09-12 05:40:24,377 - __main__ - INFO - Données chargées: BTCUSDT/1h - 1357 lignes
2025-09-12 05:40:24,384 - __main__ - INFO - Données chargées: BTCUSDT/4h - 322 lignes
2025-09-12 05:40:24,384 - __main__ - INFO - Taille de la fenêtre: 50
2025-09-12 05:40:24,384 - __main__ - INFO - Configuration des caractéristiques: {'price': ['open', 'high', 'low', 'close'], 'volume': ['volume'], 'indicators': ['rsi_14', 'macd_hist', 'atr_14', 'bb_upper', 'bb_middle', 'bb_lower']}
2025-09-12 05:40:24,384 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Paramètres de risque initialisés - Taille position: 10.0% (5.0%-25.0%), Risque/trade: 1.00%, Drawdown max: 25.0%, Trades conc.: 5

[DEBUG] Processing config section: dbe.take_profit
[DEBUG] Current config keys: ['enabled', 'risk_reward_ratio', 'trailing_enabled', 'trailing_deviation_pct', 'volatility_adjustment', 'min_volatility', 'max_volatility', 'atr_period']
[DEBUG] Processing config section: dbe.performance
[DEBUG] Current config keys: ['lookback_window', 'min_trades_for_metrics', 'winrate_target', 'profit_factor_target', 'adaptation']
[DEBUG] Processing config section: dbe.performance.adaptation
[DEBUG] Current config keys: ['learning_rate', 'min_risk_level', 'max_risk_level', 'risk_increment', 'risk_decrement', 'use_dynamic_sizing', 'volatility_smoothing']
[DEBUG] Processing config section: dbe.logging
[DEBUG] Current config keys: ['level', 'save_trade_history', 'performance_metrics', 'save_interval']
[DEBUG] Processing config section: dbe.risk_parameters
[DEBUG] Current config keys: []
[DEBUG] Processing config section: dbe.position_sizing
[DEBUG] Current config keys: ['max_position_size', 'initial_sl_pct', 'initial_tp_pct', 'initial_position_size', 'min_trade_value', 'max_risk_per_trade_pct', 'max_asset_allocation_pct', 'concentration_limits', 'take_profit', 'risk_parameters']
[DEBUG] Processing config section: dbe.position_sizing.concentration_limits
[DEBUG] Current config keys: ['BTCUSDT', 'ETHUSDT', 'SOLUSDT', 'XRPUSDT', 'ADAUSDT']
[DEBUG] Processing config section: dbe.position_sizing.take_profit
[DEBUG] Current config keys: ['enabled', 'risk_reward_ratio', 'trailing_enabled', 'trailing_deviation_pct']
[DEBUG] Processing config section: dbe.position_sizing.risk_parameters
[DEBUG] Current config keys: ['min_risk_level', 'max_risk_level', 'base_sl_pct', 'base_tp_pct', 'max_sl_pct', 'min_sl_pct', 'daily_loss_limit', 'weekly_loss_limit']
[DEBUG] Processing config section: reward_shaping
[DEBUG] Current config keys: ['risk_factor', 'volatility_factor', 'drawdown_penalty', 'sharpe_factor', 'position_reward', 'commission_reward', 'slippage_reward', 'profit_factor_bonus', 'risk_reward_ratio', 'max_position_size', 'max_order_size', 'min_order_value_usdt', 'commission_pct', 'commission_penalty', 'min_profit_multiplier', 'slippage_pct', 'dbe', 'tier_rewards', 'logging']
[DEBUG] Processing config section: reward_shaping.dbe
[DEBUG] Current config keys: ['initial_risk', 'min_risk', 'max_risk', 'winrate_decay', 'drawdown_impact', 'cash_utilization_impact']
[DEBUG] Processing config section: reward_shaping.tier_rewards
[DEBUG] Current config keys: ['promotion_bonus', 'demotion_penalty', 'checkpoint_on_promotion', 'checkpoint_dir', 'min_episodes_for_promotion', 'min_profit_for_promotion', 'tier_performance_multipliers']
[DEBUG] Processing config section: reward_shaping.logging
[DEBUG] Current config keys: ['version', 'disable_existing_loggers', 'log_dirs', 'formatters', 'handlers', 'loggers', 'root']
[DEBUG] Processing config section: reward_shaping.logging.log_dirs
[DEBUG] Current config keys: ['base', 'dbe_replay', 'metrics', 'models', 'performance', 'data_quality', 'memory']
[DEBUG] Processing config section: reward_shaping.logging.formatters
[DEBUG] Current config keys: ['standard', 'detailed', 'json']
[DEBUG] Processing config section: reward_shaping.logging.formatters.standard
[DEBUG] Current config keys: ['format', 'datefmt']
[DEBUG] Processing config section: reward_shaping.logging.formatters.detailed
[DEBUG] Current config keys: ['format', 'datefmt']
[DEBUG] Processing config section: reward_shaping.logging.formatters.json
[DEBUG] Current config keys: ['class', 'format', 'datefmt']
[DEBUG] Processing config section: reward_shaping.logging.handlers
[DEBUG] Current config keys: ['console', 'file_handler', 'error_file_handler', 'json_file_handler']
[DEBUG] Processing config section: reward_shaping.logging.handlers.console
[DEBUG] Current config keys: ['class', 'level', 'formatter', 'stream']
[DEBUG] Processing config section: reward_shaping.logging.handlers.file_handler
[DEBUG] Current config keys: ['class', 'level', 'formatter', 'filename', 'when', 'backupCount', 'encoding', 'utc']
[DEBUG] Processing config section: reward_shaping.logging.handlers.error_file_handler
[DEBUG] Current config keys: ['class', 'level', 'formatter', 'filename', 'maxBytes', 'backupCount', 'encoding']
[DEBUG] Processing config section: reward_shaping.logging.handlers.json_file_handler
[DEBUG] Current config keys: ['class', 'level', 'formatter', 'filename', 'maxBytes', 'backupCount', 'encoding']
[DEBUG] Processing config section: reward_shaping.logging.loggers
[DEBUG] Current config keys: ['', 'adan', 'tensorflow', 'stable_baselines3', 'urllib3', 'pyarrow']
[DEBUG] Processing config section: reward_shaping.logging.loggers.
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Processing config section: reward_shaping.logging.loggers.adan
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Processing config section: reward_shaping.logging.loggers.tensorflow
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Processing config section: reward_shaping.logging.loggers.stable_baselines3
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Processing config section: reward_shaping.logging.loggers.urllib3
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Processing config section: reward_shaping.logging.loggers.pyarrow
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Processing config section: reward_shaping.logging.root
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Starting resolution of environment variables
[DEBUG] Processing config section: root
[DEBUG] Current config keys: ['rank', 'worker_id', 'log_prefix', 'num_workers', 'assets', 'timeframes', 'chunk_sizes', 'data_loader', 'use_subproc', 'data_split_override']
[DEBUG] Processing config section: chunk_sizes
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: data_loader
[DEBUG] Current config keys: ['batch_size', 'shuffle', 'num_workers']
[DEBUG] Starting resolution of environment variables
[DEBUG] Processing config section: root
[DEBUG] Current config keys: ['general', 'paths', 'model', 'data', 'portfolio', 'workers', 'preprocessing', 'feature_engineering', 'environment', 'trading_rules', 'capital_tiers', 'agent', 'data_processing', 'data_augmentation', 'regularization', 'training', 'risk_parameters', 'dbe', 'reward_shaping']
[DEBUG] Processing config section: general
[DEBUG] Current config keys: ['project_name', 'random_seed', 'timezone', 'debug_mode', 'n_jobs']
[DEBUG] Processing config section: paths
[DEBUG] Current config keys: ['base_dir', 'data_dir', 'raw_data_dir', 'processed_data_dir', 'indicators_data_dir', 'final_data_dir', 'models_dir', 'trained_models_dir', 'logs_dir', 'reports_dir', 'figures_dir', 'metrics_dir']
[DEBUG] Processing config section: model
[DEBUG] Current config keys: ['architecture', 'diagnostics', 'style']
[DEBUG] Processing config section: model.architecture
[DEBUG] Current config keys: ['block_a', 'block_b', 'attention', 'head']
[DEBUG] Processing config section: model.architecture.block_a
[DEBUG] Current config keys: ['out_channels', 'kernel_size', 'padding', 'leaky_relu_negative_slope', 'dropout']
[DEBUG] Processing config section: model.architecture.block_b
[DEBUG] Current config keys: ['multi_scale', 'se_ratio', 'dropout']
[DEBUG] Processing config section: model.architecture.attention
[DEBUG] Current config keys: ['num_heads', 'dropout', 'use_residual']
[DEBUG] Processing config section: model.architecture.head
[DEBUG] Current config keys: ['hidden_units', 'dropout', 'activation']
[DEBUG] Processing config section: model.diagnostics
[DEBUG] Current config keys: ['use_grad_cam', 'use_integrated_gradients', 'target_layer', 'save_attention_maps', 'attention_map_dir', 'volume_up', 'volume_down', 'ma_short', 'ma_medium', 'ma_long', 'bollinger_mid', 'bollinger_band', 'rsi_line', 'rsi_overbought', 'rsi_oversold', 'macd_line', 'signal_line', 'histogram_up', 'histogram_down', 'background', 'grid']
[DEBUG] Resolving nested path in model.diagnostics.attention_map_dir: ${paths.models_dir}/attention_maps
[DEBUG] Resolving variable path: paths.models_dir
[DEBUG] Resolved path part: paths.models_dir.paths = {'base_dir': '/home/morningstar/Documents/trading/bot', 'data_dir': '/home/morningstar/Documents/trading/bot/data', 'raw_data_dir': '/home/morningstar/Documents/trading/bot/data/raw', 'processed_data_dir': '/home/morningstar/Documents/trading/bot/data/processed', 'indicators_data_dir': '/home/morningstar/Documents/trading/bot/data/processed/indicators', 'final_data_dir': '/home/morningstar/Documents/trading/bot/data/final', 'models_dir': '/home/morningstar/Documents/trading/bot/models', 'trained_models_dir': '/home/morningstar/Documents/trading/bot/models/rl_agents', 'logs_dir': '/home/morningstar/Documents/trading/bot/logs', 'reports_dir': '/home/morningstar/Documents/trading/bot/reports', 'figures_dir': '/home/morningstar/Documents/trading/bot/reports/figures', 'metrics_dir': '/home/morningstar/Documents/trading/bot/reports/metrics'}
[DEBUG] Resolved path part: paths.models_dir.paths.models_dir = /home/morningstar/Documents/trading/bot/models
[DEBUG] Successfully resolved full path: paths.models_dir = /home/morningstar/Documents/trading/bot/models
[DEBUG] Processing config section: model.style
[DEBUG] Current config keys: ['figure_facecolor', 'axes_facecolor', 'grid_alpha', 'font_family', 'font_size', 'candle_width', 'volume_alpha', 'line_width', 'legend_loc', 'legend_frameon', 'legend_facecolor', 'legend_edgecolor', 'left_margin', 'right_margin', 'top_margin', 'bottom_margin', 'hspace']
[DEBUG] Processing config section: data
[DEBUG] Current config keys: ['include', 'assets', 'processed_data', 'timeframes', 'data_dirs', 'features_per_timeframe']
[DEBUG] Processing config section: data.processed_data
[DEBUG] Current config keys: ['train', 'validation', 'test']
[DEBUG] Processing config section: data.data_dirs
[DEBUG] Current config keys: ['base', 'train', 'val', 'test']
[DEBUG] Processing config section: data.features_per_timeframe
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: portfolio
[DEBUG] Current config keys: ['initial_balance', 'include_portfolio_state', 'portfolio_state_features']
[DEBUG] Processing config section: workers
[DEBUG] Current config keys: ['w1', 'w2', 'w3', 'w4']
[DEBUG] Processing config section: workers.w1
[DEBUG] Current config keys: ['name', 'description', 'assets', 'timeframes', 'data_split', 'trading_mode', 'agent_config', 'reward_config']
[DEBUG] Processing config section: workers.w1.agent_config
[DEBUG] Current config keys: ['ent_coef', 'learning_rate', 'batch_size', 'n_steps', 'n_epochs', 'clip_range']
[DEBUG] Processing config section: workers.w1.reward_config
[DEBUG] Current config keys: ['drawdown_penalty', 'profit_factor_bonus', 'sharpe_ratio_bonus', 'win_rate_bonus']
[DEBUG] Processing config section: workers.w2
[DEBUG] Current config keys: ['name', 'description', 'assets', 'timeframes', 'data_split', 'trading_mode', 'agent_config', 'reward_config']
[DEBUG] Processing config section: workers.w2.agent_config
[DEBUG] Current config keys: ['ent_coef', 'learning_rate', 'batch_size', 'n_steps', 'n_epochs', 'clip_range']
[DEBUG] Processing config section: workers.w2.reward_config
[DEBUG] Current config keys: ['drawdown_penalty', 'profit_factor_bonus', 'sharpe_ratio_bonus', 'win_rate_bonus']
[DEBUG] Processing config section: workers.w3
[DEBUG] Current config keys: ['name', 'description', 'assets', 'timeframes', 'data_split', 'trading_mode', 'agent_config', 'reward_config']
[DEBUG] Processing config section: workers.w3.agent_config
[DEBUG] Current config keys: ['ent_coef', 'learning_rate', 'batch_size', 'n_steps', 'n_epochs', 'clip_range']
[DEBUG] Processing config section: workers.w3.reward_config
[DEBUG] Current config keys: ['drawdown_penalty', 'profit_factor_bonus', 'sharpe_ratio_bonus']
[DEBUG] Processing config section: workers.w4
[DEBUG] Current config keys: ['name', 'description', 'assets', 'timeframes', 'data_split', 'trading_mode', 'agent_config', 'reward_config']
[DEBUG] Processing config section: workers.w4.agent_config
[DEBUG] Current config keys: ['learning_rate', 'ent_coef']
[DEBUG] Processing config section: workers.w4.reward_config
[DEBUG] Current config keys: ['volatility_bonus', 'drawdown_penalty']
[DEBUG] Processing config section: preprocessing
[DEBUG] Current config keys: ['normalization', 'stationarity', 'window_config', 'technical_indicators']
[DEBUG] Processing config section: preprocessing.normalization
[DEBUG] Current config keys: ['method', 'clip_values', 'scale_per_asset', 'scale_per_timeframe']
[DEBUG] Processing config section: preprocessing.stationarity
[DEBUG] Current config keys: ['price_transform', 'volume_transform']
[DEBUG] Processing config section: preprocessing.window_config
[DEBUG] Current config keys: ['window_sizes', 'min_window_size', 'step_size']
[DEBUG] Processing config section: preprocessing.window_config.window_sizes
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: preprocessing.technical_indicators
[DEBUG] Current config keys: ['use_price_indicators', 'price_indicators', 'use_volume_indicators', 'volume_indicators', 'use_volatility_indicators', 'volatility_indicators']
[DEBUG] Processing config section: feature_engineering
[DEBUG] Current config keys: ['timeframes', 'columns_to_normalize', 'indicators', 'preprocessing', 'performance', 'validation']
[DEBUG] Processing config section: feature_engineering.indicators
[DEBUG] Current config keys: ['timeframes', 'common']
[DEBUG] Processing config section: feature_engineering.indicators.timeframes
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: feature_engineering.indicators.timeframes.5m
[DEBUG] Current config keys: ['momentum', 'trend', 'volatility', 'volume']
[DEBUG] Processing config section: feature_engineering.indicators.timeframes.1h
[DEBUG] Current config keys: ['momentum', 'trend', 'volatility', 'volume']
[DEBUG] Processing config section: feature_engineering.indicators.timeframes.4h
[DEBUG] Current config keys: ['momentum', 'trend', 'volatility', 'volume']
[DEBUG] Processing config section: feature_engineering.indicators.common
[DEBUG] Current config keys: ['bollinger', 'rsi', 'macd', 'atr', 'supertrend', 'psar']
[DEBUG] Processing config section: feature_engineering.indicators.common.bollinger
[DEBUG] Current config keys: ['window', 'window_dev']
[DEBUG] Processing config section: feature_engineering.indicators.common.rsi
[DEBUG] Current config keys: ['window']
[DEBUG] Processing config section: feature_engineering.indicators.common.macd
[DEBUG] Current config keys: ['fast', 'slow', 'signal']
[DEBUG] Processing config section: feature_engineering.indicators.common.atr
[DEBUG] Current config keys: ['window']
[DEBUG] Processing config section: feature_engineering.indicators.common.supertrend
[DEBUG] Current config keys: ['window', 'multiplier']
[DEBUG] Processing config section: feature_engineering.indicators.common.psar
[DEBUG] Current config keys: ['step', 'max_step']
[DEBUG] Processing config section: feature_engineering.preprocessing
[DEBUG] Current config keys: ['fillna', 'normalize', 'remove_outliers', 'min_data_points']
[DEBUG] Processing config section: feature_engineering.performance
[DEBUG] Current config keys: ['chunk_size', 'n_jobs', 'cache_indicators', 'parallel_timeframes']
[DEBUG] Processing config section: feature_engineering.validation
[DEBUG] Current config keys: ['check_nan_percentage', 'max_nan_percentage', 'check_feature_correlation', 'max_correlation_threshold']
[DEBUG] Processing config section: environment
[DEBUG] Current config keys: ['max_steps', 'initial_balance', 'commission', 'reward_scaling', 'window_size', 'features_config', 'max_chunks_per_episode', 'assets', 'observation', 'mode', 'base_currency', 'memory', 'risk_management', 'penalties']
[DEBUG] Processing config section: environment.features_config
[DEBUG] Current config keys: ['price', 'volume', 'indicators']
[DEBUG] Processing config section: environment.observation
[DEBUG] Current config keys: ['shape', 'window_sizes', 'warmup_steps', 'timeframes', 'features']
[DEBUG] Processing config section: environment.observation.window_sizes
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: environment.observation.features
[DEBUG] Current config keys: ['base', 'indicators', 'expected_features']
[DEBUG] Processing config section: environment.observation.features.indicators
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: environment.memory
[DEBUG] Current config keys: ['chunk_size', 'max_chunks_in_memory', 'aggressive_cleanup', 'force_gc_after_chunk', 'memory_warning_threshold_mb', 'memory_critical_threshold_mb', 'num_workers', 'pin_memory', 'batch_size', 'prefetch_factor', 'shuffle', 'drop_last', 'include_portfolio_state']
[DEBUG] Processing config section: environment.risk_management
[DEBUG] Current config keys: ['position_sizing']
[DEBUG] Processing config section: environment.risk_management.position_sizing
[DEBUG] Current config keys: ['max_position_size', 'initial_sl_pct', 'initial_tp_pct', 'initial_position_size', 'min_trade_value', 'max_risk_per_trade_pct', 'max_asset_allocation_pct', 'concentration_limits', 'take_profit', 'risk_parameters']
[DEBUG] Processing config section: environment.risk_management.position_sizing.concentration_limits
[DEBUG] Current config keys: ['BTCUSDT', 'ETHUSDT', 'SOLUSDT', 'XRPUSDT', 'ADAUSDT']
[DEBUG] Processing config section: environment.risk_management.position_sizing.take_profit
[DEBUG] Current config keys: ['enabled', 'risk_reward_ratio', 'trailing_enabled', 'trailing_deviation_pct']
[DEBUG] Processing config section: environment.risk_management.position_sizing.risk_parameters
[DEBUG] Current config keys: ['min_risk_level', 'max_risk_level', 'base_sl_pct', 'base_tp_pct', 'max_sl_pct', 'min_sl_pct', 'daily_loss_limit', 'weekly_loss_limit']
[DEBUG] Processing config section: environment.penalties
[DEBUG] Current config keys: ['invalid_action', 'order_rejection', 'inaction_freq_threshold', 'inaction_pnl_threshold', 'base_inaction_penalty']
[DEBUG] Processing config section: trading_rules
[DEBUG] Current config keys: ['futures_enabled', 'leverage', 'commission_pct', 'min_order_value_usdt', 'slippage_pct', 'stop_loss_pct', 'take_profit_pct', 'trailing_stop']
[DEBUG] Processing config section: agent
[DEBUG] Current config keys: ['algorithm', 'policy', 'learning_rate', 'n_steps', 'batch_size', 'n_epochs', 'gamma', 'gae_lambda', 'clip_range', 'clip_range_vf', 'ent_coef', 'vf_coef', 'max_grad_norm', 'target_kl', 'seed', 'verbose', 'deterministic_inference', 'custom_log_freq_rollouts', 'eval_freq', 'eval_episodes', 'checkpoint_freq', 'n_envs', 'buffer_size', 'window_size', 'features_extractor_kwargs', 'learning_rate_schedule', 'ent_coef_schedule']
[DEBUG] Processing config section: agent.features_extractor_kwargs
[DEBUG] Current config keys: ['cnn_configs', 'fc_layers', 'attention', 'normalization', 'initialization', 'dropout', 'activation', 'policy_kwargs', 'ppo']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.5m
[DEBUG] Current config keys: ['input_shape', 'channel_groups', 'groups']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.5m.groups
[DEBUG] Current config keys: ['price', 'volume', 'indicators']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.5m.groups.price
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.5m.groups.volume
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.5m.groups.indicators
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.1h
[DEBUG] Current config keys: ['input_shape', 'channel_groups', 'groups']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.1h.groups
[DEBUG] Current config keys: ['price', 'volume', 'indicators']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.1h.groups.price
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.1h.groups.volume
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.1h.groups.indicators
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.4h
[DEBUG] Current config keys: ['input_shape', 'channel_groups', 'groups', 'conv_blocks', 'activation', 'batch_norm', 'final_dropout', 'use_channel_attention', 'use_temporal_attention', 'temporal_attention_heads']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.4h.groups
[DEBUG] Current config keys: ['price', 'volume', 'indicators']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.4h.groups.price
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.4h.groups.volume
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.cnn_configs.4h.groups.indicators
[DEBUG] Current config keys: ['indices', 'out_channels', 'kernel_size', 'padding']
[DEBUG] Processing config section: agent.features_extractor_kwargs.attention
[DEBUG] Current config keys: ['num_heads', 'dropout', 'use_relative_positions']
[DEBUG] Processing config section: agent.features_extractor_kwargs.normalization
[DEBUG] Current config keys: ['use_batch_norm', 'use_layer_norm']
[DEBUG] Processing config section: agent.features_extractor_kwargs.initialization
[DEBUG] Current config keys: ['conv', 'dense', 'bias']
[DEBUG] Processing config section: agent.features_extractor_kwargs.policy_kwargs
[DEBUG] Current config keys: ['net_arch', 'activation_fn']
[DEBUG] Processing config section: agent.features_extractor_kwargs.policy_kwargs.net_arch
[DEBUG] Current config keys: ['shared', 'pi', 'vf']
[DEBUG] Processing config section: agent.features_extractor_kwargs.ppo
[DEBUG] Current config keys: ['n_steps', 'batch_size', 'n_epochs', 'gae_lambda', 'clip_range', 'clip_range_vf', 'ent_coef', 'vf_coef', 'max_grad_norm', 'normalize_advantage', 'use_sde', 'sde_sample_freq', 'use_reparameterization']
[DEBUG] Processing config section: agent.learning_rate_schedule
[DEBUG] Current config keys: ['type', 'start', 'end']
[DEBUG] Processing config section: agent.ent_coef_schedule
[DEBUG] Current config keys: ['type', 'start', 'end']
[DEBUG] Processing config section: data_processing
[DEBUG] Current config keys: ['max_lookahead', 'temporal_transforms']
[DEBUG] Processing config section: data_processing.temporal_transforms
[DEBUG] Current config keys: ['enabled', 'diffs', 'moving_averages', 'rolling_windows', 'rsi_window', 'macd_fast', 'macd_slow', 'macd_signal', 'bollinger_window', 'bollinger_std']
[DEBUG] Processing config section: data_augmentation
[DEBUG] Current config keys: ['enabled', 'time_warping', 'gaussian_noise', 'window_permutation', 'random_scaling', 'trend_augmentation', 'partial_shuffle', 'random_impulses', 'apply_order']
[DEBUG] Processing config section: data_augmentation.time_warping
[DEBUG] Current config keys: ['enabled', 'window', 'sigma', 'exclude_columns']
[DEBUG] Processing config section: data_augmentation.gaussian_noise
[DEBUG] Current config keys: ['enabled', 'std', 'exclude_columns']
[DEBUG] Processing config section: data_augmentation.window_permutation
[DEBUG] Current config keys: ['enabled', 'window_size', 'n_permutations', 'exclude_columns']
[DEBUG] Processing config section: data_augmentation.random_scaling
[DEBUG] Current config keys: ['enabled', 'scale_range', 'exclude_columns']
[DEBUG] Processing config section: data_augmentation.trend_augmentation
[DEBUG] Current config keys: ['enabled', 'max_trend', 'exclude_columns']
[DEBUG] Processing config section: data_augmentation.partial_shuffle
[DEBUG] Current config keys: ['enabled', 'segment_size', 'exclude_columns']
[DEBUG] Processing config section: data_augmentation.random_impulses
[DEBUG] Current config keys: ['enabled', 'probability', 'max_impulse', 'exclude_columns']
[DEBUG] Processing config section: regularization
[DEBUG] Current config keys: ['dropout_rate', 'use_batch_norm', 'batch_norm_momentum', 'batch_norm_epsilon', 'weight_decay', 'gradient_clip']
[DEBUG] Processing config section: training
[DEBUG] Current config keys: ['num_instances', 'timesteps_per_instance', 'batch_size', 'save_freq', 'checkpointing', 'progress_bar', 'use_custom_progress']
[DEBUG] Processing config section: training.checkpointing
[DEBUG] Current config keys: ['enabled', 'save_freq', 'model_name', 'save_path']
[DEBUG] Processing config section: risk_parameters
[DEBUG] Current config keys: ['base_sl_pct', 'base_tp_pct', 'max_sl_pct', 'min_sl_pct', 'min_tp_pct', 'max_tp_pct', 'drawdown_risk_multiplier', 'volatility_impact', 'volatility_sl_factor', 'winrate_tp_factor', 'max_drawdown_pct', 'min_risk_level', 'max_risk_level', 'risk_step', 'daily_loss_limit', 'weekly_loss_limit']
[DEBUG] Processing config section: dbe
[DEBUG] Current config keys: ['default_reset_capital', 'capital_tiers', 'market_regime_detection', 'regime_parameters', 'risk_management', 'take_profit', 'performance', 'logging', 'risk_parameters', 'position_sizing']
[DEBUG] Processing config section: dbe.market_regime_detection
[DEBUG] Current config keys: ['adx_threshold', 'rsi_overbought', 'rsi_oversold', 'ema_fast', 'ema_slow', 'atr_multiplier', 'macd_signal']
[DEBUG] Processing config section: dbe.regime_parameters
[DEBUG] Current config keys: ['bull', 'bear', 'volatile', 'sideways']
[DEBUG] Processing config section: dbe.regime_parameters.bull
[DEBUG] Current config keys: ['sl_multiplier', 'tp_multiplier', 'position_size_multiplier']
[DEBUG] Processing config section: dbe.regime_parameters.bear
[DEBUG] Current config keys: ['sl_multiplier', 'tp_multiplier', 'position_size_multiplier']
[DEBUG] Processing config section: dbe.regime_parameters.volatile
[DEBUG] Current config keys: ['sl_multiplier', 'tp_multiplier', 'position_size_multiplier']
[DEBUG] Processing config section: dbe.regime_parameters.sideways
[DEBUG] Current config keys: ['sl_multiplier', 'tp_multiplier', 'position_size_multiplier']
[DEBUG] Processing config section: dbe.risk_management
[DEBUG] Current config keys: ['min_trade_value', 'max_leverage', 'max_consecutive_losses']
[DEBUG] Processing config section: dbe.take_profit
[DEBUG] Current config keys: ['enabled', 'risk_reward_ratio', 'trailing_enabled', 'trailing_deviation_pct', 'volatility_adjustment', 'min_volatility', 'max_volatility', 'atr_period']
[DEBUG] Processing config section: dbe.performance
[DEBUG] Current config keys: ['lookback_window', 'min_trades_for_metrics', 'winrate_target', 'profit_factor_target', 'adaptation']
[DEBUG] Processing config section: dbe.performance.adaptation
[DEBUG] Current config keys: ['learning_rate', 'min_risk_level', 'max_risk_level', 'risk_increment', 'risk_decrement', 'use_dynamic_sizing', 'volatility_smoothing']
[DEBUG] Processing config section: dbe.logging
[DEBUG] Current config keys: ['level', 'save_trade_history', 'performance_metrics', 'save_interval']
[DEBUG] Processing config section: dbe.risk_parameters
[DEBUG] Current config keys: []
[DEBUG] Processing config section: dbe.position_sizing
[DEBUG] Current config keys: ['max_position_size', 'initial_sl_pct', 'initial_tp_pct', 'initial_position_size', 'min_trade_value', 'max_risk_per_trade_pct', 'max_asset_allocation_pct', 'concentration_limits', 'take_profit', 'risk_parameters']
[DEBUG] Processing config section: dbe.position_sizing.concentration_limits
[DEBUG] Current config keys: ['BTCUSDT', 'ETHUSDT', 'SOLUSDT', 'XRPUSDT', 'ADAUSDT']
[DEBUG] Processing config section: dbe.position_sizing.take_profit
[DEBUG] Current config keys: ['enabled', 'risk_reward_ratio', 'trailing_enabled', 'trailing_deviation_pct']
[DEBUG] Processing config section: dbe.position_sizing.risk_parameters
[DEBUG] Current config keys: ['min_risk_level', 'max_risk_level', 'base_sl_pct', 'base_tp_pct', 'max_sl_pct', 'min_sl_pct', 'daily_loss_limit', 'weekly_loss_limit']
[DEBUG] Processing config section: reward_shaping
[DEBUG] Current config keys: ['risk_factor', 'volatility_factor', 'drawdown_penalty', 'sharpe_factor', 'position_reward', 'commission_reward', 'slippage_reward', 'profit_factor_bonus', 'risk_reward_ratio', 'max_position_size', 'max_order_size', 'min_order_value_usdt', 'commission_pct', 'commission_penalty', 'min_profit_multiplier', 'slippage_pct', 'dbe', 'tier_rewards', 'logging']
[DEBUG] Processing config section: reward_shaping.dbe
[DEBUG] Current config keys: ['initial_risk', 'min_risk', 'max_risk', 'winrate_decay', 'drawdown_impact', 'cash_utilization_impact']
[DEBUG] Processing config section: reward_shaping.tier_rewards
[DEBUG] Current config keys: ['promotion_bonus', 'demotion_penalty', 'checkpoint_on_promotion', 'checkpoint_dir', 'min_episodes_for_promotion', 'min_profit_for_promotion', 'tier_performance_multipliers']
[DEBUG] Processing config section: reward_shaping.logging
[DEBUG] Current config keys: ['version', 'disable_existing_loggers', 'log_dirs', 'formatters', 'handlers', 'loggers', 'root']
[DEBUG] Processing config section: reward_shaping.logging.log_dirs
[DEBUG] Current config keys: ['base', 'dbe_replay', 'metrics', 'models', 'performance', 'data_quality', 'memory']
[DEBUG] Processing config section: reward_shaping.logging.formatters
[DEBUG] Current config keys: ['standard', 'detailed', 'json']
[DEBUG] Processing config section: reward_shaping.logging.formatters.standard
[DEBUG] Current config keys: ['format', 'datefmt']
[DEBUG] Processing config section: reward_shaping.logging.formatters.detailed
[DEBUG] Current config keys: ['format', 'datefmt']
[DEBUG] Processing config section: reward_shaping.logging.formatters.json
[DEBUG] Current config keys: ['class', 'format', 'datefmt']
[DEBUG] Processing config section: reward_shaping.logging.handlers
[DEBUG] Current config keys: ['console', 'file_handler', 'error_file_handler', 'json_file_handler']
[DEBUG] Processing config section: reward_shaping.logging.handlers.console
[DEBUG] Current config keys: ['class', 'level', 'formatter', 'stream']
[DEBUG] Processing config section: reward_shaping.logging.handlers.file_handler
[DEBUG] Current config keys: ['class', 'level', 'formatter', 'filename', 'when', 'backupCount', 'encoding', 'utc']
[DEBUG] Processing config section: reward_shaping.logging.handlers.error_file_handler
[DEBUG] Current config keys: ['class', 'level', 'formatter', 'filename', 'maxBytes', 'backupCount', 'encoding']
[DEBUG] Processing config section: reward_shaping.logging.handlers.json_file_handler
[DEBUG] Current config keys: ['class', 'level', 'formatter', 'filename', 'maxBytes', 'backupCount', 'encoding']
[DEBUG] Processing config section: reward_shaping.logging.loggers
[DEBUG] Current config keys: ['', 'adan', 'tensorflow', 'stable_baselines3', 'urllib3', 'pyarrow']
[DEBUG] Processing config section: reward_shaping.logging.loggers.
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Processing config section: reward_shaping.logging.loggers.adan
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Processing config section: reward_shaping.logging.loggers.tensorflow
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Processing config section: reward_shaping.logging.loggers.stable_baselines3
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Processing config section: reward_shaping.logging.loggers.urllib3
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Processing config section: reward_shaping.logging.loggers.pyarrow
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Processing config section: reward_shaping.logging.root
[DEBUG] Current config keys: ['level', 'handlers', 'propagate']
[DEBUG] Starting resolution of environment variables
[DEBUG] Processing config section: root2025-09-12 05:40:24 - adan_trading_bot.data_processing.data_loader - INFO - Total chunks disponibles: 10
2025-09-12 05:40:24,387 - adan_trading_bot.data_processing.data_loader - INFO - Total chunks disponibles: 10
2025-09-12 05:40:24 - adan_trading_bot.data_processing.data_loader - INFO - Initialisation du ChunkedDataLoader avec 1 actifs et 3 timeframes
2025-09-12 05:40:24,387 - adan_trading_bot.data_processing.data_loader - INFO - Initialisation du ChunkedDataLoader avec 1 actifs et 3 timeframes
2025-09-12 05:40:24 - adan_trading_bot.data_processing.data_loader - INFO - Chargement des données pour 1 actifs et 3 timeframes en parallèle (max 8 workers)
2025-09-12 05:40:24,387 - adan_trading_bot.data_processing.data_loader - INFO - Chargement des données pour 1 actifs et 3 timeframes en parallèle (max 8 workers)
2025-09-12 05:40:24 - adan_trading_bot.portfolio.portfolio_manager - INFO - 5 paliers de capital chargés avec succès: Micro Capital (11.0+), Small Capital (30.0+), Medium Capital (100.0+), High Capital (300.0+), Enterprise (1000.0+)
2025-09-12 05:40:24,388 - adan_trading_bot.portfolio.portfolio_manager - INFO - 5 paliers de capital chargés avec succès: Micro Capital (11.0+), Small Capital (30.0+), Medium Capital (100.0+), High Capital (300.0+), Enterprise (1000.0+)
2025-09-12 05:40:24 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Performing full reset (reason: new_epoch=True, capital=$0.00, threshold=$11.00)
2025-09-12 05:40:24,388 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Performing full reset (reason: new_epoch=True, capital=$0.00, threshold=$11.00)
2025-09-12 05:40:24 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Portefeuille réinitialisé au capital initial: 20.50
2025-09-12 05:40:24,388 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Portefeuille réinitialisé au capital initial: 20.50
2025-09-12 05:40:24,388 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Configuration de la fenêtre pour 5m: 20 périodes
2025-09-12 05:40:24,388 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Configuration de la fenêtre pour 1h: 20 périodes
2025-09-12 05:40:24,388 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Configuration de la fenêtre pour 4h: 20 périodes
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - === Configuration des caractéristiques par timeframe ===
2025-09-12 05:40:24,388 - adan_trading_bot.data_processing.state_builder - INFO - === Configuration des caractéristiques par timeframe ===
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Timeframe 5m: 15 features - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:24,388 - adan_trading_bot.data_processing.state_builder - INFO - Timeframe 5m: 15 features - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Timeframe 1h: 15 features - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:24,388 - adan_trading_bot.data_processing.state_builder - INFO - Timeframe 1h: 15 features - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Timeframe 4h: 15 features - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:24,388 - adan_trading_bot.data_processing.state_builder - INFO - Timeframe 4h: 15 features - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités pour 5m: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:24,388 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités pour 5m: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités pour 1h: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:24,388 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités pour 1h: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités pour 4h: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:24,388 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités pour 4h: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Initialized scalers for timeframes: ['5m', '1h', '4h']
2025-09-12 05:40:24,553 - adan_trading_bot.data_processing.state_builder - INFO - Initialized scalers for timeframes: ['5m', '1h', '4h']
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Scaler initialized for timeframe 5m: minmax with params: {'scaler_type': 'minmax', 'feature_range': (0, 1)}
2025-09-12 05:40:24,553 - adan_trading_bot.data_processing.state_builder - INFO - Scaler initialized for timeframe 5m: minmax with params: {'scaler_type': 'minmax', 'feature_range': (0, 1)}
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Scaler initialized for timeframe 1h: standard with params: {'scaler_type': 'standard'}
2025-09-12 05:40:24,553 - adan_trading_bot.data_processing.state_builder - INFO - Scaler initialized for timeframe 1h: standard with params: {'scaler_type': 'standard'}
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Scaler initialized for timeframe 4h: robust with params: {'scaler_type': 'robust'}
2025-09-12 05:40:24,553 - adan_trading_bot.data_processing.state_builder - INFO - Scaler initialized for timeframe 4h: robust with params: {'scaler_type': 'robust'}
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Observation dimensions - Market: 900 + Portfolio: 17 = Total: 917
2025-09-12 05:40:24,553 - adan_trading_bot.data_processing.state_builder - INFO - Observation dimensions - Market: 900 + Portfolio: 17 = Total: 917
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - StateBuilder initialized. Target flattened observation size: 917
2025-09-12 05:40:24,553 - adan_trading_bot.data_processing.state_builder - INFO - StateBuilder initialized. Target flattened observation size: 917
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Features per timeframe: {'5m': 15, '1h': 15, '4h': 15}
2025-09-12 05:40:24,554 - adan_trading_bot.data_processing.state_builder - INFO - Features per timeframe: {'5m': 15, '1h': 15, '4h': 15}
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - StateBuilder initialized with base_window_size=20, adaptive_window=True, timeframes=['5m', '1h', '4h'], features_per_timeframe={self.nb_features_per_tf}
2025-09-12 05:40:24,554 - adan_trading_bot.data_processing.state_builder - INFO - StateBuilder initialized with base_window_size=20, adaptive_window=True, timeframes=['5m', '1h', '4h'], features_per_timeframe={self.nb_features_per_tf}
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Configuration du timeframe 5m: fenêtre=20, features=15
2025-09-12 05:40:24,554 - adan_trading_bot.data_processing.state_builder - INFO - Configuration du timeframe 5m: fenêtre=20, features=15
2025-09-12 05:40:24,554 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Configuration appliquée pour 5m: fenêtre=20, features=15
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Configuration du timeframe 1h: fenêtre=20, features=15
2025-09-12 05:40:24,554 - adan_trading_bot.data_processing.state_builder - INFO - Configuration du timeframe 1h: fenêtre=20, features=15
2025-09-12 05:40:24,554 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Configuration appliquée pour 1h: fenêtre=20, features=15
2025-09-12 05:40:24 - adan_trading_bot.data_processing.state_builder - INFO - Configuration du timeframe 4h: fenêtre=20, features=15
2025-09-12 05:40:24,554 - adan_trading_bot.data_processing.state_builder - INFO - Configuration du timeframe 4h: fenêtre=20, features=15
2025-09-12 05:40:24,554 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Configuration appliquée pour 4h: fenêtre=20, features=15
2025-09-12 05:40:24,555 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Using fixed observation shape: (3, 20, 15)
2025-09-12 05:40:24,555 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Portfolio state dimension: 17
2025-09-12 05:40:24,556 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation space configured: Dict('observation': Box(-inf, inf, (3, 20, 15), float32), 'portfolio_state': Box(-inf, inf, (17,), float32))
2025-09-12 05:40:24,556 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - DynamicBehaviorEngine initialisé avec succès
2025-09-12 05:40:24,556 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Initialized max_steps to 500000 and max_chunks_per_episode to 10
2025-09-12 05:40:24,556 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Chunk configuration - Total chunks: 10, Max chunks per episode: 10
2025-09-12 05:40:24,556 - root - INFO - OrderManager initialized.
2025-09-12 05:40:24 - adan_trading_bot.common.reward_logger - INFO - RewardLogger initialized with base path: logs/rewards
2025-09-12 05:40:24,557 - adan_trading_bot.common.reward_logger - INFO - RewardLogger initialized with base path: logs/rewards
2025-09-12 05:40:24 - adan_trading_bot.environment.reward_calculator - INFO - RewardCalculator initialized with multi-objective optimization and detailed logging.
2025-09-12 05:40:24,557 - adan_trading_bot.environment.reward_calculator - INFO - RewardCalculator initialized with multi-objective optimization and detailed logging.
2025-09-12 05:40:24,558 - __main__ - INFO - Environnement 3 créé avec succès
2025-09-12 05:40:24,558 - __main__ - INFO - [WORKER-3] Environnement 3 initialisé avec succès
2025-09-12 05:40:24,558 - __main__ - INFO - Environnement vectorisé créé avec succès: <stable_baselines3.common.vec_env.dummy_vec_env.DummyVecEnv object at 0x7f05ef919350>
2025-09-12 05:40:24,559 - __main__ - INFO - Environnement vectorisé créé avec 4 environnements
2025-09-12 05:40:24,559 - __main__ - INFO - Espace d'observation de l'environnement: Dict('observation': Box(-inf, inf, (3, 20, 15), float32), 'portfolio_state': Box(-inf, inf, (17,), float32))
2025-09-12 05:40:24,559 - __main__ - INFO - 
================================================================================
2025-09-12 05:40:24,559 - __main__ - INFO - Configuration de l'entraînement:
2025-09-12 05:40:24,559 - __main__ - INFO - - Nombre d'environnements parallèles: 4
2025-09-12 05:40:24,559 - __main__ - INFO - - Type d'environnement: DummyVecEnv
2025-09-12 05:40:24,559 - __main__ - INFO - - Seed de base: 42
2025-09-12 05:40:24,559 - __main__ - INFO - - Device: auto
2025-09-12 05:40:24,559 - __main__ - INFO - ================================================================================

2025-09-12 05:40:24,559 - __main__ - INFO - Création d'un nouveau modèle

[DEBUG] Current config keys: ['rank', 'worker_id', 'log_prefix', 'num_workers', 'assets', 'timeframes', 'chunk_sizes', 'data_loader', 'use_subproc', 'data_split_override']
[DEBUG] Processing config section: chunk_sizes
[DEBUG] Current config keys: ['5m', '1h', '4h']
[DEBUG] Processing config section: data_loader
[DEBUG] Current config keys: ['batch_size', 'shuffle', 'num_workers']
Using cpu device
Logging to bot/config/logs/sb3
2025-09-12 05:40:26,186 - __main__ - INFO - SB3 logger configured at bot/config/logs/sb3
2025-09-12 05:40:26,186 - __main__ - INFO - [TRAINING] Démarrage d'un nouvel entraînement (sans reprise)
2025-09-12 05:40:26,186 - __main__ - INFO - [TRAINING] Barre de progression personnalisée activée pour le suivi de l'entraînement
2025-09-12 05:40:26,186 - __main__ - INFO - [TRAINING] 2 callback(s) configuré(s) pour l'entraînement
2025-09-12 05:40:26,186 - __main__ - INFO - [TRAINING] Démarrage de l'entraînement pour 1000000 étapes supplémentaires...
2025-09-12 05:40:26 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Performing full reset (reason: new_epoch=True, capital=$20.50, threshold=$11.00)
2025-09-12 05:40:26,187 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Performing full reset (reason: new_epoch=True, capital=$20.50, threshold=$11.00)
2025-09-12 05:40:26 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Portefeuille réinitialisé au capital initial: 20.50
2025-09-12 05:40:26,187 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Portefeuille réinitialisé au capital initial: 20.50
2025-09-12 05:40:26,189 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:26,189 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 71.51it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 69.51it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 39.20it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 39.07it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:26 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.08 secondes
2025-09-12 05:40:26,270 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.08 secondes
2025-09-12 05:40:26,270 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:26,270 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:26,270 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:26,270 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 86.32it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 137.12it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 53.39it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 53.14it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:26 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:26,329 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:26,330 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Construction de l'observation (premier appel) ===
2025-09-12 05:40:26,330 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Construction de l'observation (premier appel) ===
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0
2025-09-12 05:40:26,330 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Timeframes disponibles: ['4h', '1h', '5m']
2025-09-12 05:40:26,330 - adan_trading_bot.data_processing.state_builder - INFO - Timeframes disponibles: ['4h', '1h', '5m']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Nombre maximum de fonctionnalités configurées: 15
2025-09-12 05:40:26,330 - adan_trading_bot.data_processing.state_builder - INFO - Nombre maximum de fonctionnalités configurées: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités par timeframe:
2025-09-12 05:40:26,330 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités par timeframe:
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO -   - 5m: 15 fonctionnalités - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26,330 - adan_trading_bot.data_processing.state_builder - INFO -   - 5m: 15 fonctionnalités - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO -   - 1h: 15 fonctionnalités - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26,330 - adan_trading_bot.data_processing.state_builder - INFO -   - 1h: 15 fonctionnalités - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO -   - 4h: 15 fonctionnalités - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26,330 - adan_trading_bot.data_processing.state_builder - INFO -   - 4h: 15 fonctionnalités - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
--- Traitement du timeframe: 5m ---
2025-09-12 05:40:26,330 - adan_trading_bot.data_processing.state_builder - INFO - 
--- Traitement du timeframe: 5m ---
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Traitement du timeframe 5m ===
2025-09-12 05:40:26,331 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Traitement du timeframe 5m ===
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0, Taille max des caractéristiques: 15
2025-09-12 05:40:26,331 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0, Taille max des caractéristiques: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Caractéristiques attendues pour 5m (15): ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26,331 - adan_trading_bot.data_processing.state_builder - INFO - Caractéristiques attendues pour 5m (15): ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - WARNING - Aucune colonne 'timestamp' (insensible à la casse) trouvée dans les données
2025-09-12 05:40:26,332 - adan_trading_bot.data_processing.state_builder - WARNING - Aucune colonne 'timestamp' (insensible à la casse) trouvée dans les données
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Création du DataFrame traité avec les colonnes attendues
2025-09-12 05:40:26,332 - adan_trading_bot.data_processing.state_builder - INFO - Création du DataFrame traité avec les colonnes attendues
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes attendues: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26,332 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes attendues: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes disponibles dans les données: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'CCI_20', 'ROC_9', 'MFI_14', 'EMA_5', 'EMA_20', 'SUPERTREND_14_2.0', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'VWAP', 'OBV', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26,332 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes disponibles dans les données: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'CCI_20', 'ROC_9', 'MFI_14', 'EMA_5', 'EMA_20', 'SUPERTREND_14_2.0', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'VWAP', 'OBV', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes ajoutées au DataFrame traité: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26,344 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes ajoutées au DataFrame traité: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Nombre de colonnes dans le DataFrame traité: 15
2025-09-12 05:40:26,344 - adan_trading_bot.data_processing.state_builder - INFO - Nombre de colonnes dans le DataFrame traité: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes actuelles: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26,344 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes actuelles: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:26,344 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:26,345 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 5m: shape=(20, 15), type=ndarray
2025-09-12 05:40:26,345 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 5m: shape=(20, 15), type=ndarray
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 5m: shape=(20, 15), type=ndarray
2025-09-12 05:40:26,345 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 5m: shape=(20, 15), type=ndarray
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
--- Traitement du timeframe: 1h ---
2025-09-12 05:40:26,345 - adan_trading_bot.data_processing.state_builder - INFO - 
--- Traitement du timeframe: 1h ---
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Traitement du timeframe 1h ===
2025-09-12 05:40:26,345 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Traitement du timeframe 1h ===
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0, Taille max des caractéristiques: 15
2025-09-12 05:40:26,345 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0, Taille max des caractéristiques: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Caractéristiques attendues pour 1h (15): ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26,345 - adan_trading_bot.data_processing.state_builder - INFO - Caractéristiques attendues pour 1h (15): ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - WARNING - Aucune colonne 'timestamp' (insensible à la casse) trouvée dans les données
2025-09-12 05:40:26,346 - adan_trading_bot.data_processing.state_builder - WARNING - Aucune colonne 'timestamp' (insensible à la casse) trouvée dans les données
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Création du DataFrame traité avec les colonnes attendues
2025-09-12 05:40:26,346 - adan_trading_bot.data_processing.state_builder - INFO - Création du DataFrame traité avec les colonnes attendues
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes attendues: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26,346 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes attendues: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes disponibles dans les données: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD', 'MACD_SIGNAL', 'MACD_HIST', 'CCI_20', 'MFI_14', 'EMA_50', 'EMA_100', 'SMA_200', 'ICHIMOKU_TENKAN', 'ICHIMOKU_KIJUN', 'ICHIMOKU_SENKOU_A', 'ICHIMOKU_SENKOU_B', 'ICHIMOKU_CHIKOU', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'OBV', 'VWAP', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26,346 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes disponibles dans les données: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD', 'MACD_SIGNAL', 'MACD_HIST', 'CCI_20', 'MFI_14', 'EMA_50', 'EMA_100', 'SMA_200', 'ICHIMOKU_TENKAN', 'ICHIMOKU_KIJUN', 'ICHIMOKU_SENKOU_A', 'ICHIMOKU_SENKOU_B', 'ICHIMOKU_CHIKOU', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'OBV', 'VWAP', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes ajoutées au DataFrame traité: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26,356 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes ajoutées au DataFrame traité: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Nombre de colonnes dans le DataFrame traité: 15
2025-09-12 05:40:26,356 - adan_trading_bot.data_processing.state_builder - INFO - Nombre de colonnes dans le DataFrame traité: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes actuelles: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26,356 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes actuelles: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:26,356 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:26,357 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 1h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26,357 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 1h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 1h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26,357 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 1h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
--- Traitement du timeframe: 4h ---
2025-09-12 05:40:26,357 - adan_trading_bot.data_processing.state_builder - INFO - 
--- Traitement du timeframe: 4h ---
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Traitement du timeframe 4h ===
2025-09-12 05:40:26,357 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Traitement du timeframe 4h ===
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0, Taille max des caractéristiques: 15
2025-09-12 05:40:26,357 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0, Taille max des caractéristiques: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Caractéristiques attendues pour 4h (15): ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26,357 - adan_trading_bot.data_processing.state_builder - INFO - Caractéristiques attendues pour 4h (15): ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - WARNING - Aucune colonne 'timestamp' (insensible à la casse) trouvée dans les données
2025-09-12 05:40:26,358 - adan_trading_bot.data_processing.state_builder - WARNING - Aucune colonne 'timestamp' (insensible à la casse) trouvée dans les données
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Création du DataFrame traité avec les colonnes attendues
2025-09-12 05:40:26,358 - adan_trading_bot.data_processing.state_builder - INFO - Création du DataFrame traité avec les colonnes attendues
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes attendues: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26,358 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes attendues: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes disponibles dans les données: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD', 'MACD_SIGNAL', 'CCI_20', 'MFI_14', 'SMA_200', 'EMA_50', 'ICHIMOKU_TENKAN', 'ICHIMOKU_KIJUN', 'ICHIMOKU_SENKOU_A', 'ICHIMOKU_SENKOU_B', 'ICHIMOKU_CHIKOU', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'OBV', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26,358 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes disponibles dans les données: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD', 'MACD_SIGNAL', 'CCI_20', 'MFI_14', 'SMA_200', 'EMA_50', 'ICHIMOKU_TENKAN', 'ICHIMOKU_KIJUN', 'ICHIMOKU_SENKOU_A', 'ICHIMOKU_SENKOU_B', 'ICHIMOKU_CHIKOU', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'OBV', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes ajoutées au DataFrame traité: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26,367 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes ajoutées au DataFrame traité: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Nombre de colonnes dans le DataFrame traité: 15
2025-09-12 05:40:26,367 - adan_trading_bot.data_processing.state_builder - INFO - Nombre de colonnes dans le DataFrame traité: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes actuelles: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26,367 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes actuelles: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:26,367 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:26,368 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 4h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26,368 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 4h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 4h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26,368 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 4h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Alignement des observations ===
2025-09-12 05:40:26,368 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Alignement des observations ===
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Timeframes à aligner: ['5m', '1h', '4h']
2025-09-12 05:40:26,368 - adan_trading_bot.data_processing.state_builder - INFO - Timeframes à aligner: ['5m', '1h', '4h']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Forme de l'observation alignée: (3, 20, 15)
2025-09-12 05:40:26,368 - adan_trading_bot.data_processing.state_builder - INFO - Forme de l'observation alignée: (3, 20, 15)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Forme attendue: (3, 20, 15)
2025-09-12 05:40:26,369 - adan_trading_bot.data_processing.state_builder - INFO - Forme attendue: (3, 20, 15)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Vérification finale de l'observation ===
2025-09-12 05:40:26,369 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Vérification finale de l'observation ===
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Forme de l'observation: (3, 20, 15)
2025-09-12 05:40:26,369 - adan_trading_bot.data_processing.state_builder - INFO - Forme de l'observation: (3, 20, 15)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Type de l'observation: <class 'numpy.ndarray'>
2025-09-12 05:40:26,369 - adan_trading_bot.data_processing.state_builder - INFO - Type de l'observation: <class 'numpy.ndarray'>
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Forme de l'état du portefeuille: (17,)
2025-09-12 05:40:26,369 - adan_trading_bot.data_processing.state_builder - INFO - Forme de l'état du portefeuille: (17,)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:26,369 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:26,369 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:26,369 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:26 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Performing full reset (reason: new_epoch=True, capital=$20.50, threshold=$11.00)
2025-09-12 05:40:26,370 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Performing full reset (reason: new_epoch=True, capital=$20.50, threshold=$11.00)
2025-09-12 05:40:26 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Portefeuille réinitialisé au capital initial: 20.50
2025-09-12 05:40:26,370 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Portefeuille réinitialisé au capital initial: 20.50
2025-09-12 05:40:26,370 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:26,370 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 68.88it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 134.14it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 52.86it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 52.65it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:26 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:26,429 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:26,430 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:26,430 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:26,430 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:26,430 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 74.80it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 125.72it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 51.13it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 50.90it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:26 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:26,491 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:26,491 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Construction de l'observation (premier appel) ===
2025-09-12 05:40:26,492 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Construction de l'observation (premier appel) ===
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0
2025-09-12 05:40:26,492 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Timeframes disponibles: ['4h', '1h', '5m']
2025-09-12 05:40:26,492 - adan_trading_bot.data_processing.state_builder - INFO - Timeframes disponibles: ['4h', '1h', '5m']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Nombre maximum de fonctionnalités configurées: 15
2025-09-12 05:40:26,492 - adan_trading_bot.data_processing.state_builder - INFO - Nombre maximum de fonctionnalités configurées: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités par timeframe:
2025-09-12 05:40:26,492 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités par timeframe:
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO -   - 5m: 15 fonctionnalités - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26,492 - adan_trading_bot.data_processing.state_builder - INFO -   - 5m: 15 fonctionnalités - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO -   - 1h: 15 fonctionnalités - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26,492 - adan_trading_bot.data_processing.state_builder - INFO -   - 1h: 15 fonctionnalités - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO -   - 4h: 15 fonctionnalités - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26,492 - adan_trading_bot.data_processing.state_builder - INFO -   - 4h: 15 fonctionnalités - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
--- Traitement du timeframe: 5m ---
2025-09-12 05:40:26,492 - adan_trading_bot.data_processing.state_builder - INFO - 
--- Traitement du timeframe: 5m ---
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Traitement du timeframe 5m ===
2025-09-12 05:40:26,492 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Traitement du timeframe 5m ===
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0, Taille max des caractéristiques: 15
2025-09-12 05:40:26,492 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0, Taille max des caractéristiques: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Caractéristiques attendues pour 5m (15): ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26,492 - adan_trading_bot.data_processing.state_builder - INFO - Caractéristiques attendues pour 5m (15): ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - WARNING - Aucune colonne 'timestamp' (insensible à la casse) trouvée dans les données
2025-09-12 05:40:26,493 - adan_trading_bot.data_processing.state_builder - WARNING - Aucune colonne 'timestamp' (insensible à la casse) trouvée dans les données
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Création du DataFrame traité avec les colonnes attendues
2025-09-12 05:40:26,493 - adan_trading_bot.data_processing.state_builder - INFO - Création du DataFrame traité avec les colonnes attendues
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes attendues: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26,493 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes attendues: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes disponibles dans les données: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'CCI_20', 'ROC_9', 'MFI_14', 'EMA_5', 'EMA_20', 'SUPERTREND_14_2.0', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'VWAP', 'OBV', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26,493 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes disponibles dans les données: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'CCI_20', 'ROC_9', 'MFI_14', 'EMA_5', 'EMA_20', 'SUPERTREND_14_2.0', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'VWAP', 'OBV', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes ajoutées au DataFrame traité: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26,504 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes ajoutées au DataFrame traité: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Nombre de colonnes dans le DataFrame traité: 15
2025-09-12 05:40:26,504 - adan_trading_bot.data_processing.state_builder - INFO - Nombre de colonnes dans le DataFrame traité: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes actuelles: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26,504 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes actuelles: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:26,504 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:26,505 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 5m: shape=(20, 15), type=ndarray
2025-09-12 05:40:26,505 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 5m: shape=(20, 15), type=ndarray
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 5m: shape=(20, 15), type=ndarray
2025-09-12 05:40:26,505 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 5m: shape=(20, 15), type=ndarray
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
--- Traitement du timeframe: 1h ---
2025-09-12 05:40:26,505 - adan_trading_bot.data_processing.state_builder - INFO - 
--- Traitement du timeframe: 1h ---
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Traitement du timeframe 1h ===
2025-09-12 05:40:26,505 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Traitement du timeframe 1h ===
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0, Taille max des caractéristiques: 15
2025-09-12 05:40:26,505 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0, Taille max des caractéristiques: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Caractéristiques attendues pour 1h (15): ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26,505 - adan_trading_bot.data_processing.state_builder - INFO - Caractéristiques attendues pour 1h (15): ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - WARNING - Aucune colonne 'timestamp' (insensible à la casse) trouvée dans les données
2025-09-12 05:40:26,506 - adan_trading_bot.data_processing.state_builder - WARNING - Aucune colonne 'timestamp' (insensible à la casse) trouvée dans les données
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Création du DataFrame traité avec les colonnes attendues
2025-09-12 05:40:26,506 - adan_trading_bot.data_processing.state_builder - INFO - Création du DataFrame traité avec les colonnes attendues
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes attendues: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26,506 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes attendues: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes disponibles dans les données: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD', 'MACD_SIGNAL', 'MACD_HIST', 'CCI_20', 'MFI_14', 'EMA_50', 'EMA_100', 'SMA_200', 'ICHIMOKU_TENKAN', 'ICHIMOKU_KIJUN', 'ICHIMOKU_SENKOU_A', 'ICHIMOKU_SENKOU_B', 'ICHIMOKU_CHIKOU', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'OBV', 'VWAP', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26,506 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes disponibles dans les données: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD', 'MACD_SIGNAL', 'MACD_HIST', 'CCI_20', 'MFI_14', 'EMA_50', 'EMA_100', 'SMA_200', 'ICHIMOKU_TENKAN', 'ICHIMOKU_KIJUN', 'ICHIMOKU_SENKOU_A', 'ICHIMOKU_SENKOU_B', 'ICHIMOKU_CHIKOU', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'OBV', 'VWAP', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes ajoutées au DataFrame traité: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26,516 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes ajoutées au DataFrame traité: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Nombre de colonnes dans le DataFrame traité: 15
2025-09-12 05:40:26,516 - adan_trading_bot.data_processing.state_builder - INFO - Nombre de colonnes dans le DataFrame traité: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes actuelles: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26,516 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes actuelles: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:26,516 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:26,516 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 1h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26,516 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 1h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 1h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26,517 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 1h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
--- Traitement du timeframe: 4h ---
2025-09-12 05:40:26,517 - adan_trading_bot.data_processing.state_builder - INFO - 
--- Traitement du timeframe: 4h ---
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Traitement du timeframe 4h ===
2025-09-12 05:40:26,517 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Traitement du timeframe 4h ===
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0, Taille max des caractéristiques: 15
2025-09-12 05:40:26,517 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0, Taille max des caractéristiques: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Caractéristiques attendues pour 4h (15): ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26,517 - adan_trading_bot.data_processing.state_builder - INFO - Caractéristiques attendues pour 4h (15): ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - WARNING - Aucune colonne 'timestamp' (insensible à la casse) trouvée dans les données
2025-09-12 05:40:26,517 - adan_trading_bot.data_processing.state_builder - WARNING - Aucune colonne 'timestamp' (insensible à la casse) trouvée dans les données
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Création du DataFrame traité avec les colonnes attendues
2025-09-12 05:40:26,517 - adan_trading_bot.data_processing.state_builder - INFO - Création du DataFrame traité avec les colonnes attendues
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes attendues: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26,517 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes attendues: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes disponibles dans les données: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD', 'MACD_SIGNAL', 'CCI_20', 'MFI_14', 'SMA_200', 'EMA_50', 'ICHIMOKU_TENKAN', 'ICHIMOKU_KIJUN', 'ICHIMOKU_SENKOU_A', 'ICHIMOKU_SENKOU_B', 'ICHIMOKU_CHIKOU', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'OBV', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26,517 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes disponibles dans les données: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD', 'MACD_SIGNAL', 'CCI_20', 'MFI_14', 'SMA_200', 'EMA_50', 'ICHIMOKU_TENKAN', 'ICHIMOKU_KIJUN', 'ICHIMOKU_SENKOU_A', 'ICHIMOKU_SENKOU_B', 'ICHIMOKU_CHIKOU', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'OBV', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes ajoutées au DataFrame traité: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26,527 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes ajoutées au DataFrame traité: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Nombre de colonnes dans le DataFrame traité: 15
2025-09-12 05:40:26,527 - adan_trading_bot.data_processing.state_builder - INFO - Nombre de colonnes dans le DataFrame traité: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes actuelles: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26,527 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes actuelles: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:26,527 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:26,527 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 4h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26,527 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 4h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 4h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26,528 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 4h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Alignement des observations ===
2025-09-12 05:40:26,528 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Alignement des observations ===
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Timeframes à aligner: ['5m', '1h', '4h']
2025-09-12 05:40:26,528 - adan_trading_bot.data_processing.state_builder - INFO - Timeframes à aligner: ['5m', '1h', '4h']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Forme de l'observation alignée: (3, 20, 15)
2025-09-12 05:40:26,528 - adan_trading_bot.data_processing.state_builder - INFO - Forme de l'observation alignée: (3, 20, 15)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Forme attendue: (3, 20, 15)
2025-09-12 05:40:26,528 - adan_trading_bot.data_processing.state_builder - INFO - Forme attendue: (3, 20, 15)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Vérification finale de l'observation ===
2025-09-12 05:40:26,528 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Vérification finale de l'observation ===
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Forme de l'observation: (3, 20, 15)
2025-09-12 05:40:26,528 - adan_trading_bot.data_processing.state_builder - INFO - Forme de l'observation: (3, 20, 15)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Type de l'observation: <class 'numpy.ndarray'>
2025-09-12 05:40:26,528 - adan_trading_bot.data_processing.state_builder - INFO - Type de l'observation: <class 'numpy.ndarray'>
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Forme de l'état du portefeuille: (17,)
2025-09-12 05:40:26,528 - adan_trading_bot.data_processing.state_builder - INFO - Forme de l'état du portefeuille: (17,)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:26,528 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:26,528 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:26,529 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:26 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Performing full reset (reason: new_epoch=True, capital=$20.50, threshold=$11.00)
2025-09-12 05:40:26,529 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Performing full reset (reason: new_epoch=True, capital=$20.50, threshold=$11.00)
2025-09-12 05:40:26 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Portefeuille réinitialisé au capital initial: 20.50
2025-09-12 05:40:26,529 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Portefeuille réinitialisé au capital initial: 20.50
2025-09-12 05:40:26,529 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:26,529 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 79.12it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 101.56it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.91it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.64it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:26 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:26,583 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:26,583 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:26,583 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:26,583 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:26,583 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 52.74it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 79.50it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 72.46it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 72.05it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:26 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.04 secondes
2025-09-12 05:40:26,627 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.04 secondes
2025-09-12 05:40:26,627 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Construction de l'observation (premier appel) ===
2025-09-12 05:40:26,627 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Construction de l'observation (premier appel) ===
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0
2025-09-12 05:40:26,627 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Timeframes disponibles: ['4h', '1h', '5m']
2025-09-12 05:40:26,628 - adan_trading_bot.data_processing.state_builder - INFO - Timeframes disponibles: ['4h', '1h', '5m']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Nombre maximum de fonctionnalités configurées: 15
2025-09-12 05:40:26,628 - adan_trading_bot.data_processing.state_builder - INFO - Nombre maximum de fonctionnalités configurées: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités par timeframe:
2025-09-12 05:40:26,628 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités par timeframe:
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO -   - 5m: 15 fonctionnalités - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26,628 - adan_trading_bot.data_processing.state_builder - INFO -   - 5m: 15 fonctionnalités - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO -   - 1h: 15 fonctionnalités - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26,628 - adan_trading_bot.data_processing.state_builder - INFO -   - 1h: 15 fonctionnalités - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO -   - 4h: 15 fonctionnalités - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26,628 - adan_trading_bot.data_processing.state_builder - INFO -   - 4h: 15 fonctionnalités - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
--- Traitement du timeframe: 5m ---
2025-09-12 05:40:26,628 - adan_trading_bot.data_processing.state_builder - INFO - 
--- Traitement du timeframe: 5m ---
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Traitement du timeframe 5m ===
2025-09-12 05:40:26,628 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Traitement du timeframe 5m ===
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0, Taille max des caractéristiques: 15
2025-09-12 05:40:26,628 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0, Taille max des caractéristiques: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Caractéristiques attendues pour 5m (15): ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26,628 - adan_trading_bot.data_processing.state_builder - INFO - Caractéristiques attendues pour 5m (15): ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - WARNING - Aucune colonne 'timestamp' (insensible à la casse) trouvée dans les données
2025-09-12 05:40:26,629 - adan_trading_bot.data_processing.state_builder - WARNING - Aucune colonne 'timestamp' (insensible à la casse) trouvée dans les données
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Création du DataFrame traité avec les colonnes attendues
2025-09-12 05:40:26,629 - adan_trading_bot.data_processing.state_builder - INFO - Création du DataFrame traité avec les colonnes attendues
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes attendues: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26,629 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes attendues: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes disponibles dans les données: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'CCI_20', 'ROC_9', 'MFI_14', 'EMA_5', 'EMA_20', 'SUPERTREND_14_2.0', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'VWAP', 'OBV', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26,629 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes disponibles dans les données: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'CCI_20', 'ROC_9', 'MFI_14', 'EMA_5', 'EMA_20', 'SUPERTREND_14_2.0', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'VWAP', 'OBV', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes ajoutées au DataFrame traité: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26,639 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes ajoutées au DataFrame traité: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Nombre de colonnes dans le DataFrame traité: 15
2025-09-12 05:40:26,640 - adan_trading_bot.data_processing.state_builder - INFO - Nombre de colonnes dans le DataFrame traité: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes actuelles: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26,640 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes actuelles: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:26,640 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:26,640 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 5m: shape=(20, 15), type=ndarray
2025-09-12 05:40:26,640 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 5m: shape=(20, 15), type=ndarray
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 5m: shape=(20, 15), type=ndarray
2025-09-12 05:40:26,640 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 5m: shape=(20, 15), type=ndarray
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
--- Traitement du timeframe: 1h ---
2025-09-12 05:40:26,640 - adan_trading_bot.data_processing.state_builder - INFO - 
--- Traitement du timeframe: 1h ---
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Traitement du timeframe 1h ===
2025-09-12 05:40:26,641 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Traitement du timeframe 1h ===
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0, Taille max des caractéristiques: 15
2025-09-12 05:40:26,641 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0, Taille max des caractéristiques: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Caractéristiques attendues pour 1h (15): ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26,641 - adan_trading_bot.data_processing.state_builder - INFO - Caractéristiques attendues pour 1h (15): ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - WARNING - Aucune colonne 'timestamp' (insensible à la casse) trouvée dans les données
2025-09-12 05:40:26,641 - adan_trading_bot.data_processing.state_builder - WARNING - Aucune colonne 'timestamp' (insensible à la casse) trouvée dans les données
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Création du DataFrame traité avec les colonnes attendues
2025-09-12 05:40:26,641 - adan_trading_bot.data_processing.state_builder - INFO - Création du DataFrame traité avec les colonnes attendues
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes attendues: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26,641 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes attendues: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes disponibles dans les données: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD', 'MACD_SIGNAL', 'MACD_HIST', 'CCI_20', 'MFI_14', 'EMA_50', 'EMA_100', 'SMA_200', 'ICHIMOKU_TENKAN', 'ICHIMOKU_KIJUN', 'ICHIMOKU_SENKOU_A', 'ICHIMOKU_SENKOU_B', 'ICHIMOKU_CHIKOU', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'OBV', 'VWAP', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26,641 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes disponibles dans les données: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD', 'MACD_SIGNAL', 'MACD_HIST', 'CCI_20', 'MFI_14', 'EMA_50', 'EMA_100', 'SMA_200', 'ICHIMOKU_TENKAN', 'ICHIMOKU_KIJUN', 'ICHIMOKU_SENKOU_A', 'ICHIMOKU_SENKOU_B', 'ICHIMOKU_CHIKOU', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'OBV', 'VWAP', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes ajoutées au DataFrame traité: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26,652 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes ajoutées au DataFrame traité: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Nombre de colonnes dans le DataFrame traité: 15
2025-09-12 05:40:26,652 - adan_trading_bot.data_processing.state_builder - INFO - Nombre de colonnes dans le DataFrame traité: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes actuelles: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26,652 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes actuelles: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:26,652 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:26,653 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 1h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26,653 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 1h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 1h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26,653 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 1h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
--- Traitement du timeframe: 4h ---
2025-09-12 05:40:26,653 - adan_trading_bot.data_processing.state_builder - INFO - 
--- Traitement du timeframe: 4h ---
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Traitement du timeframe 4h ===
2025-09-12 05:40:26,653 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Traitement du timeframe 4h ===
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0, Taille max des caractéristiques: 15
2025-09-12 05:40:26,653 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0, Taille max des caractéristiques: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Caractéristiques attendues pour 4h (15): ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26,653 - adan_trading_bot.data_processing.state_builder - INFO - Caractéristiques attendues pour 4h (15): ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - WARNING - Aucune colonne 'timestamp' (insensible à la casse) trouvée dans les données
2025-09-12 05:40:26,654 - adan_trading_bot.data_processing.state_builder - WARNING - Aucune colonne 'timestamp' (insensible à la casse) trouvée dans les données
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Création du DataFrame traité avec les colonnes attendues
2025-09-12 05:40:26,654 - adan_trading_bot.data_processing.state_builder - INFO - Création du DataFrame traité avec les colonnes attendues
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes attendues: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26,654 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes attendues: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes disponibles dans les données: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD', 'MACD_SIGNAL', 'CCI_20', 'MFI_14', 'SMA_200', 'EMA_50', 'ICHIMOKU_TENKAN', 'ICHIMOKU_KIJUN', 'ICHIMOKU_SENKOU_A', 'ICHIMOKU_SENKOU_B', 'ICHIMOKU_CHIKOU', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'OBV', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26,654 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes disponibles dans les données: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD', 'MACD_SIGNAL', 'CCI_20', 'MFI_14', 'SMA_200', 'EMA_50', 'ICHIMOKU_TENKAN', 'ICHIMOKU_KIJUN', 'ICHIMOKU_SENKOU_A', 'ICHIMOKU_SENKOU_B', 'ICHIMOKU_CHIKOU', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'OBV', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes ajoutées au DataFrame traité: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26,664 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes ajoutées au DataFrame traité: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Nombre de colonnes dans le DataFrame traité: 15
2025-09-12 05:40:26,664 - adan_trading_bot.data_processing.state_builder - INFO - Nombre de colonnes dans le DataFrame traité: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes actuelles: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26,664 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes actuelles: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:26,664 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:26,664 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 4h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26,664 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 4h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 4h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26,665 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 4h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Alignement des observations ===
2025-09-12 05:40:26,665 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Alignement des observations ===
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Timeframes à aligner: ['5m', '1h', '4h']
2025-09-12 05:40:26,665 - adan_trading_bot.data_processing.state_builder - INFO - Timeframes à aligner: ['5m', '1h', '4h']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Forme de l'observation alignée: (3, 20, 15)
2025-09-12 05:40:26,665 - adan_trading_bot.data_processing.state_builder - INFO - Forme de l'observation alignée: (3, 20, 15)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Forme attendue: (3, 20, 15)
2025-09-12 05:40:26,665 - adan_trading_bot.data_processing.state_builder - INFO - Forme attendue: (3, 20, 15)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Vérification finale de l'observation ===
2025-09-12 05:40:26,665 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Vérification finale de l'observation ===
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Forme de l'observation: (3, 20, 15)
2025-09-12 05:40:26,665 - adan_trading_bot.data_processing.state_builder - INFO - Forme de l'observation: (3, 20, 15)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Type de l'observation: <class 'numpy.ndarray'>
2025-09-12 05:40:26,665 - adan_trading_bot.data_processing.state_builder - INFO - Type de l'observation: <class 'numpy.ndarray'>
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Forme de l'état du portefeuille: (17,)
2025-09-12 05:40:26,665 - adan_trading_bot.data_processing.state_builder - INFO - Forme de l'état du portefeuille: (17,)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:26,665 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:26,665 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:26,666 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:26 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Performing full reset (reason: new_epoch=True, capital=$20.50, threshold=$11.00)
2025-09-12 05:40:26,666 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Performing full reset (reason: new_epoch=True, capital=$20.50, threshold=$11.00)
2025-09-12 05:40:26 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Portefeuille réinitialisé au capital initial: 20.50
2025-09-12 05:40:26,666 - adan_trading_bot.portfolio.portfolio_manager - WARNING - [FULL RESET] Portefeuille réinitialisé au capital initial: 20.50
2025-09-12 05:40:26,666 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:26,666 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 102.92it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 103.40it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.66it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.39it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:26 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:26,720 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:26,721 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:26,721 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:26,721 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:26,721 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 67.47it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 129.13it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 54.36it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 54.14it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:26 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:26,779 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:26,779 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Construction de l'observation (premier appel) ===
2025-09-12 05:40:26,779 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Construction de l'observation (premier appel) ===
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0
2025-09-12 05:40:26,779 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Timeframes disponibles: ['4h', '1h', '5m']
2025-09-12 05:40:26,779 - adan_trading_bot.data_processing.state_builder - INFO - Timeframes disponibles: ['4h', '1h', '5m']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Nombre maximum de fonctionnalités configurées: 15
2025-09-12 05:40:26,779 - adan_trading_bot.data_processing.state_builder - INFO - Nombre maximum de fonctionnalités configurées: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités par timeframe:
2025-09-12 05:40:26,780 - adan_trading_bot.data_processing.state_builder - INFO - Configuration des fonctionnalités par timeframe:
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO -   - 5m: 15 fonctionnalités - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26,780 - adan_trading_bot.data_processing.state_builder - INFO -   - 5m: 15 fonctionnalités - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO -   - 1h: 15 fonctionnalités - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26,780 - adan_trading_bot.data_processing.state_builder - INFO -   - 1h: 15 fonctionnalités - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO -   - 4h: 15 fonctionnalités - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26,780 - adan_trading_bot.data_processing.state_builder - INFO -   - 4h: 15 fonctionnalités - ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
--- Traitement du timeframe: 5m ---
2025-09-12 05:40:26,780 - adan_trading_bot.data_processing.state_builder - INFO - 
--- Traitement du timeframe: 5m ---
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Traitement du timeframe 5m ===
2025-09-12 05:40:26,780 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Traitement du timeframe 5m ===
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0, Taille max des caractéristiques: 15
2025-09-12 05:40:26,780 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0, Taille max des caractéristiques: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Caractéristiques attendues pour 5m (15): ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26,780 - adan_trading_bot.data_processing.state_builder - INFO - Caractéristiques attendues pour 5m (15): ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - WARNING - Aucune colonne 'timestamp' (insensible à la casse) trouvée dans les données
2025-09-12 05:40:26,781 - adan_trading_bot.data_processing.state_builder - WARNING - Aucune colonne 'timestamp' (insensible à la casse) trouvée dans les données
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Création du DataFrame traité avec les colonnes attendues
2025-09-12 05:40:26,781 - adan_trading_bot.data_processing.state_builder - INFO - Création du DataFrame traité avec les colonnes attendues
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes attendues: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26,781 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes attendues: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes disponibles dans les données: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'CCI_20', 'ROC_9', 'MFI_14', 'EMA_5', 'EMA_20', 'SUPERTREND_14_2.0', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'VWAP', 'OBV', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26,781 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes disponibles dans les données: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'CCI_20', 'ROC_9', 'MFI_14', 'EMA_5', 'EMA_20', 'SUPERTREND_14_2.0', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'VWAP', 'OBV', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes ajoutées au DataFrame traité: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26,791 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes ajoutées au DataFrame traité: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Nombre de colonnes dans le DataFrame traité: 15
2025-09-12 05:40:26,791 - adan_trading_bot.data_processing.state_builder - INFO - Nombre de colonnes dans le DataFrame traité: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes actuelles: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26,791 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes actuelles: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ATR_14', 'EMA_5', 'EMA_12', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:26,791 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:26,792 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 5m: shape=(20, 15), type=ndarray
2025-09-12 05:40:26,792 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 5m: shape=(20, 15), type=ndarray
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 5m: shape=(20, 15), type=ndarray
2025-09-12 05:40:26,792 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 5m: shape=(20, 15), type=ndarray
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
--- Traitement du timeframe: 1h ---
2025-09-12 05:40:26,792 - adan_trading_bot.data_processing.state_builder - INFO - 
--- Traitement du timeframe: 1h ---
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Traitement du timeframe 1h ===
2025-09-12 05:40:26,792 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Traitement du timeframe 1h ===
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0, Taille max des caractéristiques: 15
2025-09-12 05:40:26,792 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0, Taille max des caractéristiques: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Caractéristiques attendues pour 1h (15): ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26,793 - adan_trading_bot.data_processing.state_builder - INFO - Caractéristiques attendues pour 1h (15): ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - WARNING - Aucune colonne 'timestamp' (insensible à la casse) trouvée dans les données
2025-09-12 05:40:26,793 - adan_trading_bot.data_processing.state_builder - WARNING - Aucune colonne 'timestamp' (insensible à la casse) trouvée dans les données
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Création du DataFrame traité avec les colonnes attendues
2025-09-12 05:40:26,793 - adan_trading_bot.data_processing.state_builder - INFO - Création du DataFrame traité avec les colonnes attendues
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes attendues: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26,793 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes attendues: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes disponibles dans les données: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD', 'MACD_SIGNAL', 'MACD_HIST', 'CCI_20', 'MFI_14', 'EMA_50', 'EMA_100', 'SMA_200', 'ICHIMOKU_TENKAN', 'ICHIMOKU_KIJUN', 'ICHIMOKU_SENKOU_A', 'ICHIMOKU_SENKOU_B', 'ICHIMOKU_CHIKOU', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'OBV', 'VWAP', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26,793 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes disponibles dans les données: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD', 'MACD_SIGNAL', 'MACD_HIST', 'CCI_20', 'MFI_14', 'EMA_50', 'EMA_100', 'SMA_200', 'ICHIMOKU_TENKAN', 'ICHIMOKU_KIJUN', 'ICHIMOKU_SENKOU_A', 'ICHIMOKU_SENKOU_B', 'ICHIMOKU_CHIKOU', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'OBV', 'VWAP', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes ajoutées au DataFrame traité: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26,803 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes ajoutées au DataFrame traité: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Nombre de colonnes dans le DataFrame traité: 15
2025-09-12 05:40:26,803 - adan_trading_bot.data_processing.state_builder - INFO - Nombre de colonnes dans le DataFrame traité: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes actuelles: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26,803 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes actuelles: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'MACD_HIST_12_26_9', 'ADX_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'EMA_26', 'EMA_50']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:26,803 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:26,804 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 1h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26,804 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 1h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 1h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26,804 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 1h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
--- Traitement du timeframe: 4h ---
2025-09-12 05:40:26,804 - adan_trading_bot.data_processing.state_builder - INFO - 
--- Traitement du timeframe: 4h ---
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Traitement du timeframe 4h ===
2025-09-12 05:40:26,804 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Traitement du timeframe 4h ===
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0, Taille max des caractéristiques: 15
2025-09-12 05:40:26,804 - adan_trading_bot.data_processing.state_builder - INFO - Index courant: 0, Taille max des caractéristiques: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Caractéristiques attendues pour 4h (15): ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26,804 - adan_trading_bot.data_processing.state_builder - INFO - Caractéristiques attendues pour 4h (15): ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - WARNING - Aucune colonne 'timestamp' (insensible à la casse) trouvée dans les données
2025-09-12 05:40:26,804 - adan_trading_bot.data_processing.state_builder - WARNING - Aucune colonne 'timestamp' (insensible à la casse) trouvée dans les données
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Création du DataFrame traité avec les colonnes attendues
2025-09-12 05:40:26,805 - adan_trading_bot.data_processing.state_builder - INFO - Création du DataFrame traité avec les colonnes attendues
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes attendues: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26,805 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes attendues: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes disponibles dans les données: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD', 'MACD_SIGNAL', 'CCI_20', 'MFI_14', 'SMA_200', 'EMA_50', 'ICHIMOKU_TENKAN', 'ICHIMOKU_KIJUN', 'ICHIMOKU_SENKOU_A', 'ICHIMOKU_SENKOU_B', 'ICHIMOKU_CHIKOU', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'OBV', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26,805 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes disponibles dans les données: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD', 'MACD_SIGNAL', 'CCI_20', 'MFI_14', 'SMA_200', 'EMA_50', 'ICHIMOKU_TENKAN', 'ICHIMOKU_KIJUN', 'ICHIMOKU_SENKOU_A', 'ICHIMOKU_SENKOU_B', 'ICHIMOKU_CHIKOU', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'OBV', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes ajoutées au DataFrame traité: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26,816 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes ajoutées au DataFrame traité: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Nombre de colonnes dans le DataFrame traité: 15
2025-09-12 05:40:26,816 - adan_trading_bot.data_processing.state_builder - INFO - Nombre de colonnes dans le DataFrame traité: 15
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes actuelles: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26,816 - adan_trading_bot.data_processing.state_builder - INFO - Colonnes actuelles: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'MACD_HIST_12_26_9', 'ADX_14', 'ATR_14', 'OBV', 'EMA_50', 'EMA_200', 'SMA_200', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:26,816 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:26,817 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 4h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26,817 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 4h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 4h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26,817 - adan_trading_bot.data_processing.state_builder - INFO - Observation traitée pour 4h: shape=(20, 15), type=ndarray
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Alignement des observations ===
2025-09-12 05:40:26,817 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Alignement des observations ===
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Timeframes à aligner: ['5m', '1h', '4h']
2025-09-12 05:40:26,817 - adan_trading_bot.data_processing.state_builder - INFO - Timeframes à aligner: ['5m', '1h', '4h']
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Forme de l'observation alignée: (3, 20, 15)
2025-09-12 05:40:26,817 - adan_trading_bot.data_processing.state_builder - INFO - Forme de l'observation alignée: (3, 20, 15)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Forme attendue: (3, 20, 15)
2025-09-12 05:40:26,817 - adan_trading_bot.data_processing.state_builder - INFO - Forme attendue: (3, 20, 15)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Vérification finale de l'observation ===
2025-09-12 05:40:26,817 - adan_trading_bot.data_processing.state_builder - INFO - 
=== Vérification finale de l'observation ===
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Forme de l'observation: (3, 20, 15)
2025-09-12 05:40:26,817 - adan_trading_bot.data_processing.state_builder - INFO - Forme de l'observation: (3, 20, 15)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Type de l'observation: <class 'numpy.ndarray'>
2025-09-12 05:40:26,817 - adan_trading_bot.data_processing.state_builder - INFO - Type de l'observation: <class 'numpy.ndarray'>
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - Forme de l'état du portefeuille: (17,)
2025-09-12 05:40:26,818 - adan_trading_bot.data_processing.state_builder - INFO - Forme de l'état du portefeuille: (17,)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:26,818 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:26,818 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:26,818 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
───────────── 🚀 Début de l'Entraînement ADAN avec Flux Dynamiques ─────────────
╭─────────────────────── Configuration Flux Monétaires ────────────────────────╮
│ 💰 Capital Initial: $15.00                                                   │
│ 🎯 Gestion Dynamique des Flux Activée                                        │
│ 📊 Monitoring en Temps Réel                                                  │
╰──────────────────────────────────────────────────────────────────────────────╯
2025-09-12 05:40:26,827 - adan_trading_bot.environment.multi_asset_chunked_env - DEBUG - Prix de clôture manquant, utilisation d'une valeur par défaut
2025-09-12 05:40:26 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:26,827 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:26,828 - adan_trading_bot.environment.multi_asset_chunked_env - DEBUG - [STEP LOG] step=1, action=[0.069082], current_chunk=0, step_in_chunk=251
2025-09-12 05:40:26,828 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.06908209]
2025-09-12 05:40:26,828 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.50
2025-09-12 05:40:26,828 - adan_trading_bot.environment.multi_asset_chunked_env - DEBUG - Available columns in BTCUSDT 5m data: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'CCI_20', 'ROC_9', 'MFI_14', 'EMA_5', 'EMA_20', 'SUPERTREND_14_2.0', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'VWAP', 'OBV', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26,828 - adan_trading_bot.environment.multi_asset_chunked_env - DEBUG - Found feature: 'close' -> 'CLOSE'
2025-09-12 05:40:26 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 0 (0W/0L)
2025-09-12 05:40:26,830 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 0 (0W/0L)
2025-09-12 05:40:26 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:26,830 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:26 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:26,830 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:26,830 - adan_trading_bot.environment.multi_asset_chunked_env - DEBUG - Available columns in BTCUSDT 5m data: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'CCI_20', 'ROC_9', 'MFI_14', 'EMA_5', 'EMA_20', 'SUPERTREND_14_2.0', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'VWAP', 'OBV', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26,830 - adan_trading_bot.environment.multi_asset_chunked_env - DEBUG - Found feature: 'close' -> 'CLOSE'
2025-09-12 05:40:26,832 - adan_trading_bot.environment.multi_asset_chunked_env - DEBUG - Available columns in BTCUSDT 5m data: ['OPEN', 'HIGH', 'LOW', 'CLOSE', 'VOLUME', 'RSI_14', 'CCI_20', 'ROC_9', 'MFI_14', 'EMA_5', 'EMA_20', 'SUPERTREND_14_2.0', 'PSAR_0.02_0.2', 'ATR_14', 'BB_UPPER', 'BB_MIDDLE', 'BB_LOWER', 'VWAP', 'OBV', 'ATR_PCT', 'MACD_12_26_9', 'MACD_SIGNAL_12_26_9', 'MACD_HIST_12_26_9', 'ADX_14', 'STOCH_K_14_3_3', 'STOCH_D_14_3_3', 'EMA_200', 'EMA_RATIO_FAST_SLOW', 'EMA_12', 'EMA_26']
2025-09-12 05:40:26,832 - adan_trading_bot.environment.multi_asset_chunked_env - DEBUG - Found feature: 'close' -> 'CLOSE'
2025-09-12 05:40:26,834 - adan_trading_bot.environment.multi_asset_chunked_env - DEBUG - Volatilité calculée pour BTCUSDT: 23.31% (sur 21 jours)
2025-09-12 05:40:26 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.94% | PosSize: 82.5% | Winrate: 0.0%
2025-09-12 05:40:26,835 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.94% | PosSize: 82.5% | Winrate: 0.0%
2025-09-12 05:40:26,835 - adan_trading_bot.environment.multi_asset_chunked_env - DEBUG - [TRADE PARAMS] asset=BTCUSDT, action=BUY, price=83849.80000000, position_size=16.91739540 USDT, stop_loss=0.02%, risk_per_trade=5.00%
2025-09-12 05:40:26,835 - adan_trading_bot.environment.multi_asset_chunked_env - DEBUG - [TRADE SKIPPED] asset=BTCUSDT, reason=action_value=0.0691 <= 0.1
2025-09-12 05:40:26 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 0 (0W/0L)
2025-09-12 05:40:26,836 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 0 (0W/0L)
2025-09-12 05:40:26 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:26,836 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:26 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:26,836 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:26,836 - adan_trading_bot.environment.multi_asset_chunked_env - DEBUG - _execute_trades took 0.0045 seconds
2025-09-12 05:40:26,836 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:26,836 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.50, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:26,836 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:26,837 - adan_trading_bot.environment.multi_asset_chunked_env - DEBUG - [CHUNK] Loading next chunk 2/10
2025-09-12 05:40:26,837 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:26,837 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 62.31it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 51.14it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 43.97it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 43.82it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:26 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.07 secondes
2025-09-12 05:40:26,908 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.07 secondes
2025-09-12 05:40:26,908 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:26,908 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:26,909 - adan_trading_bot.environment.multi_asset_chunked_env - DEBUG - [DBE] Resetting DBE for new chunk with continuity
2025-09-12 05:40:26 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:26,909 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:26 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:26,909 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:26,909 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:26,909 - adan_trading_bot.environment.multi_asset_chunked_env - DEBUG - [TERMINATION] Episode continues. Current step: 1
2025-09-12 05:40:26,909 - adan_trading_bot.environment.multi_asset_chunked_env - DEBUG - Reward components - Base: 0.0000, Risk: -0.0000, Transaction: -0.0000, Concentration: -0.0000, Action Smoothness: -0.0000, Total: 0.0000
2025-09-12 05:40:26 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.50 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:26,909 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.50 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:26,910 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:26,910 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 69.05it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 84.77it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 55.12it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 54.89it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:26 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:26,968 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:26,968 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:26,968 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:26,968 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:26 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:26,968 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 87.00it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 145.34it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.20it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.96it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:27,024 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:27,024 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:27,024 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:27,035 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:27,037 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:27,046 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:27,047 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:27,056 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:27,057 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:27,057 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:27,058 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:27,058 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:27,058 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:27,059 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.21352105]
2025-09-12 05:40:27,059 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.50
2025-09-12 05:40:27 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 0 (0W/0L)
2025-09-12 05:40:27,060 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 0 (0W/0L)
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27,060 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27,060 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.94% | PosSize: 82.5% | Winrate: 0.0%
2025-09-12 05:40:27,064 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.94% | PosSize: 82.5% | Winrate: 0.0%
2025-09-12 05:40:27 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 0 (0W/0L)
2025-09-12 05:40:27,064 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 0 (0W/0L)
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27,065 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27,065 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27,065 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:27,065 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.50, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:27,065 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:27,065 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:27,065 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 80.86it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 146.55it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.53it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.29it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:27,119 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:27,119 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:27,119 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:27 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:27,119 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:27 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:27,120 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:27,120 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.50 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:27,120 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.50 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:27,120 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:27,120 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 65.54it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 127.71it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 51.10it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 50.90it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:27,182 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:27,182 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:27,182 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:27,182 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:27,182 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 75.45it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 73.74it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.59it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.33it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:27,236 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:27,237 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:27,237 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:27,248 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:27,249 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:27,259 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:27,260 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:27,269 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:27,270 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:27,270 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:27,270 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:27,270 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:27,271 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:27,271 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.5320458]
2025-09-12 05:40:27,271 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.50
2025-09-12 05:40:27 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 0 (0W/0L)
2025-09-12 05:40:27,273 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 0 (0W/0L)
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27,273 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27,273 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.94% | PosSize: 82.5% | Winrate: 0.0%
2025-09-12 05:40:27,276 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.94% | PosSize: 82.5% | Winrate: 0.0%
2025-09-12 05:40:27 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 0 (0W/0L)
2025-09-12 05:40:27,277 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 0 (0W/0L)
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27,277 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27,277 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27,277 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:27,277 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.50, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:27,277 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:27,277 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:27,277 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 72.15it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 137.71it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.86it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.62it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:27,332 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:27,332 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:27,332 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:27 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:27,332 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:27 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:27,332 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:27,332 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.50 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:27,333 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.50 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:27,333 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:27,333 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 72.24it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 112.91it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.47it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.22it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:27,388 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:27,388 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:27,388 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:27,388 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:27,388 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 88.70it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 114.49it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.12it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.85it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:27,442 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:27,442 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:27,442 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:27,454 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:27,455 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:27,466 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:27,467 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:27,477 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:27,477 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:27,478 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:27,478 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:27,478 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:27,478 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:27,479 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.37581933]
2025-09-12 05:40:27,479 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.50
2025-09-12 05:40:27 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 0 (0W/0L)
2025-09-12 05:40:27,480 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 0 (0W/0L)
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27,480 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27,480 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.94% | PosSize: 82.5% | Winrate: 0.0%
2025-09-12 05:40:27,484 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.94% | PosSize: 82.5% | Winrate: 0.0%
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020176 @ 83849.80000000 | Valeur: 16.92 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.50 USDT
2025-09-12 05:40:27,484 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020176 @ 83849.80000000 | Valeur: 16.92 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.50 USDT
2025-09-12 05:40:27 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 1 (0W/0L)
2025-09-12 05:40:27,485 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 1 (0W/0L)
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.02/10.25 USDT (0.1%/50.0%), Solde dispo: 3.57 USDT
2025-09-12 05:40:27,485 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.02/10.25 USDT (0.1%/50.0%), Solde dispo: 3.57 USDT
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.02/10.25 USDT (0.1%/50.0%), Solde dispo: 3.57 USDT
2025-09-12 05:40:27,485 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.02/10.25 USDT (0.1%/50.0%), Solde dispo: 3.57 USDT
2025-09-12 05:40:27,485 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:27,485 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.48, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:27,485 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:27,485 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:27,485 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 71.74it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 69.44it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.92it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.66it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:27,539 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:27,539 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:27,539 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:27 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:27,539 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:27 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:27,539 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:27,539 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020176 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.47 USDT | Équité: 3.57 USDT
2025-09-12 05:40:27,540 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020176 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.47 USDT | Équité: 3.57 USDT
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.48 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:27,540 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.48 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:27,540 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:27,540 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 105.68it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 92.03it/s, BTCUSDT 1h - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 54.72it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 54.49it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:27,598 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:27,598 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:27,598 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:27,598 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:27,598 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 68.74it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 94.83it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.36it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.12it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:27,654 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:27,654 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:27,654 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:27,667 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:27,668 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:27,678 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:27,678 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:27,688 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:27,688 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:27,689 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:27,689 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:27,689 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:27,693 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:27,694 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:27,696 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [1.]
2025-09-12 05:40:27,696 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.50
2025-09-12 05:40:27 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 0 (0W/0L)
2025-09-12 05:40:27,698 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 0 (0W/0L)
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27,698 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27,698 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.88% | PosSize: 82.5% | Winrate: 0.0%
2025-09-12 05:40:27,702 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.88% | PosSize: 82.5% | Winrate: 0.0%
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020182 @ 83849.80000000 | Valeur: 16.92 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.50 USDT
2025-09-12 05:40:27,703 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020182 @ 83849.80000000 | Valeur: 16.92 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.50 USDT
2025-09-12 05:40:27 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 1 (0W/0L)
2025-09-12 05:40:27,704 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 1 (0W/0L)
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.02/10.25 USDT (0.1%/50.0%), Solde dispo: 3.56 USDT
2025-09-12 05:40:27,704 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.02/10.25 USDT (0.1%/50.0%), Solde dispo: 3.56 USDT
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.02/10.25 USDT (0.1%/50.0%), Solde dispo: 3.56 USDT
2025-09-12 05:40:27,704 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.02/10.25 USDT (0.1%/50.0%), Solde dispo: 3.56 USDT
2025-09-12 05:40:27,704 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:27,704 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.48, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:27,704 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:27,704 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:27,704 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 63.24it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 59.38it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.24it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.94it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:27,758 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:27,758 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:27,758 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:27 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:27,758 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:27 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:27,758 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:27,758 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020182 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.47 USDT | Équité: 3.56 USDT
2025-09-12 05:40:27,760 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020182 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.47 USDT | Équité: 3.56 USDT
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.48 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:27,760 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.48 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:27,761 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:27,761 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 61.13it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 112.94it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 50.39it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 50.19it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:27,823 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:27,823 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:27,823 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:27,823 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:27,823 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 48.19it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 85.49it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.60it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.37it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:27,878 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:27,878 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:27,878 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:27,890 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:27,890 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:27,900 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:27,901 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:27,910 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:27,911 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:27 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:27,911 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:27,911 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:27,911 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:27,912 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:27,912 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:27,913 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [1.]
2025-09-12 05:40:27,913 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.50
2025-09-12 05:40:27 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 0 (0W/0L)
2025-09-12 05:40:27,914 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 0 (0W/0L)
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27,914 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27,915 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:27 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.88% | PosSize: 82.5% | Winrate: 0.0%
2025-09-12 05:40:27,918 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.88% | PosSize: 82.5% | Winrate: 0.0%
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020182 @ 83849.80000000 | Valeur: 16.92 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.50 USDT
2025-09-12 05:40:27,918 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020182 @ 83849.80000000 | Valeur: 16.92 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.50 USDT
2025-09-12 05:40:27 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 1 (0W/0L)
2025-09-12 05:40:27,919 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 1 (0W/0L)
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.02/10.25 USDT (0.1%/50.0%), Solde dispo: 3.56 USDT
2025-09-12 05:40:27,919 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.02/10.25 USDT (0.1%/50.0%), Solde dispo: 3.56 USDT
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.02/10.25 USDT (0.1%/50.0%), Solde dispo: 3.56 USDT
2025-09-12 05:40:27,919 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.02/10.25 USDT (0.1%/50.0%), Solde dispo: 3.56 USDT
2025-09-12 05:40:27,919 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:27,919 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.48, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:27,919 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:27,919 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:27,919 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 66.24it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 122.13it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.47it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.21it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:27,975 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:27,975 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:27,975 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:27 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:27,975 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:27 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:27,975 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:27,975 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020182 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.47 USDT | Équité: 3.56 USDT
2025-09-12 05:40:27,977 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020182 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.47 USDT | Équité: 3.56 USDT
2025-09-12 05:40:27 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.48 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:27,977 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.48 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:27,977 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:27 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:27,977 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 90.25it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 143.32it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.63it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.36it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:28,030 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:28,030 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:28,030 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:28,030 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:28,030 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 87.73it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 125.71it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 69.18it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 68.84it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:28,077 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:28,077 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:28,077 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:28,088 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:28,089 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:28,099 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:28,099 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:28,109 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:28,109 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:28,110 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:28,110 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:28,110 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:28,110 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:28,111 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:28,111 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.5524835]
2025-09-12 05:40:28,111 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.50
2025-09-12 05:40:28 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 0 (0W/0L)
2025-09-12 05:40:28,113 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 0 (0W/0L)
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:28,113 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:28,113 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.00/10.25 USDT (0.0%/50.0%), Solde dispo: 20.50 USDT
2025-09-12 05:40:28 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.88% | PosSize: 82.5% | Winrate: 0.0%
2025-09-12 05:40:28,116 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.88% | PosSize: 82.5% | Winrate: 0.0%
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020182 @ 83849.80000000 | Valeur: 16.92 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.50 USDT
2025-09-12 05:40:28,116 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020182 @ 83849.80000000 | Valeur: 16.92 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.50 USDT
2025-09-12 05:40:28 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 1 (0W/0L)
2025-09-12 05:40:28,117 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 0.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 1 (0W/0L)
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.02/10.25 USDT (0.1%/50.0%), Solde dispo: 3.56 USDT
2025-09-12 05:40:28,117 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.02/10.25 USDT (0.1%/50.0%), Solde dispo: 3.56 USDT
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.02/10.25 USDT (0.1%/50.0%), Solde dispo: 3.56 USDT
2025-09-12 05:40:28,117 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.02/10.25 USDT (0.1%/50.0%), Solde dispo: 3.56 USDT
2025-09-12 05:40:28,117 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:28,117 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.48, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:28,117 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:28,117 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:28,117 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 70.00it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 134.76it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 71.83it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 71.31it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:28,162 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:28,163 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:28,163 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:28 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:28,163 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:28 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:28,163 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:28,163 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020182 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.47 USDT | Équité: 3.56 USDT
2025-09-12 05:40:28,165 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020182 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.47 USDT | Équité: 3.56 USDT
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.48 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:28,165 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.48 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:28,165 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:28,165 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 65.53it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 127.64it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 51.73it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 51.53it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:28,227 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:28,227 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:28,227 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:28,227 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:28,227 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 72.82it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 116.82it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.29it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.06it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:28,281 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:28,281 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:28,281 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:28,292 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:28,292 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:28,302 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:28,303 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:28,312 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:28,313 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:28,313 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:28,313 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:28,313 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:28,313 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:28,314 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:28,315 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [1.]
2025-09-12 05:40:28,315 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.47
2025-09-12 05:40:28 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.61% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:28,316 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.61% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28,317 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28,317 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.88% | PosSize: 82.5% | Winrate: 0.0%
2025-09-12 05:40:28,320 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.88% | PosSize: 82.5% | Winrate: 0.0%
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020148 @ 83849.80000000 | Valeur: 16.89 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.47 USDT
2025-09-12 05:40:28,320 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020148 @ 83849.80000000 | Valeur: 16.89 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.47 USDT
2025-09-12 05:40:28 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.61% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 3 (0W/1L)
2025-09-12 05:40:28,321 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.61% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 3 (0W/1L)
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.05/10.25 USDT (0.2%/50.0%), Solde dispo: 3.56 USDT
2025-09-12 05:40:28,321 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.05/10.25 USDT (0.2%/50.0%), Solde dispo: 3.56 USDT
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.05/10.25 USDT (0.2%/50.0%), Solde dispo: 3.56 USDT
2025-09-12 05:40:28,321 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.05/10.25 USDT (0.2%/50.0%), Solde dispo: 3.56 USDT
2025-09-12 05:40:28,321 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:28,321 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.45, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:28,321 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:28,322 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:28,322 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 50.81it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 59.89it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 55.26it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 55.06it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:28,379 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:28,380 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:28,380 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:28 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:28,380 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:28 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:28,380 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:28,380 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020148 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.43 USDT | Équité: 3.56 USDT
2025-09-12 05:40:28,382 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020148 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.43 USDT | Équité: 3.56 USDT
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.45 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:28,382 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.45 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:28,382 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:28,382 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 72.63it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 139.80it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.31it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.07it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:28,436 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:28,436 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:28,436 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:28,436 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:28,436 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 88.10it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 135.99it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 70.11it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 69.74it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:28,482 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:28,483 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:28,483 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:28,494 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:28,495 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:28,505 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:28,505 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:28,514 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:28,515 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:28,515 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:28,515 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:28,515 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:28,520 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:28,520 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:28,521 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.20804915]
2025-09-12 05:40:28,521 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.47
2025-09-12 05:40:28 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:28,523 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28,523 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28,524 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.82% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:28,528 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.82% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:28 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:28,529 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28,530 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28,530 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28,530 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:28,530 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.47, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:28,530 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:28,530 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:28,530 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 65.01it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 57.58it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 52.01it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 51.80it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:28,591 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:28,591 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:28,592 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:28 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:28,592 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:28 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:28,592 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:28,592 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.47 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:28,593 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.47 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:28,594 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:28,594 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 84.32it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 130.09it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 70.86it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 70.46it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:28,639 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:28,640 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:28,640 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:28,640 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:28,640 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 90.28it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 80.51it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 55.43it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 55.20it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:28,698 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:28,698 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:28,698 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:28,709 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:28,710 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:28,720 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:28,721 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:28,731 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:28,731 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:28,732 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:28,732 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:28,732 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:28,732 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:28,732 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:28,733 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-1.]
2025-09-12 05:40:28,733 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.47
2025-09-12 05:40:28 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:28,735 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28,735 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28,735 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.82% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:28,738 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.82% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:28 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:28,739 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28,739 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28,739 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28,739 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:28,739 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.47, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:28,739 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:28,739 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:28,740 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 101.76it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 107.64it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.31it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.99it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:28,793 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:28,793 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:28,793 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:28 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:28,793 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:28 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:28,793 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:28,793 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.47 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:28,795 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.47 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:28,795 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:28,795 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 52.48it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 101.17it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 73.41it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 73.01it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.04 secondes
2025-09-12 05:40:28,839 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.04 secondes
2025-09-12 05:40:28,839 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:28,839 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:28,839 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:28,839 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 50.00it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 95.27it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 54.04it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 53.83it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:28,898 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:28,898 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:28,898 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:28,909 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:28,909 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:28,919 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:28,920 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:28,930 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:28,930 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:28 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:28,931 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:28,931 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:28,931 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:28,931 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:28,931 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:28,932 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.4558823]
2025-09-12 05:40:28,932 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.47
2025-09-12 05:40:28 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:28,934 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28,934 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28,934 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.82% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:28,937 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.82% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:28 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:28,938 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28,938 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28,938 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:28,938 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:28,938 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.47, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:28,938 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:28,938 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:28,939 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 74.03it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 115.37it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 73.01it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 72.63it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.04 secondes
2025-09-12 05:40:28,982 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.04 secondes
2025-09-12 05:40:28,983 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:28,983 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:28 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:28,983 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:28 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:28,983 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:28,983 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:28 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.47 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:28,984 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.47 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:28,984 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:28 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:28,985 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 75.38it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 95.63it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.90it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.66it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:29,039 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:29,039 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:29,039 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:29,039 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:29,039 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 93.26it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 109.28it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.60it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.35it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:29,093 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:29,093 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:29,093 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:29,104 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:29,105 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:29,115 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:29,116 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:29,125 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:29,126 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:29,126 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:29,126 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:29,126 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:29,127 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:29,127 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:29,128 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-1.]
2025-09-12 05:40:29,128 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.43
2025-09-12 05:40:29 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:29,129 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:29,130 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:29,130 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:29 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.82% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:29,133 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.82% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:29 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:29,133 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:29,133 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:29,134 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:29,134 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:29,134 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.43, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:29,134 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:29,134 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:29,134 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 83.16it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 125.78it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.44it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.12it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:29,190 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:29,190 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:29,190 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:29 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:29,190 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:29 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:29,190 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:29,190 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.43 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:29,192 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.43 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:29,194 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:29,194 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 107.56it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 135.68it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.79it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.56it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:29,250 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:29,251 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:29,251 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:29,251 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:29,251 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 101.94it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 107.83it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 70.82it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 70.45it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:29,296 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:29,297 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:29,297 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:29,307 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:29,308 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:29,318 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:29,319 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:29,328 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:29,328 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:29,329 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:29,329 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:29,329 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:29,333 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:29,333 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:29,334 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-1.]
2025-09-12 05:40:29,334 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.47
2025-09-12 05:40:29 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:29,336 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:29,336 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:29,336 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:29 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.77% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:29,342 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.77% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:29 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:29,343 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:29,344 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:29,344 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:29,344 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:29,344 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.47, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:29,344 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:29,344 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:29,344 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 65.31it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 80.08it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.61it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.34it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:29,399 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:29,399 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:29,399 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:29 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:29,399 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:29 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:29,399 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:29,399 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.47 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:29,401 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.47 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:29,401 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:29,401 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 78.04it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 130.37it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.15it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.92it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:29,456 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:29,456 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:29,456 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:29,456 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:29,456 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 59.06it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 112.89it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.38it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.11it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:29,508 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:29,508 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:29,509 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:29,520 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:29,521 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:29,531 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:29,531 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:29,541 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:29,541 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:29,542 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:29,542 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:29,542 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:29,542 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:29,542 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:29,543 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-1.]
2025-09-12 05:40:29,543 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.47
2025-09-12 05:40:29 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:29,545 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:29,545 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:29,545 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:29 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.77% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:29,548 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.77% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:29 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:29,549 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:29,549 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:29,549 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:29,549 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:29,549 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.47, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:29,549 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:29,549 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:29,549 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 97.84it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 117.22it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.88it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.60it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:29,601 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:29,601 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:29,602 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:29 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:29,602 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:29 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:29,602 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:29,602 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.47 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:29,603 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.47 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:29,603 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:29,603 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 70.65it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 134.88it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.19it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.93it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:29,657 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:29,657 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:29,657 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:29,658 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:29,658 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 77.74it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 97.87it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.44it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.21it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:29,714 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:29,714 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:29,714 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:29,725 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:29,726 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:29,736 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:29,736 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:29,746 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:29,747 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:29,747 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:29,747 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:29,747 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:29,747 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:29,748 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:29,749 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.70448107]
2025-09-12 05:40:29,749 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.47
2025-09-12 05:40:29 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:29,750 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:29,750 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:29,750 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:29 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.77% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:29,753 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.77% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020159 @ 83849.80000000 | Valeur: 16.90 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.47 USDT
2025-09-12 05:40:29,754 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020159 @ 83849.80000000 | Valeur: 16.90 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.47 USDT
2025-09-12 05:40:29 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 3 (0W/1L)
2025-09-12 05:40:29,754 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 3 (0W/1L)
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.05/10.25 USDT (0.2%/50.0%), Solde dispo: 3.55 USDT
2025-09-12 05:40:29,754 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.05/10.25 USDT (0.2%/50.0%), Solde dispo: 3.55 USDT
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.05/10.25 USDT (0.2%/50.0%), Solde dispo: 3.55 USDT
2025-09-12 05:40:29,755 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.05/10.25 USDT (0.2%/50.0%), Solde dispo: 3.55 USDT
2025-09-12 05:40:29,755 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:29,755 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.45, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:29,755 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:29,755 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:29,755 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 48.56it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 92.11it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.71it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.42it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:29,808 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:29,808 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:29,808 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:29 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:29,808 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:29 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:29,808 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:29,808 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020159 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.43 USDT | Équité: 3.55 USDT
2025-09-12 05:40:29,810 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020159 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.43 USDT | Équité: 3.55 USDT
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.45 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:29,810 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.45 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:29,810 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:29,810 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 73.96it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 84.16it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.93it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.68it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:29,864 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:29,864 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:29,864 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:29,864 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:29,864 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 79.19it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 124.51it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.31it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.07it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:29,919 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:29,920 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:29,920 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:29,931 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:29,931 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:29,942 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:29,942 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:29,952 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:29,953 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:29 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:29,953 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:29,953 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:29,953 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:29,953 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:29,954 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:29,955 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.5415208]
2025-09-12 05:40:29,955 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.43
2025-09-12 05:40:29 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:29,956 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:29,957 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:29,957 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:29 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.77% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:29,960 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.77% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:29 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:29,960 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:29,960 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:29 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:29,960 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:29,961 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:29,961 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.43, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:29,961 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:29,961 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:29 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:29,961 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 79.29it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 143.63it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 64.32it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 64.04it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:30,010 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:30,011 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:30,011 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:30 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:30,011 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:30 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:30,011 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:30,011 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.43 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:30,012 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.43 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:30,012 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:30,013 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 83.25it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 117.28it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.83it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.59it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:30,067 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:30,068 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:30,068 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:30,068 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:30,068 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 75.58it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 89.05it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.57it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.33it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:30,121 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:30,121 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:30,121 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:30,132 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:30,133 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:30,145 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:30,145 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:30,155 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:30,156 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:30,156 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:30,156 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:30,156 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:30,161 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:30,162 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:30,163 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.44906503]
2025-09-12 05:40:30,163 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.47
2025-09-12 05:40:30 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:30,165 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:30,165 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:30,165 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:30 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.71% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:30,170 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.71% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020164 @ 83849.80000000 | Valeur: 16.91 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.47 USDT
2025-09-12 05:40:30,170 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020164 @ 83849.80000000 | Valeur: 16.91 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.47 USDT
2025-09-12 05:40:30 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 3 (0W/1L)
2025-09-12 05:40:30,172 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 3 (0W/1L)
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.05/10.25 USDT (0.2%/50.0%), Solde dispo: 3.54 USDT
2025-09-12 05:40:30,172 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.05/10.25 USDT (0.2%/50.0%), Solde dispo: 3.54 USDT
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.05/10.25 USDT (0.2%/50.0%), Solde dispo: 3.54 USDT
2025-09-12 05:40:30,172 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.05/10.25 USDT (0.2%/50.0%), Solde dispo: 3.54 USDT
2025-09-12 05:40:30,172 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:30,173 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.45, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:30,173 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:30,173 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:30,173 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 71.32it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 52.15it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 51.45it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 51.26it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:30,235 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:30,235 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:30,235 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:30 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:30,235 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:30 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:30,235 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:30,235 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020164 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.43 USDT | Équité: 3.54 USDT
2025-09-12 05:40:30,237 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020164 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.43 USDT | Équité: 3.54 USDT
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.45 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:30,237 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.45 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:30,237 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:30,237 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 55.16it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 96.74it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 72.71it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 72.33it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.04 secondes
2025-09-12 05:40:30,281 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.04 secondes
2025-09-12 05:40:30,281 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:30,282 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:30,282 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:30,282 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 70.50it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 127.32it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.99it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.74it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:30,336 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:30,336 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:30,337 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:30,348 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:30,348 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:30,358 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:30,359 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:30,369 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:30,369 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:30,370 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:30,370 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:30,370 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:30,370 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:30,371 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:30,371 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.59414047]
2025-09-12 05:40:30,372 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.47
2025-09-12 05:40:30 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:30,373 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 2 (0W/1L)
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:30,373 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:30,373 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.03/10.25 USDT (0.2%/50.0%), Solde dispo: 20.47 USDT
2025-09-12 05:40:30 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.71% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:30,376 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.71% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020164 @ 83849.80000000 | Valeur: 16.91 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.47 USDT
2025-09-12 05:40:30,376 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020164 @ 83849.80000000 | Valeur: 16.91 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.47 USDT
2025-09-12 05:40:30 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 3 (0W/1L)
2025-09-12 05:40:30,377 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.63% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 3 (0W/1L)
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.05/10.25 USDT (0.2%/50.0%), Solde dispo: 3.54 USDT
2025-09-12 05:40:30,377 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.05/10.25 USDT (0.2%/50.0%), Solde dispo: 3.54 USDT
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.05/10.25 USDT (0.2%/50.0%), Solde dispo: 3.54 USDT
2025-09-12 05:40:30,377 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.05/10.25 USDT (0.2%/50.0%), Solde dispo: 3.54 USDT
2025-09-12 05:40:30,377 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:30,378 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.45, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:30,378 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:30,378 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:30,378 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 60.91it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 96.03it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.67it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.38it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:30,428 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:30,429 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:30,429 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:30 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:30,429 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:30 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:30,429 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:30,429 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020164 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.43 USDT | Équité: 3.54 USDT
2025-09-12 05:40:30,430 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020164 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.43 USDT | Équité: 3.54 USDT
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.45 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:30,431 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.45 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:30,431 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:30,431 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 76.51it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 131.99it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 65.29it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 64.98it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:30,480 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:30,480 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:30,480 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:30,480 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:30,480 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 73.83it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 133.74it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.03it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.77it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:30,534 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:30,535 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:30,535 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:30,546 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:30,547 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:30,557 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:30,558 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:30,568 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:30,569 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:30,569 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:30,569 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:30,569 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:30,569 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:30,570 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:30,571 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.78870034]
2025-09-12 05:40:30,571 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.43
2025-09-12 05:40:30 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.70% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:30,572 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.70% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:30,572 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:30,572 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:30 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.71% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:30,576 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.71% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020130 @ 83849.80000000 | Valeur: 16.88 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.43 USDT
2025-09-12 05:40:30,576 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020130 @ 83849.80000000 | Valeur: 16.88 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.43 USDT
2025-09-12 05:40:30 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.70% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 5 (0W/2L)
2025-09-12 05:40:30,577 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.70% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 5 (0W/2L)
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.08/10.25 USDT (0.4%/50.0%), Solde dispo: 3.54 USDT
2025-09-12 05:40:30,577 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.08/10.25 USDT (0.4%/50.0%), Solde dispo: 3.54 USDT
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.08/10.25 USDT (0.4%/50.0%), Solde dispo: 3.54 USDT
2025-09-12 05:40:30,577 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.08/10.25 USDT (0.4%/50.0%), Solde dispo: 3.54 USDT
2025-09-12 05:40:30,577 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:30,577 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.42, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:30,577 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:30,577 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:30,577 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 86.39it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 123.16it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.67it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.40it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:30,629 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:30,629 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:30,629 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:30 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:30,629 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:30 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:30,629 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:30,629 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020130 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.40 USDT | Équité: 3.54 USDT
2025-09-12 05:40:30,631 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020130 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.40 USDT | Équité: 3.54 USDT
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.42 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:30,631 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.42 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:30,631 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:30,631 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 49.65it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 94.94it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.10it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.82it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:30,683 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:30,683 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:30,683 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:30,683 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:30,683 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 54.94it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 105.88it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.48it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.26it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:30,739 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:30,740 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:30,740 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:30,751 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:30,752 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:30,762 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:30,763 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:30,773 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:30,773 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:30,774 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:30,774 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:30,774 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:30,774 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:30,774 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:30,775 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.63257545]
2025-09-12 05:40:30,775 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.43
2025-09-12 05:40:30 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:30,777 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:30,777 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:30,777 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:30 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.71% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:30,780 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.71% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:30 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:30,781 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:30,781 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:30,781 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:30,782 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:30,782 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.43, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:30,782 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:30,782 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:30,782 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 59.40it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 97.10it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.12it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.90it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:30,837 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:30,837 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:30,837 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:30 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:30,837 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:30 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:30,837 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:30,837 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.43 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:30,838 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.43 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:30,839 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:30,839 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 77.23it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 104.90it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.48it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.23it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:30,892 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:30,892 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:30,892 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:30,892 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:30,892 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 82.86it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 89.13it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 55.02it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 54.80it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:30,949 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:30,949 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:30,949 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:30,960 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:30,961 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:30,971 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:30,971 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:30,981 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:30,982 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:30 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:30,982 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:30,982 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:30,983 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:30,986 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:30,987 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:30,988 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [1.]
2025-09-12 05:40:30,988 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.43
2025-09-12 05:40:30 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.72% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:30,989 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.72% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:30,990 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:30,990 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:30 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.66% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:30,993 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.66% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020135 @ 83849.80000000 | Valeur: 16.88 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.43 USDT
2025-09-12 05:40:30,994 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020135 @ 83849.80000000 | Valeur: 16.88 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.43 USDT
2025-09-12 05:40:30 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.72% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 5 (0W/2L)
2025-09-12 05:40:30,995 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.72% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 5 (0W/2L)
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.08/10.25 USDT (0.4%/50.0%), Solde dispo: 3.53 USDT
2025-09-12 05:40:30,995 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.08/10.25 USDT (0.4%/50.0%), Solde dispo: 3.53 USDT
2025-09-12 05:40:30 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.08/10.25 USDT (0.4%/50.0%), Solde dispo: 3.53 USDT
2025-09-12 05:40:30,995 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.08/10.25 USDT (0.4%/50.0%), Solde dispo: 3.53 USDT
2025-09-12 05:40:30,995 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:30,995 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.42, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:30,995 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:30,995 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:30 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:30,995 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 29.04it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 51.81it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 50.09it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 49.90it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:31,058 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:31,058 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:31,059 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:31 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:31,059 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:31 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:31,059 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:31,059 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020135 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.40 USDT | Équité: 3.53 USDT
2025-09-12 05:40:31,060 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020135 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.40 USDT | Équité: 3.53 USDT
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.42 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:31,061 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.42 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:31,061 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:31,061 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 89.48it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 111.72it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 70.18it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 69.80it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:31,107 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:31,107 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:31,107 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:31,107 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:31,107 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 81.56it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 90.55it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 54.75it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 54.53it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:31,165 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:31,166 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:31,166 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:31,178 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:31,179 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:31,190 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:31,190 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:31,200 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:31,201 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:31,201 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:31,201 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:31,201 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:31,201 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:31,202 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:31,203 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-1.]
2025-09-12 05:40:31,203 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.43
2025-09-12 05:40:31 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.72% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:31,204 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.72% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:31,204 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:31,204 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:31 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.66% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:31,207 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.66% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:31 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.72% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:31,208 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.72% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:31,208 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:31,208 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:31,209 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:31,209 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.43, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:31,209 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:31,209 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:31,209 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 91.87it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 104.60it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.71it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.47it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:31,263 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:31,263 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:31,263 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:31 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:31,263 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:31 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:31,263 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:31,263 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.43 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:31,265 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.43 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:31,265 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:31,265 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 70.10it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 101.64it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.22it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.91it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:31,319 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:31,319 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:31,320 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:31,320 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:31,320 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 74.56it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 144.72it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.21it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.95it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:31,374 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:31,375 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:31,375 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:31,386 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:31,387 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:31,397 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:31,398 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:31,407 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:31,408 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:31,408 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:31,408 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:31,408 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:31,409 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:31,409 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:31,410 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-1.]
2025-09-12 05:40:31,410 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.40
2025-09-12 05:40:31 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.75% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 6 (0W/3L)
2025-09-12 05:40:31,412 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.75% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 6 (0W/3L)
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:31,412 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:31,412 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:31 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.66% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:31,415 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.66% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:31 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.75% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 6 (0W/3L)
2025-09-12 05:40:31,416 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.75% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 6 (0W/3L)
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:31,416 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:31,416 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:31,416 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:31,416 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.40, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:31,416 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:31,416 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:31,416 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 47.77it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 92.24it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.25it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.00it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:31,469 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:31,469 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:31,469 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:31 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:31,469 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:31 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:31,469 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:31,469 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.40 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:31,471 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.40 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:31,471 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:31,471 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 75.58it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 104.86it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 69.80it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 69.45it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:31,516 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:31,517 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:31,517 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:31,517 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:31,517 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 54.68it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 74.60it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.27it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.99it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:31,569 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:31,569 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:31,569 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:31,580 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:31,581 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:31,591 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:31,592 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:31,602 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:31,602 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:31,602 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:31,603 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:31,603 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:31,603 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:31,603 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:31,604 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.24327615]
2025-09-12 05:40:31,604 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.43
2025-09-12 05:40:31 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:31,606 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:31,606 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:31,606 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:31 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.66% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:31,609 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.66% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:31 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:31,609 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:31,610 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:31,610 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:31,610 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:31,610 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.43, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:31,610 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:31,610 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:31,610 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 66.37it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 126.07it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.30it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.02it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:31,660 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:31,661 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:31,661 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:31 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:31,661 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:31 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:31,661 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:31,661 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.43 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:31,662 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.43 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:31,662 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:31,662 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 67.98it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 129.20it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.45it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.22it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:31,718 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:31,718 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:31,718 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:31,718 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:31,718 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 67.24it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 129.90it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.66it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.42it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:31,773 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:31,773 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:31,773 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:31,784 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:31,785 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:31,796 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:31,797 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:31,807 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:31,808 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:31,808 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:31,808 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:31,808 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:31,812 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:31,813 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:31,814 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.3196723]
2025-09-12 05:40:31,814 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.40
2025-09-12 05:40:31 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.77% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 6 (0W/3L)
2025-09-12 05:40:31,816 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.77% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 6 (0W/3L)
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:31,816 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:31,816 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:31 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.61% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:31,820 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.61% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020106 @ 83849.80000000 | Valeur: 16.86 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.40 USDT
2025-09-12 05:40:31,820 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020106 @ 83849.80000000 | Valeur: 16.86 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.40 USDT
2025-09-12 05:40:31 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.77% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 7 (0W/3L)
2025-09-12 05:40:31,821 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.77% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 7 (0W/3L)
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.12/10.25 USDT (0.6%/50.0%), Solde dispo: 3.52 USDT
2025-09-12 05:40:31,821 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.12/10.25 USDT (0.6%/50.0%), Solde dispo: 3.52 USDT
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.12/10.25 USDT (0.6%/50.0%), Solde dispo: 3.52 USDT
2025-09-12 05:40:31,821 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.12/10.25 USDT (0.6%/50.0%), Solde dispo: 3.52 USDT
2025-09-12 05:40:31,821 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:31,821 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.38, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:31,821 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:31,822 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:31,822 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 60.97it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 81.98it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 50.87it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 50.67it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:31,883 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:31,883 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:31,884 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:31 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:31,884 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:31 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:31,884 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:31,884 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020106 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.36 USDT | Équité: 3.52 USDT
2025-09-12 05:40:31,885 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020106 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.36 USDT | Équité: 3.52 USDT
2025-09-12 05:40:31 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.38 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:31,886 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.38 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:31,886 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:31,886 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 57.75it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 104.67it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.22it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.95it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:31,937 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:31,938 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:31,938 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:31,938 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:31,938 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 89.39it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 76.62it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.27it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.85it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:31 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:31,990 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:31,990 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:31 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:31,990 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:32,001 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:32,002 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:32,012 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:32,012 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:32,022 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:32,022 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:32,023 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:32,023 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:32,023 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:32,023 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:32,024 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:32,025 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.86114174]
2025-09-12 05:40:32,025 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.43
2025-09-12 05:40:32 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.72% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:32,026 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.72% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:32,026 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:32,026 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:32 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.61% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:32,029 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.61% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020139 @ 83849.80000000 | Valeur: 16.89 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.43 USDT
2025-09-12 05:40:32,030 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020139 @ 83849.80000000 | Valeur: 16.89 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.43 USDT
2025-09-12 05:40:32 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.72% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 5 (0W/2L)
2025-09-12 05:40:32,030 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.72% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 5 (0W/2L)
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.08/10.25 USDT (0.4%/50.0%), Solde dispo: 3.53 USDT
2025-09-12 05:40:32,030 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.08/10.25 USDT (0.4%/50.0%), Solde dispo: 3.53 USDT
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.08/10.25 USDT (0.4%/50.0%), Solde dispo: 3.53 USDT
2025-09-12 05:40:32,031 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.08/10.25 USDT (0.4%/50.0%), Solde dispo: 3.53 USDT
2025-09-12 05:40:32,031 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:32,031 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.42, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:32,031 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:32,031 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:32,031 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 69.98it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 131.99it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 73.79it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 73.38it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.04 secondes
2025-09-12 05:40:32,075 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.04 secondes
2025-09-12 05:40:32,075 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:32,075 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:32 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:32,075 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:32 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:32,075 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:32,075 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020139 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.40 USDT | Équité: 3.53 USDT
2025-09-12 05:40:32,077 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020139 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.40 USDT | Équité: 3.53 USDT
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.42 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:32,077 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.42 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:32,077 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:32,077 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 48.08it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 91.65it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 55.78it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 55.56it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:32,134 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:32,135 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:32,135 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:32,135 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:32,135 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 78.67it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 87.38it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 67.50it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 67.12it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:32,183 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:32,183 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:32,183 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:32,195 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:32,196 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:32,207 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:32,207 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:32,218 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:32,219 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:32,219 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:32,219 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:32,219 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:32,220 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:32,220 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:32,221 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.6573257]
2025-09-12 05:40:32,221 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.40
2025-09-12 05:40:32 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.75% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 6 (0W/3L)
2025-09-12 05:40:32,223 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.75% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 6 (0W/3L)
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:32,223 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:32,223 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:32 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.61% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:32,226 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.61% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020105 @ 83849.80000000 | Valeur: 16.86 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.40 USDT
2025-09-12 05:40:32,226 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020105 @ 83849.80000000 | Valeur: 16.86 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.40 USDT
2025-09-12 05:40:32 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.75% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 7 (0W/3L)
2025-09-12 05:40:32,227 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.75% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 7 (0W/3L)
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.12/10.25 USDT (0.6%/50.0%), Solde dispo: 3.52 USDT
2025-09-12 05:40:32,227 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.12/10.25 USDT (0.6%/50.0%), Solde dispo: 3.52 USDT
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.12/10.25 USDT (0.6%/50.0%), Solde dispo: 3.52 USDT
2025-09-12 05:40:32,227 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.12/10.25 USDT (0.6%/50.0%), Solde dispo: 3.52 USDT
2025-09-12 05:40:32,227 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:32,227 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.38, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:32,228 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:32,228 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:32,228 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 82.85it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 114.13it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.00it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.73it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:32,280 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:32,280 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:32,280 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:32 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:32,281 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:32 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:32,281 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:32,281 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020105 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.36 USDT | Équité: 3.52 USDT
2025-09-12 05:40:32,282 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020105 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.36 USDT | Équité: 3.52 USDT
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.38 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:32,282 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.38 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:32,283 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:32,283 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 80.41it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 137.02it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 70.44it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 70.08it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:32,328 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:32,328 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:32,329 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:32,329 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:32,329 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 45.11it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 87.58it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.06it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.78it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:32,381 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:32,381 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:32,381 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:32,392 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:32,393 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:32,403 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:32,404 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:32,413 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:32,414 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:32,414 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:32,414 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:32,414 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:32,415 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:32,415 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:32,416 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.3500161]
2025-09-12 05:40:32,416 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.43
2025-09-12 05:40:32 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:32,417 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:32,418 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:32,418 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:32 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.61% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:32,421 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.61% | PosSize: 82.6% | Winrate: 0.0%
2025-09-12 05:40:32 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:32,422 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:32,422 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:32,422 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:32,422 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:32,422 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.43, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:32,422 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:32,422 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:32,422 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 91.37it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 149.92it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.67it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.37it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:32,472 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:32,472 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:32,472 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:32 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:32,472 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:32 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:32,472 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:32,473 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.43 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:32,474 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.43 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:32,474 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:32,474 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 82.69it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 101.35it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.12it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.83it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:32,526 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:32,527 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:32,527 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:32,527 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:32,527 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 77.78it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 107.69it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.64it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.41it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:32,581 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:32,581 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:32,582 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:32,593 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:32,594 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:32,604 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:32,604 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:32,614 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:32,614 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:32,615 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:32,615 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:32,615 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:32,619 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:32,619 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:32,620 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.7017539]
2025-09-12 05:40:32,620 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.36
2025-09-12 05:40:32 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.81% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 8 (0W/4L)
2025-09-12 05:40:32,622 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.81% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 8 (0W/4L)
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:32,622 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:32,622 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:32 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.55% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:32,626 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.55% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:32 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.81% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 8 (0W/4L)
2025-09-12 05:40:32,627 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.81% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 8 (0W/4L)
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:32,627 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:32,627 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:32,628 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:32,628 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.36, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:32,628 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:32,628 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:32,628 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 42.76it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 82.37it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.44it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.17it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:32,681 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:32,682 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:32,682 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:32 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:32,682 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:32 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:32,682 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:32,682 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.36 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:32,683 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.36 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:32,684 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:32,684 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 75.45it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 119.40it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.62it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.37it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:32,736 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:32,736 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:32,736 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:32,737 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:32,737 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 95.03it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 118.32it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.04it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.79it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:32,790 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:32,791 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:32,791 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:32,801 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:32,802 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:32,812 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:32,813 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:32,823 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:32,823 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:32,824 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:32,824 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:32,824 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:32,824 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:32,825 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:32,826 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-1.]
2025-09-12 05:40:32,826 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.40
2025-09-12 05:40:32 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.79% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 6 (0W/3L)
2025-09-12 05:40:32,827 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.79% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 6 (0W/3L)
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:32,828 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:32,828 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:32 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.55% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:32,831 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.55% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:32 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.79% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 6 (0W/3L)
2025-09-12 05:40:32,832 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.79% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 6 (0W/3L)
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:32,832 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:32,832 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:32,832 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:32,832 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.40, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:32,832 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:32,832 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:32,832 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 81.84it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 113.95it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.73it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.46it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:32,885 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:32,885 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:32,886 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:32 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:32,886 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:32 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:32,886 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:32,886 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:32 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.40 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:32,887 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.40 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:32,888 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:32,888 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 68.97it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 132.90it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.27it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.99it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:32,940 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:32,941 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:32,941 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:32,941 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:32,941 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 69.08it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 97.45it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.66it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.41it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:32 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:32,993 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:32,993 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:32 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:32,993 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:33,004 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:33,005 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:33,015 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:33,016 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:33,025 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:33,026 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:33,026 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:33,026 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:33,027 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:33,027 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:33,027 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:33,028 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.3290278]
2025-09-12 05:40:33,028 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.36
2025-09-12 05:40:33 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.81% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 8 (0W/4L)
2025-09-12 05:40:33,030 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.81% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 8 (0W/4L)
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:33,030 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:33,030 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:33 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.55% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:33,033 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.55% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020075 @ 83849.80000000 | Valeur: 16.83 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.36 USDT
2025-09-12 05:40:33,033 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020075 @ 83849.80000000 | Valeur: 16.83 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.36 USDT
2025-09-12 05:40:33 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.81% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 9 (0W/4L)
2025-09-12 05:40:33,034 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.81% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 9 (0W/4L)
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.15/10.25 USDT (0.7%/50.0%), Solde dispo: 3.51 USDT
2025-09-12 05:40:33,034 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.15/10.25 USDT (0.7%/50.0%), Solde dispo: 3.51 USDT
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.15/10.25 USDT (0.7%/50.0%), Solde dispo: 3.51 USDT
2025-09-12 05:40:33,034 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.15/10.25 USDT (0.7%/50.0%), Solde dispo: 3.51 USDT
2025-09-12 05:40:33,034 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:33,034 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.35, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:33,034 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:33,034 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:33,034 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 117.95it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 72.51it/s, BTCUSDT 1h - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.24it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.99it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:33,089 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:33,089 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:33,089 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:33 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:33,089 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:33 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:33,089 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:33,089 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020075 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.33 USDT | Équité: 3.51 USDT
2025-09-12 05:40:33,091 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020075 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.33 USDT | Équité: 3.51 USDT
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.35 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:33,091 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.35 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:33,091 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:33,091 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 56.14it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 105.38it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.05it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.80it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:33,146 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:33,146 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:33,146 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:33,146 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:33,146 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 73.71it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 103.14it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 54.16it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 53.93it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:33,205 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:33,205 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:33,205 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:33,216 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:33,217 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:33,227 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:33,227 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:33,237 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:33,237 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:33,238 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:33,238 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:33,238 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:33,238 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:33,239 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:33,239 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.58567876]
2025-09-12 05:40:33,239 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.43
2025-09-12 05:40:33 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:33,241 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:33,241 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:33,241 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:33 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.55% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:33,244 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.55% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:33 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:33,245 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:33,245 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:33,245 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:33,245 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:33,245 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.43, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:33,245 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:33,245 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:33,245 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 84.57it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 139.74it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.04it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.74it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:33,297 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:33,297 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:33,297 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:33 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:33,297 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:33 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:33,297 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:33,297 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.43 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:33,299 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.43 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:33,299 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:33,299 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 52.00it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 99.08it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.65it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.38it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:33,350 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:33,350 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:33,351 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:33,351 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:33,351 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 83.41it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 88.63it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.38it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.09it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:33,402 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:33,402 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:33,402 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:33,413 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:33,414 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:33,423 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:33,424 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:33,434 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:33,434 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:33,434 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:33,435 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:33,435 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:33,439 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:33,440 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:33,441 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.09415664]
2025-09-12 05:40:33,441 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.36
2025-09-12 05:40:33 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.81% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 8 (0W/4L)
2025-09-12 05:40:33,443 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.81% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 8 (0W/4L)
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:33,443 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:33,443 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:33 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.50% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:33,448 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.50% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:33 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.81% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 8 (0W/4L)
2025-09-12 05:40:33,449 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.81% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 8 (0W/4L)
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:33,449 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:33,449 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:33,449 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:33,449 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.36, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:33,449 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:33,449 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:33,450 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 63.70it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 55.99it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 52.11it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 51.90it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:33,510 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:33,510 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:33,510 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:33 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:33,510 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:33 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:33,511 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:33,511 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.36 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:33,512 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.36 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:33,512 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:33,512 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 70.20it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 112.80it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 69.62it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 69.27it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:33,559 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:33,559 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:33,559 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:33,559 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:33,559 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 54.66it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 102.72it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.65it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.39it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:33,613 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:33,613 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:33,613 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:33,624 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:33,624 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:33,634 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:33,635 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:33,645 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:33,645 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:33,646 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:33,646 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:33,646 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:33,646 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:33,646 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:33,647 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.07215793]
2025-09-12 05:40:33,647 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.40
2025-09-12 05:40:33 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.79% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 6 (0W/3L)
2025-09-12 05:40:33,649 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.79% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 6 (0W/3L)
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:33,649 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:33,649 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:33 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.50% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:33,652 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.50% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:33 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.79% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 6 (0W/3L)
2025-09-12 05:40:33,653 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.79% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 6 (0W/3L)
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:33,653 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:33,653 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:33,653 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:33,653 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.40, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:33,653 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:33,653 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:33,653 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 79.42it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 119.05it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.92it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.65it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:33,706 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:33,706 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:33,706 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:33 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:33,706 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:33 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:33,706 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:33,707 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.40 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:33,708 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.40 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:33,708 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:33,708 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 73.66it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 142.72it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.43it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.16it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:33,761 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:33,761 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:33,761 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:33,761 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:33,761 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 70.00it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 114.00it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.17it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.91it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:33,816 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:33,816 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:33,816 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:33,826 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:33,827 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:33,837 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:33,838 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:33,848 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:33,849 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:33 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:33,849 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:33,849 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:33,849 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:33,850 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:33,850 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:33,851 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [1.]
2025-09-12 05:40:33,851 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.33
2025-09-12 05:40:33 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.85% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 10 (0W/5L)
2025-09-12 05:40:33,853 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.85% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 10 (0W/5L)
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:33,853 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:33,853 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:33 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.50% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:33,856 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.50% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020046 @ 83849.80000000 | Valeur: 16.81 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.33 USDT
2025-09-12 05:40:33,856 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020046 @ 83849.80000000 | Valeur: 16.81 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.33 USDT
2025-09-12 05:40:33 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.85% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 11 (0W/5L)
2025-09-12 05:40:33,858 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.85% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 11 (0W/5L)
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.19/10.25 USDT (0.9%/50.0%), Solde dispo: 3.51 USDT
2025-09-12 05:40:33,858 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.19/10.25 USDT (0.9%/50.0%), Solde dispo: 3.51 USDT
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.19/10.25 USDT (0.9%/50.0%), Solde dispo: 3.51 USDT
2025-09-12 05:40:33,858 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.19/10.25 USDT (0.9%/50.0%), Solde dispo: 3.51 USDT
2025-09-12 05:40:33,858 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:33,858 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.31, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:33,858 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:33,858 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:33,858 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 103.75it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 103.08it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.81it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.54it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:33,913 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:33,913 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:33,913 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:33 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:33,914 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:33 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:33,914 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:33,914 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020046 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.30 USDT | Équité: 3.51 USDT
2025-09-12 05:40:33,915 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020046 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.30 USDT | Équité: 3.51 USDT
2025-09-12 05:40:33 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.31 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:33,916 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.31 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:33,916 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:33,916 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 53.41it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 88.34it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 72.11it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 71.74it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.04 secondes
2025-09-12 05:40:33,960 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.04 secondes
2025-09-12 05:40:33,961 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:33,961 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:33,961 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:33 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:33,961 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 72.01it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 138.27it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.98it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.71it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:34,013 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:34,013 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:34,013 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:34,024 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:34,025 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:34,035 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:34,036 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:34,045 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:34,045 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:34,046 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:34,046 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:34,046 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:34,046 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:34,047 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:34,048 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.1015136]
2025-09-12 05:40:34,048 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.43
2025-09-12 05:40:34 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:34,049 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 4 (0W/2L)
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:34,049 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:34,049 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.07/10.25 USDT (0.3%/50.0%), Solde dispo: 20.43 USDT
2025-09-12 05:40:34 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.50% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:34,052 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.50% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020147 @ 83849.80000000 | Valeur: 16.89 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.43 USDT
2025-09-12 05:40:34,052 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020147 @ 83849.80000000 | Valeur: 16.89 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.43 USDT
2025-09-12 05:40:34 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 5 (0W/2L)
2025-09-12 05:40:34,053 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.66% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 5 (0W/2L)
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.08/10.25 USDT (0.4%/50.0%), Solde dispo: 3.52 USDT
2025-09-12 05:40:34,053 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.08/10.25 USDT (0.4%/50.0%), Solde dispo: 3.52 USDT
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.08/10.25 USDT (0.4%/50.0%), Solde dispo: 3.52 USDT
2025-09-12 05:40:34,053 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.08/10.25 USDT (0.4%/50.0%), Solde dispo: 3.52 USDT
2025-09-12 05:40:34,054 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:34,054 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.42, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:34,054 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:34,054 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:34,054 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 84.82it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 104.51it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.77it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.41it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:34,106 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:34,107 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:34,107 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:34 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:34,107 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:34 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:34,107 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:34,107 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020147 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.40 USDT | Équité: 3.52 USDT
2025-09-12 05:40:34,108 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020147 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.40 USDT | Équité: 3.52 USDT
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.42 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:34,109 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.42 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:34,109 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:34,109 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 49.36it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 95.13it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 55.86it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 55.63it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:34,166 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:34,166 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:34,166 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:34,166 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:34,166 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 62.08it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 98.94it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.00it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.75it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:34,221 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:34,221 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:34,221 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:34,232 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:34,233 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:34,244 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:34,244 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:34,254 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:34,254 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:34,255 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:34,255 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:34,255 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:34,260 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:34,260 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:34,261 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [1.]
2025-09-12 05:40:34,261 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.36
2025-09-12 05:40:34 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.81% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 8 (0W/4L)
2025-09-12 05:40:34,264 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.81% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 8 (0W/4L)
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:34,264 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:34,264 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:34 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.45% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:34,268 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.45% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020083 @ 83849.80000000 | Valeur: 16.84 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.36 USDT
2025-09-12 05:40:34,269 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020083 @ 83849.80000000 | Valeur: 16.84 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.36 USDT
2025-09-12 05:40:34 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.81% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 9 (0W/4L)
2025-09-12 05:40:34,270 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.81% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 9 (0W/4L)
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.15/10.25 USDT (0.7%/50.0%), Solde dispo: 3.51 USDT
2025-09-12 05:40:34,270 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.15/10.25 USDT (0.7%/50.0%), Solde dispo: 3.51 USDT
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.15/10.25 USDT (0.7%/50.0%), Solde dispo: 3.51 USDT
2025-09-12 05:40:34,270 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.15/10.25 USDT (0.7%/50.0%), Solde dispo: 3.51 USDT
2025-09-12 05:40:34,270 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:34,270 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.35, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:34,270 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:34,270 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:34,270 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 30.24it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 59.51it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 51.71it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 51.50it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:34,332 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:34,332 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:34,332 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:34 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:34,332 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:34 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:34,332 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:34,332 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020083 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.33 USDT | Équité: 3.51 USDT
2025-09-12 05:40:34,334 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020083 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.33 USDT | Équité: 3.51 USDT
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.35 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:34,334 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.35 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:34,334 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:34,334 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 67.46it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 129.78it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.05it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.77it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:34,386 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:34,387 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:34,387 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:34,387 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:34,387 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 75.92it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 126.89it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 67.43it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 67.06it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:34,434 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:34,435 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:34,435 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:34,446 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:34,446 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:34,456 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:34,457 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:34,466 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:34,468 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:34,468 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:34,468 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:34,468 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:34,468 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:34,469 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:34,470 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [1.]
2025-09-12 05:40:34,470 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.40
2025-09-12 05:40:34 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.79% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 6 (0W/3L)
2025-09-12 05:40:34,471 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.79% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 6 (0W/3L)
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:34,471 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:34,471 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:34 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.45% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:34,474 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.45% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020118 @ 83849.80000000 | Valeur: 16.87 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.40 USDT
2025-09-12 05:40:34,475 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020118 @ 83849.80000000 | Valeur: 16.87 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.40 USDT
2025-09-12 05:40:34 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.79% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 7 (0W/3L)
2025-09-12 05:40:34,476 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.79% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 7 (0W/3L)
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.12/10.25 USDT (0.6%/50.0%), Solde dispo: 3.51 USDT
2025-09-12 05:40:34,476 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.12/10.25 USDT (0.6%/50.0%), Solde dispo: 3.51 USDT
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.12/10.25 USDT (0.6%/50.0%), Solde dispo: 3.51 USDT
2025-09-12 05:40:34,476 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.12/10.25 USDT (0.6%/50.0%), Solde dispo: 3.51 USDT
2025-09-12 05:40:34,476 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:34,476 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.38, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:34,476 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:34,476 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:34,476 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 55.98it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 107.89it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 72.52it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 72.13it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.04 secondes
2025-09-12 05:40:34,520 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.04 secondes
2025-09-12 05:40:34,520 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:34,520 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:34 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:34,520 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:34 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:34,521 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:34,521 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020118 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.36 USDT | Équité: 3.51 USDT
2025-09-12 05:40:34,522 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020118 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.36 USDT | Équité: 3.51 USDT
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.38 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:34,522 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.38 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:34,522 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:34,522 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 45.86it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 64.62it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.17it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.91it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:34,576 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:34,576 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:34,576 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:34,576 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:34,576 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 84.11it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 91.46it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.90it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.60it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:34,629 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:34,629 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:34,629 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:34,640 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:34,641 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:34,652 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:34,652 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:34,662 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:34,663 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:34,663 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:34,663 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:34,663 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:34,664 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:34,664 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:34,665 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.77538544]
2025-09-12 05:40:34,665 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.30
2025-09-12 05:40:34 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:34,667 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:34,667 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:34,667 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:34 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.45% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:34,671 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.45% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:34 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:34,671 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:34,671 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:34,672 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:34,672 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:34,672 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.30, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:34,672 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:34,672 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:34,672 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 50.32it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 89.51it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.45it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.19it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:34,724 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:34,724 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:34,724 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:34 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:34,724 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:34 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:34,724 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:34,725 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.30 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:34,726 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.30 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:34,726 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:34,726 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 47.38it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 91.02it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.23it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.99it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:34,781 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:34,782 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:34,782 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:34,782 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:34,782 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 71.58it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 107.12it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.38it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.07it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:34,836 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:34,836 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:34,836 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:34,847 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:34,848 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:34,858 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:34,859 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:34,868 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:34,869 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:34 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:34,869 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:34,869 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:34,870 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:34,870 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:34,870 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:34,871 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.5615261]
2025-09-12 05:40:34,871 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.40
2025-09-12 05:40:34 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.82% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 6 (0W/3L)
2025-09-12 05:40:34,873 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.82% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 6 (0W/3L)
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:34,873 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:34,873 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.10/10.25 USDT (0.5%/50.0%), Solde dispo: 20.40 USDT
2025-09-12 05:40:34 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.45% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:34,877 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.45% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020117 @ 83849.80000000 | Valeur: 16.87 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.40 USDT
2025-09-12 05:40:34,877 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020117 @ 83849.80000000 | Valeur: 16.87 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.40 USDT
2025-09-12 05:40:34 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.82% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 7 (0W/3L)
2025-09-12 05:40:34,878 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.82% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 7 (0W/3L)
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.12/10.25 USDT (0.6%/50.0%), Solde dispo: 3.51 USDT
2025-09-12 05:40:34,878 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.12/10.25 USDT (0.6%/50.0%), Solde dispo: 3.51 USDT
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.12/10.25 USDT (0.6%/50.0%), Solde dispo: 3.51 USDT
2025-09-12 05:40:34,878 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.12/10.25 USDT (0.6%/50.0%), Solde dispo: 3.51 USDT
2025-09-12 05:40:34,878 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:34,878 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.38, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:34,878 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:34,878 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:34,878 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 73.48it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 134.98it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 70.53it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 70.13it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:34,924 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:34,924 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:34,924 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:34 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:34,924 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:34 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:34,924 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:34,924 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020117 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.36 USDT | Équité: 3.51 USDT
2025-09-12 05:40:34,926 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020117 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.36 USDT | Équité: 3.51 USDT
2025-09-12 05:40:34 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.38 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:34,926 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.38 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:34,926 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:34,926 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 85.57it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 100.75it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.76it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.50it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:34,981 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:34,981 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:34,981 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:34,981 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:34 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:34,981 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 88.07it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 97.42it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.54it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.30it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:35,036 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:35,037 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:35,037 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:35,047 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:35,048 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:35,058 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:35,059 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:35,069 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:35,069 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:35,070 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:35,070 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:35,070 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:35,073 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:35,074 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:35,075 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-1.]
2025-09-12 05:40:35,075 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.33
2025-09-12 05:40:35 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.89% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 10 (0W/5L)
2025-09-12 05:40:35,077 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.89% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 10 (0W/5L)
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:35,077 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:35,077 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:35 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.40% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:35,081 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.40% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:35 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.89% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 10 (0W/5L)
2025-09-12 05:40:35,082 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.89% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 10 (0W/5L)
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:35,082 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:35,082 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:35,082 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:35,082 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.33, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:35,082 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:35,082 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:35,082 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 38.32it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 74.55it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 52.97it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 52.76it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:35,143 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:35,143 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:35,143 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:35 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:35,143 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:35 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:35,143 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:35,143 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.33 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:35,145 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.33 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:35,145 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:35,145 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 69.14it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 69.80it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 52.53it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 52.32it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:35,205 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:35,205 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:35,205 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:35,205 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:35,205 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 95.71it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 98.10it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.18it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.88it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:35,257 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:35,257 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:35,257 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:35,268 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:35,269 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:35,279 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:35,280 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:35,290 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:35,291 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:35,291 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:35,292 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:35,292 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:35,292 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:35,292 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:35,293 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.4379393]
2025-09-12 05:40:35,293 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.36
2025-09-12 05:40:35 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.86% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 8 (0W/4L)
2025-09-12 05:40:35,295 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.86% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 8 (0W/4L)
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:35,295 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:35,295 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:35 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.40% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:35,299 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.40% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:35 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.86% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 8 (0W/4L)
2025-09-12 05:40:35,299 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.86% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 8 (0W/4L)
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:35,300 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:35,300 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:35,300 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:35,300 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.36, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:35,300 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:35,300 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:35,300 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 119.33it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 114.60it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.16it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.90it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:35,352 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:35,352 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:35,352 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:35 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:35,352 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:35 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:35,352 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:35,352 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.36 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:35,354 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.36 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:35,354 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:35,354 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 71.11it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 135.69it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.72it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.45it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:35,406 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:35,406 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:35,406 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:35,406 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:35,406 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 73.69it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 132.74it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 69.05it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 68.69it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:35,453 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:35,453 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:35,453 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:35,464 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:35,465 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:35,475 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:35,476 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:35,486 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:35,486 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:35,487 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:35,487 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:35,487 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:35,487 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:35,487 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:35,488 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-1.]
2025-09-12 05:40:35,488 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.30
2025-09-12 05:40:35 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:35,490 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:35,490 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:35,490 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:35 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.40% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:35,494 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.40% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:35 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:35,495 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:35,495 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:35,495 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:35,495 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:35,495 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.30, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:35,495 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:35,495 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:35,495 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 59.22it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 112.59it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.84it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.53it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:35,546 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:35,547 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:35,547 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:35 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:35,547 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:35 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:35,547 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:35,547 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.30 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:35,548 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.30 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:35,548 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:35,549 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 80.88it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 137.64it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.51it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.26it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:35,604 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:35,604 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:35,605 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:35,605 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:35,605 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 73.40it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 100.90it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.18it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.91it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:35,657 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:35,657 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:35,658 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:35,668 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:35,669 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:35,679 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:35,679 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:35,689 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:35,690 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:35,690 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:35,690 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:35,690 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:35,691 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:35,691 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:35,692 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.8391506]
2025-09-12 05:40:35,692 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.36
2025-09-12 05:40:35 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.86% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 8 (0W/4L)
2025-09-12 05:40:35,694 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.86% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 8 (0W/4L)
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:35,694 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:35,694 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:35 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.40% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:35,698 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.40% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020088 @ 83849.80000000 | Valeur: 16.84 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.36 USDT
2025-09-12 05:40:35,698 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020088 @ 83849.80000000 | Valeur: 16.84 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.36 USDT
2025-09-12 05:40:35 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.86% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 9 (0W/4L)
2025-09-12 05:40:35,699 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.86% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 9 (0W/4L)
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.15/10.25 USDT (0.7%/50.0%), Solde dispo: 3.50 USDT
2025-09-12 05:40:35,699 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.15/10.25 USDT (0.7%/50.0%), Solde dispo: 3.50 USDT
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.15/10.25 USDT (0.7%/50.0%), Solde dispo: 3.50 USDT
2025-09-12 05:40:35,699 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.15/10.25 USDT (0.7%/50.0%), Solde dispo: 3.50 USDT
2025-09-12 05:40:35,699 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:35,699 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.35, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:35,699 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:35,699 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:35,699 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 72.12it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 137.81it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.72it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.47it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:35,752 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:35,752 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:35,753 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:35 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:35,753 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:35 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:35,753 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:35,753 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020088 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.33 USDT | Équité: 3.50 USDT
2025-09-12 05:40:35,754 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020088 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.33 USDT | Équité: 3.50 USDT
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.35 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:35,755 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.35 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:35,755 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:35,755 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 97.46it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 105.06it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.36it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.12it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:35,810 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:35,810 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:35,810 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:35,810 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:35,810 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 75.99it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 147.50it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.02it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.77it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:35,865 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:35,865 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:35,865 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:35,876 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:35,877 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:35,888 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:35,888 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:35,898 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:35,898 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:35 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:35,899 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:35,899 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:35,899 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:35,904 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:35,904 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:35,905 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.9353142]
2025-09-12 05:40:35,905 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.33
2025-09-12 05:40:35 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.89% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 10 (0W/5L)
2025-09-12 05:40:35,907 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.89% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 10 (0W/5L)
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:35,907 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:35,907 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:35 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.36% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:35,911 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.36% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020056 @ 83849.80000000 | Valeur: 16.82 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.33 USDT
2025-09-12 05:40:35,911 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020056 @ 83849.80000000 | Valeur: 16.82 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.33 USDT
2025-09-12 05:40:35 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.89% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 11 (0W/5L)
2025-09-12 05:40:35,912 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.89% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 11 (0W/5L)
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.19/10.25 USDT (0.9%/50.0%), Solde dispo: 3.50 USDT
2025-09-12 05:40:35,912 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.19/10.25 USDT (0.9%/50.0%), Solde dispo: 3.50 USDT
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.19/10.25 USDT (0.9%/50.0%), Solde dispo: 3.50 USDT
2025-09-12 05:40:35,913 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.19/10.25 USDT (0.9%/50.0%), Solde dispo: 3.50 USDT
2025-09-12 05:40:35,913 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:35,913 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.31, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:35,913 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:35,913 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:35,913 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 85.52it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 114.29it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 50.08it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 49.90it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:35,976 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:35,976 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:35,976 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:35 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:35,976 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:35 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:35,977 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:35,977 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020056 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.30 USDT | Équité: 3.50 USDT
2025-09-12 05:40:35,978 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020056 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.30 USDT | Équité: 3.50 USDT
2025-09-12 05:40:35 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.31 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:35,979 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.31 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:35,979 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:35 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:35,979 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 40.71it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 64.83it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 54.32it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 54.10it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:36,037 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:36,037 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:36,037 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:36,037 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:36,037 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 59.38it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 114.31it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.41it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.14it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:36,090 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:36,091 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:36,091 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:36,101 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:36,102 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:36,112 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:36,113 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:36,123 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:36,123 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:36,124 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:36,124 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:36,124 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:36,124 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:36,125 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:36,125 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.6335372]
2025-09-12 05:40:36,125 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.36
2025-09-12 05:40:36 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.86% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 8 (0W/4L)
2025-09-12 05:40:36,127 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.86% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 8 (0W/4L)
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:36,127 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:36,127 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.14/10.25 USDT (0.7%/50.0%), Solde dispo: 20.36 USDT
2025-09-12 05:40:36 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.36% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:36,130 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.36% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020091 @ 83849.80000000 | Valeur: 16.85 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.36 USDT
2025-09-12 05:40:36,130 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020091 @ 83849.80000000 | Valeur: 16.85 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.36 USDT
2025-09-12 05:40:36 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.86% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 9 (0W/4L)
2025-09-12 05:40:36,131 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.86% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 9 (0W/4L)
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.15/10.25 USDT (0.7%/50.0%), Solde dispo: 3.50 USDT
2025-09-12 05:40:36,131 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.15/10.25 USDT (0.7%/50.0%), Solde dispo: 3.50 USDT
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.15/10.25 USDT (0.7%/50.0%), Solde dispo: 3.50 USDT
2025-09-12 05:40:36,131 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.15/10.25 USDT (0.7%/50.0%), Solde dispo: 3.50 USDT
2025-09-12 05:40:36,132 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:36,132 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.35, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:36,132 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:36,132 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:36,132 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 88.11it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 160.06it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.63it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.37it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:36,188 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:36,188 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:36,188 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:36 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:36,188 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:36 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:36,188 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:36,188 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020091 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.33 USDT | Équité: 3.50 USDT
2025-09-12 05:40:36,190 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020091 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.33 USDT | Équité: 3.50 USDT
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.35 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:36,190 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.35 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:36,190 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:36,190 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 74.10it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 124.81it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 69.17it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 68.73it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:36,236 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:36,236 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:36,236 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:36,236 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:36,236 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 74.55it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 74.18it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.50it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.23it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:36,290 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:36,290 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:36,290 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:36,301 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:36,302 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:36,312 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:36,313 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:36,322 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:36,323 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:36,324 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:36,324 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:36,324 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:36,324 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:36,324 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:36,325 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.11056606]
2025-09-12 05:40:36,325 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.30
2025-09-12 05:40:36 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:36,327 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:36,327 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:36,327 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:36 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.36% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:36,330 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.36% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020021 @ 83849.80000000 | Valeur: 16.79 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.30 USDT
2025-09-12 05:40:36,330 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020021 @ 83849.80000000 | Valeur: 16.79 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.30 USDT
2025-09-12 05:40:36 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 13 (0W/6L)
2025-09-12 05:40:36,331 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 13 (0W/6L)
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.22/10.25 USDT (1.1%/50.0%), Solde dispo: 3.49 USDT
2025-09-12 05:40:36,331 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.22/10.25 USDT (1.1%/50.0%), Solde dispo: 3.49 USDT
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.22/10.25 USDT (1.1%/50.0%), Solde dispo: 3.49 USDT
2025-09-12 05:40:36,331 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.22/10.25 USDT (1.1%/50.0%), Solde dispo: 3.49 USDT
2025-09-12 05:40:36,332 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:36,332 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.28, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:36,332 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:36,332 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:36,332 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 53.00it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 102.31it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.07it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.78it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:36,382 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:36,382 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:36,382 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:36 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:36,382 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:36 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:36,382 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:36,382 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020021 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.26 USDT | Équité: 3.49 USDT
2025-09-12 05:40:36,384 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020021 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.26 USDT | Équité: 3.49 USDT
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.28 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:36,384 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.28 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:36,385 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:36,385 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 92.11it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 117.37it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.35it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.05it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:36,438 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:36,438 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:36,438 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:36,438 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:36,438 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 59.20it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 106.75it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.08it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.78it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:36,490 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:36,490 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:36,490 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:36,501 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:36,502 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:36,512 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:36,512 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:36,521 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:36,522 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:36,522 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:36,522 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:36,523 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:36,523 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:36,523 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:36,524 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-1.]
2025-09-12 05:40:36,524 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.33
2025-09-12 05:40:36 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 10 (0W/5L)
2025-09-12 05:40:36,526 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 10 (0W/5L)
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:36,526 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:36,526 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:36 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.36% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:36,530 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.36% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:36 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 10 (0W/5L)
2025-09-12 05:40:36,530 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 10 (0W/5L)
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:36,531 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:36,531 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:36,531 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:36,531 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.33, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:36,531 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:36,531 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:36,531 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 68.15it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 87.64it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 65.51it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 65.18it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:36,580 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:36,580 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:36,580 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:36 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:36,580 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:36 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:36,580 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:36,580 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.33 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:36,582 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.33 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:36,582 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:36,582 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 69.58it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 134.11it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.86it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.59it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:36,634 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:36,634 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:36,634 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:36,634 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:36,634 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 72.01it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 139.78it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.41it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.16it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:36,689 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:36,689 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:36,689 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:36,700 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:36,701 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:36,711 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:36,711 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:36,720 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:36,721 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:36,721 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:36,721 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:36,721 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:36,725 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:36,725 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:36,726 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.6932323]
2025-09-12 05:40:36,726 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.30
2025-09-12 05:40:36 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.94% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:36,729 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.94% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:36,729 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:36,729 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:36 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.31% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:36,733 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.31% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020026 @ 83849.80000000 | Valeur: 16.79 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.30 USDT
2025-09-12 05:40:36,733 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020026 @ 83849.80000000 | Valeur: 16.79 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.30 USDT
2025-09-12 05:40:36 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.94% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 13 (0W/6L)
2025-09-12 05:40:36,734 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.94% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 13 (0W/6L)
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.22/10.25 USDT (1.1%/50.0%), Solde dispo: 3.49 USDT
2025-09-12 05:40:36,734 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.22/10.25 USDT (1.1%/50.0%), Solde dispo: 3.49 USDT
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.22/10.25 USDT (1.1%/50.0%), Solde dispo: 3.49 USDT
2025-09-12 05:40:36,735 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.22/10.25 USDT (1.1%/50.0%), Solde dispo: 3.49 USDT
2025-09-12 05:40:36,735 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:36,735 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.28, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:36,735 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:36,735 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:36,735 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 56.78it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 83.23it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.30it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.04it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:36,788 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:36,788 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:36,788 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:36 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:36,788 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:36 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:36,788 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:36,788 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020026 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.26 USDT | Équité: 3.49 USDT
2025-09-12 05:40:36,790 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020026 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.26 USDT | Équité: 3.49 USDT
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.28 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:36,790 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.28 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:36,790 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:36,790 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 81.09it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 110.67it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.52it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.24it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:36,850 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:36,850 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:36,850 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:36,850 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:36,850 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 74.28it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 88.36it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.20it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 55.96it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:36,906 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:36,907 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:36,907 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:36,917 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:36,918 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:36,928 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:36,929 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:36,938 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:36,939 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:36 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:36,940 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:36,940 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:36,940 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:36,940 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:36,941 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:36,941 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [1.]
2025-09-12 05:40:36,941 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.33
2025-09-12 05:40:36 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.92% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 10 (0W/5L)
2025-09-12 05:40:36,943 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.92% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 10 (0W/5L)
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:36,943 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:36,943 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:36 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.31% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:36,946 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.31% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020061 @ 83849.80000000 | Valeur: 16.82 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.33 USDT
2025-09-12 05:40:36,947 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020061 @ 83849.80000000 | Valeur: 16.82 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.33 USDT
2025-09-12 05:40:36 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.92% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 11 (0W/5L)
2025-09-12 05:40:36,947 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.92% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 11 (0W/5L)
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.19/10.25 USDT (0.9%/50.0%), Solde dispo: 3.49 USDT
2025-09-12 05:40:36,947 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.19/10.25 USDT (0.9%/50.0%), Solde dispo: 3.49 USDT
2025-09-12 05:40:36 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.19/10.25 USDT (0.9%/50.0%), Solde dispo: 3.49 USDT
2025-09-12 05:40:36,947 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.19/10.25 USDT (0.9%/50.0%), Solde dispo: 3.49 USDT
2025-09-12 05:40:36,948 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:36,948 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.31, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:36,948 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:36,948 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:36 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:36,948 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 53.71it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 102.38it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.09it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.86it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:37,002 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:37,002 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:37,002 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:37 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:37,002 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:37 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:37,002 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:37,002 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020061 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.30 USDT | Équité: 3.49 USDT
2025-09-12 05:40:37,004 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020061 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.30 USDT | Équité: 3.49 USDT
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.31 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:37,004 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.31 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:37,004 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:37,004 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 113.50it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 147.49it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.61it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.32it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:37,054 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:37,054 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:37,054 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:37,055 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:37,055 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 71.52it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 137.71it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.43it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.18it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:37,110 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:37,110 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:37,110 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:37,121 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:37,122 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:37,131 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:37,132 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:37,141 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:37,142 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:37,142 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:37,142 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:37,143 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:37,143 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:37,143 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:37,144 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [1.]
2025-09-12 05:40:37,144 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.26
2025-09-12 05:40:37 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.96% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 14 (0W/7L)
2025-09-12 05:40:37,146 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.96% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 14 (0W/7L)
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.24/10.25 USDT (1.2%/50.0%), Solde dispo: 20.26 USDT
2025-09-12 05:40:37,146 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.24/10.25 USDT (1.2%/50.0%), Solde dispo: 20.26 USDT
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.24/10.25 USDT (1.2%/50.0%), Solde dispo: 20.26 USDT
2025-09-12 05:40:37,146 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.24/10.25 USDT (1.2%/50.0%), Solde dispo: 20.26 USDT
2025-09-12 05:40:37 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.31% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:37,150 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.31% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019990 @ 83849.80000000 | Valeur: 16.76 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.26 USDT
2025-09-12 05:40:37,150 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019990 @ 83849.80000000 | Valeur: 16.76 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.26 USDT
2025-09-12 05:40:37 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.96% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 15 (0W/7L)
2025-09-12 05:40:37,151 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.96% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 15 (0W/7L)
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.25/10.25 USDT (1.2%/50.0%), Solde dispo: 3.49 USDT
2025-09-12 05:40:37,151 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.25/10.25 USDT (1.2%/50.0%), Solde dispo: 3.49 USDT
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.25/10.25 USDT (1.2%/50.0%), Solde dispo: 3.49 USDT
2025-09-12 05:40:37,151 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.25/10.25 USDT (1.2%/50.0%), Solde dispo: 3.49 USDT
2025-09-12 05:40:37,151 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:37,151 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.25, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:37,151 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:37,151 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:37,151 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 67.36it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 129.75it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 55.55it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 55.32it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:37,208 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:37,208 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:37,208 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:37 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:37,209 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:37 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:37,209 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:37,209 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019990 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.23 USDT | Équité: 3.49 USDT
2025-09-12 05:40:37,210 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019990 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.23 USDT | Équité: 3.49 USDT
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.25 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:37,210 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.25 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:37,211 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:37,211 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 81.29it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 128.47it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.28it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.05it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:37,267 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:37,267 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:37,267 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:37,267 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:37,267 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 84.52it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 131.25it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.77it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.49it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:37,319 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:37,320 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:37,320 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:37,331 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:37,331 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:37,342 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:37,342 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:37,352 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:37,353 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:37,354 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:37,354 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:37,354 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:37,354 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:37,354 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:37,355 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.00574073]
2025-09-12 05:40:37,355 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.33
2025-09-12 05:40:37 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 10 (0W/5L)
2025-09-12 05:40:37,357 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 10 (0W/5L)
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:37,357 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:37,357 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:37 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.31% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:37,361 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.31% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:37 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 10 (0W/5L)
2025-09-12 05:40:37,362 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 10 (0W/5L)
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:37,362 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:37,362 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:37,362 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:37,362 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.33, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:37,362 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:37,362 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:37,362 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 79.91it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 104.75it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 64.18it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.84it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:37,412 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:37,412 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:37,412 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:37 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:37,412 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:37 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:37,412 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:37,412 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.33 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:37,414 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.33 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:37,414 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:37,414 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 80.34it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 97.72it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.35it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.09it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:37,468 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:37,468 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:37,468 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:37,468 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:37,469 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 57.07it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 108.09it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.93it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.61it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:37,518 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:37,518 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:37,519 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:37,529 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:37,530 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:37,540 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:37,540 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:37,550 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:37,551 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:37,551 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:37,551 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:37,552 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:37,556 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:37,557 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:37,557 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.7419627]
2025-09-12 05:40:37,558 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.26
2025-09-12 05:40:37 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.98% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 14 (0W/7L)
2025-09-12 05:40:37,560 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.98% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 14 (0W/7L)
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.24/10.25 USDT (1.2%/50.0%), Solde dispo: 20.26 USDT
2025-09-12 05:40:37,560 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.24/10.25 USDT (1.2%/50.0%), Solde dispo: 20.26 USDT
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.24/10.25 USDT (1.2%/50.0%), Solde dispo: 20.26 USDT
2025-09-12 05:40:37,560 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.24/10.25 USDT (1.2%/50.0%), Solde dispo: 20.26 USDT
2025-09-12 05:40:37 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.26% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:37,565 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.26% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019995 @ 83849.80000000 | Valeur: 16.77 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.26 USDT
2025-09-12 05:40:37,565 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019995 @ 83849.80000000 | Valeur: 16.77 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.26 USDT
2025-09-12 05:40:37 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.98% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 15 (0W/7L)
2025-09-12 05:40:37,566 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.98% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 15 (0W/7L)
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.25/10.25 USDT (1.2%/50.0%), Solde dispo: 3.48 USDT
2025-09-12 05:40:37,566 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.25/10.25 USDT (1.2%/50.0%), Solde dispo: 3.48 USDT
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.25/10.25 USDT (1.2%/50.0%), Solde dispo: 3.48 USDT
2025-09-12 05:40:37,566 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.25/10.25 USDT (1.2%/50.0%), Solde dispo: 3.48 USDT
2025-09-12 05:40:37,566 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:37,566 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.25, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:37,566 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:37,566 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:37,566 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 36.98it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 71.85it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 51.38it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 51.17it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:37,628 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:37,628 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:37,628 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:37 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:37,628 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:37 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:37,628 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:37,629 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019995 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.23 USDT | Équité: 3.48 USDT
2025-09-12 05:40:37,630 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019995 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.23 USDT | Équité: 3.48 USDT
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.25 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:37,630 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.25 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:37,630 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:37,631 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 49.83it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 93.99it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.54it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.30it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:37,686 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:37,686 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:37,686 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:37,686 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:37,686 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 75.58it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 115.38it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.81it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.53it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:37,737 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:37,737 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:37,737 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:37,748 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:37,749 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:37,758 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:37,759 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:37,769 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:37,769 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:37,770 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:37,770 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:37,770 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:37,770 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:37,771 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:37,771 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.07309899]
2025-09-12 05:40:37,772 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.30
2025-09-12 05:40:37 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.96% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:37,773 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.96% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:37,773 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:37,773 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:37 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.26% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:37,776 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.26% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:37 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.96% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:37,777 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.96% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:37,777 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:37,777 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:37,777 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:37,777 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.30, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:37,777 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:37,777 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:37,778 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 87.26it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 85.11it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.18it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.90it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:37,829 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:37,829 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:37,829 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:37 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:37,829 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:37 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:37,829 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:37,829 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.30 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:37,831 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.30 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:37,831 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:37,831 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 87.29it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 105.88it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.14it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.88it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:37,885 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:37,885 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:37,886 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:37,886 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:37,886 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 76.98it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 80.84it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.19it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.94it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:37,940 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:37,940 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:37,940 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:37,950 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:37,951 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:37,961 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:37,962 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:37,972 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:37,973 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:37 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:37,973 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:37,973 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:37,973 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:37,974 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:37,974 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:37,975 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.13423367]
2025-09-12 05:40:37,975 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.23
2025-09-12 05:40:37 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 16 (0W/8L)
2025-09-12 05:40:37,977 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 16 (0W/8L)
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:37,977 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:37,977 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:37 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.26% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:37,980 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.26% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:37 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 16 (0W/8L)
2025-09-12 05:40:37,981 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 16 (0W/8L)
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:37,981 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:37 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:37,981 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:37,981 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:37,981 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.23, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:37,981 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:37,981 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:37 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:37,981 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 86.40it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 100.72it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.59it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.31it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:38,033 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:38,033 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:38,033 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:38 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:38,033 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:38 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:38,033 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:38,033 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.23 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:38,035 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.23 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:38,035 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:38,035 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 83.81it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 105.99it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.79it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.54it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:38,087 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:38,087 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:38,087 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:38,087 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:38,087 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 93.16it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 67.41it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 70.09it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 69.69it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:38,133 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:38,133 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:38,133 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:38,145 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:38,145 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:38,156 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:38,156 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:38,168 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:38,169 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:38,169 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:38,170 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:38,170 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:38,170 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:38,170 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:38,172 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-1.]
2025-09-12 05:40:38,172 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.33
2025-09-12 05:40:38 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 10 (0W/5L)
2025-09-12 05:40:38,174 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 10 (0W/5L)
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:38,174 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:38,174 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:38 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.26% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:38,178 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.26% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:38 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 10 (0W/5L)
2025-09-12 05:40:38,178 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 10 (0W/5L)
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:38,179 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:38,179 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:38,179 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:38,179 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.33, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:38,179 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:38,179 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:38,179 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 60.08it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 114.94it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.24it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.99it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:38,234 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:38,234 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:38,234 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:38 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:38,234 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:38 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:38,234 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:38,234 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.33 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:38,236 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.33 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:38,236 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:38,236 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 75.28it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 145.15it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.29it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.98it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:38,288 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:38,288 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:38,288 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:38,288 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:38,288 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 68.37it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 106.25it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.73it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.46it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:38,339 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:38,339 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:38,340 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:38,351 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:38,352 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:38,362 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:38,362 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:38,374 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:38,374 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:38,375 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:38,375 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:38,375 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:38,379 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:38,379 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:38,380 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-1.]
2025-09-12 05:40:38,380 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.23
2025-09-12 05:40:38 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.02% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 16 (0W/8L)
2025-09-12 05:40:38,382 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.02% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 16 (0W/8L)
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:38,382 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:38,382 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:38 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.22% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:38,386 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.22% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:38 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.02% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 16 (0W/8L)
2025-09-12 05:40:38,387 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.02% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 16 (0W/8L)
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:38,387 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:38,387 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:38,388 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:38,388 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.23, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:38,388 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:38,388 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:38,388 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 80.67it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 67.30it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 51.05it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 50.85it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:38,450 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:38,450 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:38,450 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:38 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:38,450 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:38 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:38,450 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:38,450 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.23 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:38,452 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.23 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:38,452 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:38,452 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 70.52it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 134.49it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.36it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.08it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:38,504 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:38,504 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:38,505 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:38,505 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:38,505 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 54.84it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 98.16it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 64.56it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 64.25it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:38,554 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:38,554 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:38,555 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:38,565 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:38,566 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:38,577 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:38,578 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:38,587 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:38,588 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:38,588 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:38,588 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:38,588 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:38,589 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:38,589 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:38,590 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.05929935]
2025-09-12 05:40:38,590 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.30
2025-09-12 05:40:38 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.96% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:38,591 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.96% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:38,592 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:38,592 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:38 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.22% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:38,595 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.22% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:38 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.96% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:38,595 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.96% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:38,596 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:38,596 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:38,596 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:38,596 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.30, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:38,596 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:38,596 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:38,596 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 85.83it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 113.71it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.45it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.15it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:38,648 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:38,648 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:38,648 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:38 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:38,648 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:38 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:38,648 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:38,648 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.30 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:38,650 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.30 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:38,650 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:38,650 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 83.06it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 96.77it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 69.46it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 69.08it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:38,696 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:38,697 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:38,697 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:38,697 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:38,697 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 49.83it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 95.30it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.12it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.86it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:38,751 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:38,751 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:38,751 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:38,761 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:38,762 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:38,772 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:38,773 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:38,783 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:38,784 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:38,784 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:38,784 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:38,785 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:38,785 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:38,785 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:38,786 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.1400835]
2025-09-12 05:40:38,786 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.23
2025-09-12 05:40:38 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 16 (0W/8L)
2025-09-12 05:40:38,788 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 16 (0W/8L)
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:38,788 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:38,788 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:38 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.22% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:38,791 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.22% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019961 @ 83849.80000000 | Valeur: 16.74 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.23 USDT
2025-09-12 05:40:38,791 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019961 @ 83849.80000000 | Valeur: 16.74 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.23 USDT
2025-09-12 05:40:38 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 17 (0W/8L)
2025-09-12 05:40:38,792 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.00% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 17 (0W/8L)
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.29/10.25 USDT (1.4%/50.0%), Solde dispo: 3.48 USDT
2025-09-12 05:40:38,792 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.29/10.25 USDT (1.4%/50.0%), Solde dispo: 3.48 USDT
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.29/10.25 USDT (1.4%/50.0%), Solde dispo: 3.48 USDT
2025-09-12 05:40:38,792 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.29/10.25 USDT (1.4%/50.0%), Solde dispo: 3.48 USDT
2025-09-12 05:40:38,793 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:38,793 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.21, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:38,793 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:38,793 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:38,793 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 92.44it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 114.26it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 64.67it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 64.37it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:38,841 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:38,842 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:38,842 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:38 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:38,842 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:38 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:38,842 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:38,842 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019961 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.20 USDT | Équité: 3.48 USDT
2025-09-12 05:40:38,843 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019961 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.20 USDT | Équité: 3.48 USDT
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.21 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:38,844 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.21 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:38,844 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:38,844 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 82.50it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 130.75it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 55.33it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 55.10it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:38,901 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:38,901 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:38,901 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:38,901 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:38,901 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 49.53it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 94.31it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.60it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.34it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:38,955 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:38,955 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:38,955 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:38,965 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:38,966 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:38,976 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:38,977 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:38,986 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:38,986 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:38 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:38,987 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:38,987 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:38,987 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:38,987 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:38,987 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:38,988 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.3766751]
2025-09-12 05:40:38,988 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.33
2025-09-12 05:40:38 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 10 (0W/5L)
2025-09-12 05:40:38,990 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 10 (0W/5L)
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:38,990 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:38,990 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.17/10.25 USDT (0.8%/50.0%), Solde dispo: 20.33 USDT
2025-09-12 05:40:38 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.22% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:38,994 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.22% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020066 @ 83849.80000000 | Valeur: 16.83 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.33 USDT
2025-09-12 05:40:38,994 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020066 @ 83849.80000000 | Valeur: 16.83 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.33 USDT
2025-09-12 05:40:38 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 11 (0W/5L)
2025-09-12 05:40:38,995 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.90% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 11 (0W/5L)
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.19/10.25 USDT (0.9%/50.0%), Solde dispo: 3.49 USDT
2025-09-12 05:40:38,995 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.19/10.25 USDT (0.9%/50.0%), Solde dispo: 3.49 USDT
2025-09-12 05:40:38 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.19/10.25 USDT (0.9%/50.0%), Solde dispo: 3.49 USDT
2025-09-12 05:40:38,995 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.19/10.25 USDT (0.9%/50.0%), Solde dispo: 3.49 USDT
2025-09-12 05:40:38,995 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:38,995 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.31, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:38,995 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:38,995 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:38 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:38,995 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 70.53it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 134.75it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.26it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.96it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:39,046 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:39,046 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:39,047 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:39 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:39,047 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:39 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:39,047 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:39,047 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020066 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.30 USDT | Équité: 3.49 USDT
2025-09-12 05:40:39,048 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020066 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.30 USDT | Équité: 3.49 USDT
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.31 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:39,049 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.31 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:39,049 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:39,049 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 80.94it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 95.80it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.53it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.29it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:39,103 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:39,103 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:39,103 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:39,103 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:39,103 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 75.68it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 106.34it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 53.93it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 53.72it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:39,161 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:39,162 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:39,162 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:39,173 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:39,174 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:39,185 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:39,186 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:39,196 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:39,197 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:39,198 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:39,198 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:39,198 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:39,202 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:39,203 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:39,204 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.37490588]
2025-09-12 05:40:39,204 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.23
2025-09-12 05:40:39 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.02% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 16 (0W/8L)
2025-09-12 05:40:39,206 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.02% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 16 (0W/8L)
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:39,207 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:39,207 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:39 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.17% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:39,211 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.17% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019965 @ 83849.80000000 | Valeur: 16.74 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.23 USDT
2025-09-12 05:40:39,212 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019965 @ 83849.80000000 | Valeur: 16.74 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.23 USDT
2025-09-12 05:40:39 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.02% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 17 (0W/8L)
2025-09-12 05:40:39,213 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.02% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 17 (0W/8L)
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.29/10.25 USDT (1.4%/50.0%), Solde dispo: 3.47 USDT
2025-09-12 05:40:39,213 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.29/10.25 USDT (1.4%/50.0%), Solde dispo: 3.47 USDT
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.29/10.25 USDT (1.4%/50.0%), Solde dispo: 3.47 USDT
2025-09-12 05:40:39,213 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.29/10.25 USDT (1.4%/50.0%), Solde dispo: 3.47 USDT
2025-09-12 05:40:39,213 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:39,213 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.21, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:39,214 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:39,214 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:39,214 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 51.35it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 98.24it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 53.77it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 53.55it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:39,273 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:39,273 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:39,273 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:39 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:39,273 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:39 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:39,273 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:39,273 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019965 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.20 USDT | Équité: 3.47 USDT
2025-09-12 05:40:39,275 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019965 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.20 USDT | Équité: 3.47 USDT
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.21 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:39,275 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.21 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:39,275 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:39,275 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 54.74it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 104.60it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.34it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.04it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:39,326 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:39,326 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:39,326 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:39,326 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:39,326 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 41.83it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 80.27it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.19it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.91it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:39,377 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:39,377 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:39,377 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:39,388 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:39,388 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:39,398 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:39,398 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:39,408 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:39,409 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:39,409 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:39,409 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:39,409 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:39,410 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:39,410 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:39,411 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.35475013]
2025-09-12 05:40:39,411 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.30
2025-09-12 05:40:39 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.96% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:39,412 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.96% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:39,413 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:39,413 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:39 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.17% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:39,416 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.17% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020035 @ 83849.80000000 | Valeur: 16.80 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.30 USDT
2025-09-12 05:40:39,416 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020035 @ 83849.80000000 | Valeur: 16.80 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.30 USDT
2025-09-12 05:40:39 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.96% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 13 (0W/6L)
2025-09-12 05:40:39,417 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.96% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 13 (0W/6L)
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.22/10.25 USDT (1.1%/50.0%), Solde dispo: 3.48 USDT
2025-09-12 05:40:39,417 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.22/10.25 USDT (1.1%/50.0%), Solde dispo: 3.48 USDT
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.22/10.25 USDT (1.1%/50.0%), Solde dispo: 3.48 USDT
2025-09-12 05:40:39,417 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.22/10.25 USDT (1.1%/50.0%), Solde dispo: 3.48 USDT
2025-09-12 05:40:39,417 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:39,417 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.28, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:39,417 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:39,417 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:39,417 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 57.94it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 110.07it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.70it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.44it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:39,470 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:39,471 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:39,471 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:39 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:39,471 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:39 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:39,471 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:39,471 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020035 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.26 USDT | Équité: 3.48 USDT
2025-09-12 05:40:39,473 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020035 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.26 USDT | Équité: 3.48 USDT
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.28 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:39,473 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.28 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:39,473 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:39,473 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 62.78it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 116.39it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.37it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.13it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:39,528 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:39,528 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:39,528 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:39,528 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:39,528 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 56.72it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 108.78it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 71.66it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 71.28it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.04 secondes
2025-09-12 05:40:39,573 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.04 secondes
2025-09-12 05:40:39,573 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:39,573 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:39,584 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:39,585 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:39,595 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:39,595 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:39,605 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:39,607 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:39,607 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:39,607 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:39,607 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:39,608 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:39,608 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:39,609 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [1.]
2025-09-12 05:40:39,609 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.20
2025-09-12 05:40:39 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.04% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 18 (0W/9L)
2025-09-12 05:40:39,610 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.04% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 18 (0W/9L)
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:39,611 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:39,611 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:39 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 3.17% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:39,614 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 3.17% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019929 @ 83849.80000000 | Valeur: 16.71 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.20 USDT
2025-09-12 05:40:39,614 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019929 @ 83849.80000000 | Valeur: 16.71 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.20 USDT
2025-09-12 05:40:39 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.04% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 19 (0W/9L)
2025-09-12 05:40:39,615 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.04% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 19 (0W/9L)
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.32/10.25 USDT (1.6%/50.0%), Solde dispo: 3.47 USDT
2025-09-12 05:40:39,615 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.32/10.25 USDT (1.6%/50.0%), Solde dispo: 3.47 USDT
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.32/10.25 USDT (1.6%/50.0%), Solde dispo: 3.47 USDT
2025-09-12 05:40:39,615 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.32/10.25 USDT (1.6%/50.0%), Solde dispo: 3.47 USDT
2025-09-12 05:40:39,615 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:39,615 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.18, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:39,615 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:39,615 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:39,615 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 84.89it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 135.79it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 73.98it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 73.54it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.04 secondes
2025-09-12 05:40:39,658 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.04 secondes
2025-09-12 05:40:39,659 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:39,659 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:39 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:39,659 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:39 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:39,659 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:39,659 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019929 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.16 USDT | Équité: 3.47 USDT
2025-09-12 05:40:39,661 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019929 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.16 USDT | Équité: 3.47 USDT
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.18 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:39,661 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.18 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:39,661 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:39,661 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 77.50it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 150.31it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.81it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.57it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:39,716 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:39,716 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:39,716 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:39,716 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:39,716 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 81.64it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 148.68it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 68.91it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 68.53it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:39,763 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:39,763 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:39,763 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:39,774 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:39,775 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:39,785 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:39,785 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:39,794 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:39,795 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:39,795 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:39,795 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:39,796 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:39,796 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:39,796 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:39,797 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-1.]
2025-09-12 05:40:39,797 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.30
2025-09-12 05:40:39 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.98% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:39,799 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.98% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:39,799 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:39,799 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:39 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.17% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:39,802 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.17% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:39 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.98% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:39,803 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.98% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:39,803 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:39,803 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:39,803 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:39,803 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.30, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:39,803 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:39,803 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:39,803 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 53.61it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 102.64it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.96it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.72it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:39,858 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:39,858 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:39,858 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:39 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:39,859 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:39 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:39,859 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:39,859 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:39 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.30 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:39,860 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.30 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:39,860 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:39,860 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 69.74it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 134.75it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 54.32it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 54.10it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:39,918 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:39,919 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:39,919 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:39,919 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:39,919 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 84.96it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 86.58it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 71.55it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 71.15it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:39 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.04 secondes
2025-09-12 05:40:39,964 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.04 secondes
2025-09-12 05:40:39,964 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:39,964 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:39,975 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:39,976 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:39,987 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:39,987 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:39,997 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:39,997 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:39 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:39,998 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:39,998 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:39,998 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:40,002 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:40,003 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:40,004 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.9934364]
2025-09-12 05:40:40,004 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.20
2025-09-12 05:40:40 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.06% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 18 (0W/9L)
2025-09-12 05:40:40,006 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.06% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 18 (0W/9L)
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:40,006 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:40,007 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:40 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 3.13% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:40,011 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 3.13% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019933 @ 83849.80000000 | Valeur: 16.71 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.20 USDT
2025-09-12 05:40:40,012 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019933 @ 83849.80000000 | Valeur: 16.71 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.20 USDT
2025-09-12 05:40:40 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.06% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 19 (0W/9L)
2025-09-12 05:40:40,013 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.06% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 19 (0W/9L)
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.32/10.25 USDT (1.6%/50.0%), Solde dispo: 3.47 USDT
2025-09-12 05:40:40,014 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.32/10.25 USDT (1.6%/50.0%), Solde dispo: 3.47 USDT
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.32/10.25 USDT (1.6%/50.0%), Solde dispo: 3.47 USDT
2025-09-12 05:40:40,014 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.32/10.25 USDT (1.6%/50.0%), Solde dispo: 3.47 USDT
2025-09-12 05:40:40,014 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:40,014 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.18, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:40,014 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:40,014 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:40,014 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 46.43it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 89.82it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 50.99it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 50.78it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:40,077 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:40,077 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:40,077 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:40 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:40,077 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:40 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:40,077 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:40,077 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019933 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.16 USDT | Équité: 3.47 USDT
2025-09-12 05:40:40,079 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019933 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.16 USDT | Équité: 3.47 USDT
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.18 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:40,079 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.18 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:40,079 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:40,079 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 86.47it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 143.96it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.41it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.15it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:40,132 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:40,133 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:40,133 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:40,133 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:40,133 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 60.42it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 115.80it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 67.58it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 67.23it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:40,180 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:40,180 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:40,180 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:40,192 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:40,193 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:40,204 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:40,204 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:40,214 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:40,215 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:40,216 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:40,216 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:40,216 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:40,216 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:40,217 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:40,217 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.54586935]
2025-09-12 05:40:40,218 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.26
2025-09-12 05:40:40 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.02% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 14 (0W/7L)
2025-09-12 05:40:40,219 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.02% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 14 (0W/7L)
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.24/10.25 USDT (1.2%/50.0%), Solde dispo: 20.26 USDT
2025-09-12 05:40:40,220 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.24/10.25 USDT (1.2%/50.0%), Solde dispo: 20.26 USDT
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.24/10.25 USDT (1.2%/50.0%), Solde dispo: 20.26 USDT
2025-09-12 05:40:40,220 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.24/10.25 USDT (1.2%/50.0%), Solde dispo: 20.26 USDT
2025-09-12 05:40:40 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.13% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:40,223 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.13% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020004 @ 83849.80000000 | Valeur: 16.77 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.26 USDT
2025-09-12 05:40:40,223 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020004 @ 83849.80000000 | Valeur: 16.77 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.26 USDT
2025-09-12 05:40:40 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.02% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 15 (0W/7L)
2025-09-12 05:40:40,224 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.02% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 15 (0W/7L)
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.25/10.25 USDT (1.2%/50.0%), Solde dispo: 3.47 USDT
2025-09-12 05:40:40,224 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.25/10.25 USDT (1.2%/50.0%), Solde dispo: 3.47 USDT
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.25/10.25 USDT (1.2%/50.0%), Solde dispo: 3.47 USDT
2025-09-12 05:40:40,225 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.25/10.25 USDT (1.2%/50.0%), Solde dispo: 3.47 USDT
2025-09-12 05:40:40,225 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:40,225 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.25, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:40,225 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:40,225 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:40,225 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 59.93it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 112.77it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 72.41it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 72.03it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.04 secondes
2025-09-12 05:40:40,269 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.04 secondes
2025-09-12 05:40:40,269 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:40,269 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:40 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:40,269 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:40 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:40,269 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:40,270 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020004 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.23 USDT | Équité: 3.47 USDT
2025-09-12 05:40:40,271 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020004 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.23 USDT | Équité: 3.47 USDT
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.25 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:40,271 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.25 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:40,271 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:40,272 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 68.99it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 90.62it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.43it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.20it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:40,327 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:40,327 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:40,327 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:40,328 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:40,328 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 47.71it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 90.90it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 65.27it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 64.97it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:40,377 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:40,377 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:40,377 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:40,388 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:40,389 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:40,399 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:40,399 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:40,409 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:40,410 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:40,410 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:40,410 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:40,410 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:40,410 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:40,411 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:40,412 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.3148917]
2025-09-12 05:40:40,412 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.16
2025-09-12 05:40:40 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.07% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:40,413 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.07% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:40,413 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:40,414 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:40 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 3.13% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:40,418 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 3.13% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:40 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.07% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:40,418 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.07% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:40,418 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:40,419 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:40,419 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:40,419 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.16, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:40,419 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:40,419 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:40,419 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 81.50it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 75.93it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.97it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.68it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:40,472 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:40,472 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:40,472 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:40 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:40,472 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:40 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:40,472 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:40,472 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.16 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:40,474 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.16 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:40,474 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:40,474 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 70.30it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 84.64it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.75it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.52it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:40,529 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:40,529 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:40,529 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:40,529 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:40,529 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 48.63it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 93.10it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.23it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.96it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:40,583 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:40,583 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:40,583 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:40,594 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:40,595 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:40,605 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:40,606 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:40,616 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:40,616 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:40,617 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:40,617 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:40,617 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:40,617 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:40,618 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:40,618 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [1.]
2025-09-12 05:40:40,619 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.30
2025-09-12 05:40:40 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.98% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:40,621 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.98% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 12 (0W/6L)
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:40,621 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:40,621 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.20/10.25 USDT (1.0%/50.0%), Solde dispo: 20.30 USDT
2025-09-12 05:40:40 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.13% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:40,625 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.13% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020037 @ 83849.80000000 | Valeur: 16.80 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.30 USDT
2025-09-12 05:40:40,625 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020037 @ 83849.80000000 | Valeur: 16.80 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.30 USDT
2025-09-12 05:40:40 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.98% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 13 (0W/6L)
2025-09-12 05:40:40,626 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 82.98% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 13 (0W/6L)
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.22/10.25 USDT (1.1%/50.0%), Solde dispo: 3.48 USDT
2025-09-12 05:40:40,626 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.22/10.25 USDT (1.1%/50.0%), Solde dispo: 3.48 USDT
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.22/10.25 USDT (1.1%/50.0%), Solde dispo: 3.48 USDT
2025-09-12 05:40:40,626 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.22/10.25 USDT (1.1%/50.0%), Solde dispo: 3.48 USDT
2025-09-12 05:40:40,626 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:40,626 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.28, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:40,626 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:40,626 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:40,626 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 51.54it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 99.14it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.08it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.82it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:40,677 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:40,677 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:40,677 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:40 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:40,677 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:40 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:40,677 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:40,677 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020037 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.26 USDT | Équité: 3.48 USDT
2025-09-12 05:40:40,679 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020037 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.26 USDT | Équité: 3.48 USDT
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.28 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:40,679 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.28 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:40,679 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:40,679 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 52.70it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 83.77it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 70.94it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 70.56it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:40,725 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:40,725 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:40,725 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:40,726 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:40,726 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 79.70it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 131.59it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.82it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.57it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:40,780 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:40,780 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:40,780 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:40,791 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:40,792 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:40,802 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:40,803 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:40,812 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:40,813 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:40,813 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:40,814 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:40,814 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:40,817 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:40,818 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:40,819 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-1.]
2025-09-12 05:40:40,819 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.16
2025-09-12 05:40:40 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:40,821 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:40,821 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:40,821 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:40 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 3.09% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:40,826 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 3.09% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:40 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:40,827 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:40,827 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:40,827 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:40,827 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:40,828 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.16, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:40,828 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:40,828 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:40,828 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 60.82it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 66.71it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 52.27it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 52.06it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:40,888 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:40,889 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:40,889 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:40 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:40,889 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:40 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:40,889 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:40,889 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:40 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.16 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:40,890 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.16 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:40,891 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:40,891 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 90.24it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 127.52it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.26it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.00it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:40,945 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:40,945 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:40,945 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:40,945 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:40,945 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 74.60it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 81.10it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.39it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.09it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:40 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:40,996 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:40,996 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:40 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:40,996 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:41,007 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:41,008 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:41,018 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:41,018 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:41,028 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:41,028 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:41,029 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:41,029 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:41,029 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:41,029 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:41,030 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:41,030 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.64669967]
2025-09-12 05:40:41,030 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.23
2025-09-12 05:40:41 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.05% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 16 (0W/8L)
2025-09-12 05:40:41,032 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.05% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 16 (0W/8L)
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:41,032 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:41,032 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:41 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.09% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:41,036 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.09% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019973 @ 83849.80000000 | Valeur: 16.75 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.23 USDT
2025-09-12 05:40:41,037 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019973 @ 83849.80000000 | Valeur: 16.75 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.23 USDT
2025-09-12 05:40:41 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.05% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 17 (0W/8L)
2025-09-12 05:40:41,037 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.05% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 17 (0W/8L)
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.29/10.25 USDT (1.4%/50.0%), Solde dispo: 3.47 USDT
2025-09-12 05:40:41,037 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.29/10.25 USDT (1.4%/50.0%), Solde dispo: 3.47 USDT
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.29/10.25 USDT (1.4%/50.0%), Solde dispo: 3.47 USDT
2025-09-12 05:40:41,038 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.29/10.25 USDT (1.4%/50.0%), Solde dispo: 3.47 USDT
2025-09-12 05:40:41,038 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:41,038 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.21, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:41,038 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:41,038 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:41,038 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 79.86it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 98.89it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.18it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.92it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:41,088 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:41,088 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:41,088 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:41 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:41,088 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:41 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:41,088 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:41,088 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019973 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.20 USDT | Équité: 3.47 USDT
2025-09-12 05:40:41,090 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019973 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.20 USDT | Équité: 3.47 USDT
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.21 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:41,090 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.21 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:41,090 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:41,090 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 83.12it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 101.49it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.80it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.52it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:41,142 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:41,143 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:41,143 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:41,143 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:41,143 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 108.58it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 106.64it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.51it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.25it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:41,198 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:41,198 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:41,198 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:41,211 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:41,212 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:41,223 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:41,224 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:41,234 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:41,234 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:41,235 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:41,235 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:41,235 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:41,235 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:41,236 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:41,237 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.4233736]
2025-09-12 05:40:41,237 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.16
2025-09-12 05:40:41 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.07% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:41,239 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.07% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:41,239 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:41,239 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:41 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 3.09% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:41,242 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 3.09% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:41 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.07% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:41,243 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.07% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:41,243 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:41,243 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:41,243 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:41,244 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.16, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:41,244 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:41,244 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:41,244 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 72.52it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 138.98it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.13it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.87it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:41,297 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:41,298 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:41,298 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:41 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:41,298 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:41 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:41,298 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:41,298 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.16 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:41,299 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.16 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:41,299 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:41,300 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 54.59it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 103.36it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.51it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.25it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:41,354 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:41,355 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:41,355 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:41,355 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:41,355 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 73.39it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 69.44it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 47.76it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 47.58it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.07 secondes
2025-09-12 05:40:41,421 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.07 secondes
2025-09-12 05:40:41,421 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:41,421 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:41,432 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:41,433 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:41,443 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:41,444 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:41,454 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:41,454 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:41,455 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:41,455 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:41,455 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:41,455 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:41,455 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:41,456 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.66709596]
2025-09-12 05:40:41,456 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.26
2025-09-12 05:40:41 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.03% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 14 (0W/7L)
2025-09-12 05:40:41,458 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.03% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 14 (0W/7L)
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.24/10.25 USDT (1.2%/50.0%), Solde dispo: 20.26 USDT
2025-09-12 05:40:41,458 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.24/10.25 USDT (1.2%/50.0%), Solde dispo: 20.26 USDT
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.24/10.25 USDT (1.2%/50.0%), Solde dispo: 20.26 USDT
2025-09-12 05:40:41,458 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.24/10.25 USDT (1.2%/50.0%), Solde dispo: 20.26 USDT
2025-09-12 05:40:41 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.09% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:41,461 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.09% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:41 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.03% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 14 (0W/7L)
2025-09-12 05:40:41,462 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.03% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 14 (0W/7L)
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.24/10.25 USDT (1.2%/50.0%), Solde dispo: 20.26 USDT
2025-09-12 05:40:41,462 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.24/10.25 USDT (1.2%/50.0%), Solde dispo: 20.26 USDT
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.24/10.25 USDT (1.2%/50.0%), Solde dispo: 20.26 USDT
2025-09-12 05:40:41,462 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.24/10.25 USDT (1.2%/50.0%), Solde dispo: 20.26 USDT
2025-09-12 05:40:41,462 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:41,462 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.26, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:41,462 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:41,462 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:41,462 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 79.08it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 131.45it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.63it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.38it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:41,515 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:41,515 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:41,515 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:41 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:41,515 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:41 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:41,515 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:41,515 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.26 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:41,517 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.26 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:41,517 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:41,517 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 66.88it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 128.79it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.63it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.35it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:41,566 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:41,567 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:41,567 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:41,567 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:41,567 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 77.64it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 107.08it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 71.58it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 71.18it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:41,612 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:41,612 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:41,612 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:41,623 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:41,624 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:41,634 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:41,635 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:41,645 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:41,646 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:41,646 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:41,646 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:41,646 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:41,651 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:41,652 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:41,653 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.5407319]
2025-09-12 05:40:41,653 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.16
2025-09-12 05:40:41 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:41,655 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:41,655 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:41,655 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:41 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 3.05% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:41,660 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 3.05% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:41 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:41,661 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:41,661 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:41,661 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:41,662 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:41,662 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.16, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:41,662 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:41,662 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:41,662 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 58.16it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 112.36it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 52.47it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 52.25it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:41,723 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:41,724 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:41,724 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:41 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:41,724 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:41 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:41,724 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:41,724 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.16 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:41,725 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.16 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:41,726 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:41,726 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 75.38it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 97.01it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.70it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.44it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:41,780 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:41,780 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:41,780 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:41,781 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:41,781 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 106.73it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 137.62it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 69.92it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 69.54it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:41,826 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:41,826 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:41,826 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:41,840 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:41,841 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:41,852 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:41,853 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:41,864 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:41,865 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:41 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:41,865 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:41,865 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:41,865 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:41,866 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:41,866 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:41,868 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.59906095]
2025-09-12 05:40:41,868 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.20
2025-09-12 05:40:41 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 18 (0W/9L)
2025-09-12 05:40:41,870 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 18 (0W/9L)
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:41,870 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:41,870 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:41 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.05% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:41,875 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.05% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019941 @ 83849.80000000 | Valeur: 16.72 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.20 USDT
2025-09-12 05:40:41,875 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019941 @ 83849.80000000 | Valeur: 16.72 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.20 USDT
2025-09-12 05:40:41 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 19 (0W/9L)
2025-09-12 05:40:41,877 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 19 (0W/9L)
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.32/10.25 USDT (1.6%/50.0%), Solde dispo: 3.46 USDT
2025-09-12 05:40:41,877 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.32/10.25 USDT (1.6%/50.0%), Solde dispo: 3.46 USDT
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.32/10.25 USDT (1.6%/50.0%), Solde dispo: 3.46 USDT
2025-09-12 05:40:41,877 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.32/10.25 USDT (1.6%/50.0%), Solde dispo: 3.46 USDT
2025-09-12 05:40:41,877 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:41,877 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.18, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:41,877 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:41,877 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:41,877 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 60.68it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 116.61it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.52it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.25it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:41,930 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:41,931 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:41,931 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:41 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:41,931 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:41 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:41,931 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:41,931 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019941 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.16 USDT | Équité: 3.46 USDT
2025-09-12 05:40:41,932 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019941 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.16 USDT | Équité: 3.46 USDT
2025-09-12 05:40:41 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.18 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:41,933 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.18 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:41,933 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:41,933 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 75.37it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 122.14it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 65.03it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 64.72it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:41,983 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:41,983 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:41,983 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:41,983 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:41 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:41,983 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 95.96it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 137.71it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.40it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.12it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:42,037 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:42,037 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:42,037 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:42,048 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:42,049 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:42,060 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:42,061 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:42,070 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:42,071 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:42,071 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:42,071 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:42,072 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:42,072 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:42,072 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:42,073 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [1.]
2025-09-12 05:40:42,073 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.16
2025-09-12 05:40:42 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.07% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:42,075 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.07% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:42,075 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:42,075 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:42 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 3.05% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:42,078 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 3.05% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019899 @ 83849.80000000 | Valeur: 16.69 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.16 USDT
2025-09-12 05:40:42,078 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019899 @ 83849.80000000 | Valeur: 16.69 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.16 USDT
2025-09-12 05:40:42 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.07% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 21 (0W/10L)
2025-09-12 05:40:42,079 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.07% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 21 (0W/10L)
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.35/10.25 USDT (1.7%/50.0%), Solde dispo: 3.46 USDT
2025-09-12 05:40:42,079 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.35/10.25 USDT (1.7%/50.0%), Solde dispo: 3.46 USDT
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.35/10.25 USDT (1.7%/50.0%), Solde dispo: 3.46 USDT
2025-09-12 05:40:42,079 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.35/10.25 USDT (1.7%/50.0%), Solde dispo: 3.46 USDT
2025-09-12 05:40:42,079 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:42,079 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.15, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:42,079 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:42,079 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:42,079 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 53.79it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 103.72it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 65.37it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 64.97it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:42,128 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:42,128 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:42,128 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:42 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:42,128 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:42 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:42,128 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:42,128 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019899 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.13 USDT | Équité: 3.46 USDT
2025-09-12 05:40:42,130 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019899 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.13 USDT | Équité: 3.46 USDT
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.15 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:42,130 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.15 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:42,130 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:42,130 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 82.52it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 149.67it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.69it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.44it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:42,185 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:42,185 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:42,185 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:42,185 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:42,185 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 84.93it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 151.52it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.81it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.49it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:42,235 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:42,235 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:42,236 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:42,246 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:42,247 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:42,257 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:42,258 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:42,268 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:42,269 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:42,269 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:42,269 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:42,270 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:42,270 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:42,270 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:42,271 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.71833175]
2025-09-12 05:40:42,271 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.26
2025-09-12 05:40:42 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.03% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 14 (0W/7L)
2025-09-12 05:40:42,273 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.03% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 14 (0W/7L)
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.24/10.25 USDT (1.2%/50.0%), Solde dispo: 20.26 USDT
2025-09-12 05:40:42,273 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.24/10.25 USDT (1.2%/50.0%), Solde dispo: 20.26 USDT
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.24/10.25 USDT (1.2%/50.0%), Solde dispo: 20.26 USDT
2025-09-12 05:40:42,273 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.24/10.25 USDT (1.2%/50.0%), Solde dispo: 20.26 USDT
2025-09-12 05:40:42 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.05% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:42,276 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 2.00% | TP: 3.05% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020008 @ 83849.80000000 | Valeur: 16.78 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.26 USDT
2025-09-12 05:40:42,277 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00020008 @ 83849.80000000 | Valeur: 16.78 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.26 USDT
2025-09-12 05:40:42 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.03% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 15 (0W/7L)
2025-09-12 05:40:42,277 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.03% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 15 (0W/7L)
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.25/10.25 USDT (1.2%/50.0%), Solde dispo: 3.47 USDT
2025-09-12 05:40:42,277 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.25/10.25 USDT (1.2%/50.0%), Solde dispo: 3.47 USDT
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.25/10.25 USDT (1.2%/50.0%), Solde dispo: 3.47 USDT
2025-09-12 05:40:42,278 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.25/10.25 USDT (1.2%/50.0%), Solde dispo: 3.47 USDT
2025-09-12 05:40:42,278 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:42,278 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.25, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:42,278 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:42,278 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:42,278 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 65.49it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 125.60it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.32it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.02it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:42,330 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:42,330 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:42,330 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:42 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:42,330 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:42 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:42,330 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:42,330 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020008 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.23 USDT | Équité: 3.47 USDT
2025-09-12 05:40:42,332 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00020008 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.23 USDT | Équité: 3.47 USDT
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.25 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:42,332 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.25 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:42,332 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:42,332 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 52.46it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 100.86it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.73it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.47it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:42,385 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:42,385 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:42,385 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:42,386 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:42,386 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 62.50it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 120.98it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.46it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.20it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:42,441 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:42,441 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:42,441 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:42,452 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:42,453 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:42,463 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:42,464 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:42,474 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:42,475 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:42,475 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:42,475 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:42,475 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:42,479 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:42,480 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:42,480 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.5753398]
2025-09-12 05:40:42,480 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.16
2025-09-12 05:40:42 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:42,482 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:42,482 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:42,483 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:42 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 3.01% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:42,486 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 3.01% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:42 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:42,487 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:42,488 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:42,488 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:42,488 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:42,488 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.16, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:42,488 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:42,488 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:42,488 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 37.85it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 72.90it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.26it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.02it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:42,545 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:42,545 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:42,545 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:42 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:42,545 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:42 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:42,545 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:42,545 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.16 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:42,547 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.16 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:42,547 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:42,547 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 74.52it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 99.83it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.85it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.59it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:42,602 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:42,602 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:42,602 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:42,602 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:42,602 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 50.88it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 97.92it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.84it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.56it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:42,654 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:42,655 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:42,655 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:42,665 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:42,666 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:42,676 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:42,677 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:42,686 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:42,687 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:42,687 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:42,688 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:42,688 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:42,688 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:42,688 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:42,689 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.46548703]
2025-09-12 05:40:42,689 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.16
2025-09-12 05:40:42 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.12% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:42,691 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.12% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:42,691 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:42,691 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:42 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 3.01% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:42,694 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 3.01% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:42 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.12% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:42,695 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.12% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:42,695 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:42,695 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:42,695 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:42,695 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.16, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:42,695 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:42,695 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:42,695 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 93.21it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 149.61it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 73.87it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 73.48it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.04 secondes
2025-09-12 05:40:42,739 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.04 secondes
2025-09-12 05:40:42,739 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:42,739 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:42 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:42,739 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:42 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:42,739 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:42,739 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.16 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:42,741 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.16 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:42,741 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:42,741 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 84.95it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 134.71it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.32it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.05it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:42,793 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:42,793 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:42,793 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:42,793 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:42,793 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 68.92it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 118.22it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.82it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.57it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:42,846 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:42,846 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:42,846 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:42,857 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:42,857 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:42,867 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:42,868 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:42,878 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:42,879 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:42 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:42,879 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:42,879 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:42,879 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:42,880 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:42,880 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:42,881 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.1387853]
2025-09-12 05:40:42,881 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.13
2025-09-12 05:40:42 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.11% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 22 (0W/11L)
2025-09-12 05:40:42,883 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.11% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 22 (0W/11L)
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:42,883 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:42,883 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:42 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 3.01% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:42,886 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 3.01% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019867 @ 83849.80000000 | Valeur: 16.66 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.13 USDT
2025-09-12 05:40:42,887 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019867 @ 83849.80000000 | Valeur: 16.66 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.13 USDT
2025-09-12 05:40:42 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.11% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 23 (0W/11L)
2025-09-12 05:40:42,887 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.11% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 23 (0W/11L)
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.39/10.25 USDT (1.9%/50.0%), Solde dispo: 3.46 USDT
2025-09-12 05:40:42,888 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.39/10.25 USDT (1.9%/50.0%), Solde dispo: 3.46 USDT
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.39/10.25 USDT (1.9%/50.0%), Solde dispo: 3.46 USDT
2025-09-12 05:40:42,888 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.39/10.25 USDT (1.9%/50.0%), Solde dispo: 3.46 USDT
2025-09-12 05:40:42,888 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:42,888 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.11, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:42,888 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:42,888 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:42,888 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 57.29it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 73.28it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.96it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.72it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:42,941 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:42,941 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:42,941 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:42 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:42,941 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:42 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:42,941 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:42,942 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019867 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.10 USDT | Équité: 3.46 USDT
2025-09-12 05:40:42,943 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019867 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.10 USDT | Équité: 3.46 USDT
2025-09-12 05:40:42 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.11 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:42,943 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.11 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:42,943 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:42,944 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 70.14it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 99.23it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.52it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.26it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:42,996 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:42,997 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:42,997 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:42,997 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:42 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:42,997 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 72.93it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 94.80it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.43it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.15it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:43,048 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:43,049 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:43,049 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:43,060 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:43,060 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:43,070 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:43,071 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:43,080 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:43,081 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:43,082 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:43,082 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:43,082 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:43,082 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:43,083 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:43,083 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-1.]
2025-09-12 05:40:43,084 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.23
2025-09-12 05:40:43 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.07% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 16 (0W/8L)
2025-09-12 05:40:43,085 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.07% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 16 (0W/8L)
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:43,085 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:43,085 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:43 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 3.01% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:43,088 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 3.01% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:43 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.07% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 16 (0W/8L)
2025-09-12 05:40:43,089 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.07% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 16 (0W/8L)
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:43,089 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:43,089 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:43,089 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:43,089 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.23, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:43,089 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:43,090 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:43,090 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 62.32it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 117.31it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.44it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.14it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:43,140 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:43,140 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:43,141 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:43 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:43,141 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:43 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:43,141 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:43,141 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.23 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:43,142 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.23 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:43,142 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:43,142 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 74.30it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 134.44it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 64.06it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.75it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:43,191 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:43,191 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:43,191 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:43,191 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:43,192 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 45.59it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 87.56it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.53it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.27it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:43,248 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:43,248 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:43,248 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:43,259 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:43,260 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:43,269 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:43,270 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:43,279 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:43,280 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:43,280 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:43,280 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:43,280 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:43,285 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:43,285 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:43,286 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-1.]
2025-09-12 05:40:43,286 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.16
2025-09-12 05:40:43 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:43,288 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:43,288 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:43,288 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:43 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 2.98% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:43,292 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 2.98% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:43 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:43,293 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:43,293 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:43,293 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:43,293 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:43,294 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.16, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:43,294 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:43,294 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:43,294 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 43.31it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 53.74it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 53.98it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 53.75it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:43,353 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:43,353 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:43,353 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:43 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:43,353 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:43 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:43,353 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:43,354 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.16 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:43,355 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.16 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:43,355 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:43,355 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 55.78it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 107.17it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.05it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.77it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:43,407 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:43,407 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:43,407 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:43,407 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:43,407 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 77.72it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 107.96it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.06it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.78it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:43,461 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:43,461 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:43,461 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:43,472 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:43,472 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:43,482 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:43,483 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:43,493 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:43,494 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:43,494 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:43,494 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:43,495 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:43,495 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:43,495 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:43,496 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.62707686]
2025-09-12 05:40:43,496 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.16
2025-09-12 05:40:43 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.12% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:43,498 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.12% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:43,498 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:43,498 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:43 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 2.99% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:43,501 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 2.99% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019909 @ 83849.80000000 | Valeur: 16.69 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.16 USDT
2025-09-12 05:40:43,501 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019909 @ 83849.80000000 | Valeur: 16.69 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.16 USDT
2025-09-12 05:40:43 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.12% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 21 (0W/10L)
2025-09-12 05:40:43,502 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.12% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 21 (0W/10L)
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.35/10.25 USDT (1.7%/50.0%), Solde dispo: 3.45 USDT
2025-09-12 05:40:43,502 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.35/10.25 USDT (1.7%/50.0%), Solde dispo: 3.45 USDT
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.35/10.25 USDT (1.7%/50.0%), Solde dispo: 3.45 USDT
2025-09-12 05:40:43,502 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.35/10.25 USDT (1.7%/50.0%), Solde dispo: 3.45 USDT
2025-09-12 05:40:43,503 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:43,503 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.15, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:43,503 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:43,503 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:43,503 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 49.49it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 93.64it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.14it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.85it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:43,553 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:43,553 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:43,553 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:43 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:43,553 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:43 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:43,553 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:43,554 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019909 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.13 USDT | Équité: 3.45 USDT
2025-09-12 05:40:43,555 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019909 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.13 USDT | Équité: 3.45 USDT
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.15 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:43,555 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.15 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:43,555 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:43,556 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 55.14it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 103.44it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.44it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.17it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:43,608 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:43,608 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:43,608 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:43,608 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:43,608 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 104.81it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 136.30it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.35it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.10it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:43,662 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:43,662 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:43,662 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:43,672 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:43,673 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:43,683 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:43,683 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:43,694 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:43,694 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:43,695 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:43,695 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:43,695 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:43,695 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:43,695 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:43,696 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-1.]
2025-09-12 05:40:43,696 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.10
2025-09-12 05:40:43 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.15% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 24 (0W/12L)
2025-09-12 05:40:43,698 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.15% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 24 (0W/12L)
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.40/10.25 USDT (2.0%/50.0%), Solde dispo: 20.10 USDT
2025-09-12 05:40:43,698 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.40/10.25 USDT (2.0%/50.0%), Solde dispo: 20.10 USDT
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.40/10.25 USDT (2.0%/50.0%), Solde dispo: 20.10 USDT
2025-09-12 05:40:43,698 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.40/10.25 USDT (2.0%/50.0%), Solde dispo: 20.10 USDT
2025-09-12 05:40:43 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 2.97% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:43,701 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 2.97% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:43 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.15% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 24 (0W/12L)
2025-09-12 05:40:43,702 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.15% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 24 (0W/12L)
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.40/10.25 USDT (2.0%/50.0%), Solde dispo: 20.10 USDT
2025-09-12 05:40:43,702 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.40/10.25 USDT (2.0%/50.0%), Solde dispo: 20.10 USDT
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.40/10.25 USDT (2.0%/50.0%), Solde dispo: 20.10 USDT
2025-09-12 05:40:43,702 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.40/10.25 USDT (2.0%/50.0%), Solde dispo: 20.10 USDT
2025-09-12 05:40:43,702 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:43,703 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.10, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:43,703 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:43,703 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:43,703 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 64.32it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 122.03it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.67it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.42it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:43,756 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:43,756 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:43,757 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:43 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:43,757 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:43 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:43,757 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:43,757 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.10 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:43,758 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.10 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:43,758 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:43,758 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 90.06it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 104.51it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.62it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.36it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:43,812 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:43,812 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:43,812 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:43,812 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:43,812 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 76.31it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 147.72it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.53it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.27it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:43,865 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:43,865 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:43,865 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:43,876 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:43,877 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:43,887 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:43,887 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:43,898 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:43,898 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:43 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:43,899 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:43,899 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:43,899 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:43,899 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:43,899 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:43,900 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.10784242]
2025-09-12 05:40:43,900 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.23
2025-09-12 05:40:43 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.07% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 16 (0W/8L)
2025-09-12 05:40:43,902 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.07% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 16 (0W/8L)
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:43,902 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:43,902 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.27/10.25 USDT (1.3%/50.0%), Solde dispo: 20.23 USDT
2025-09-12 05:40:43 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 2.99% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:43,905 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 2.99% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019978 @ 83849.80000000 | Valeur: 16.75 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.23 USDT
2025-09-12 05:40:43,906 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019978 @ 83849.80000000 | Valeur: 16.75 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.23 USDT
2025-09-12 05:40:43 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.07% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 17 (0W/8L)
2025-09-12 05:40:43,906 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.07% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 17 (0W/8L)
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.29/10.25 USDT (1.4%/50.0%), Solde dispo: 3.46 USDT
2025-09-12 05:40:43,907 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.29/10.25 USDT (1.4%/50.0%), Solde dispo: 3.46 USDT
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.29/10.25 USDT (1.4%/50.0%), Solde dispo: 3.46 USDT
2025-09-12 05:40:43,907 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.29/10.25 USDT (1.4%/50.0%), Solde dispo: 3.46 USDT
2025-09-12 05:40:43,907 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:43,907 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.21, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:43,907 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:43,907 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:43,907 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 88.06it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 142.57it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 64.41it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 64.12it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:43,957 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:43,957 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:43,957 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:43 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:43,957 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:43 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:43,957 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:43,957 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019978 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.20 USDT | Équité: 3.46 USDT
2025-09-12 05:40:43,958 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019978 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.20 USDT | Équité: 3.46 USDT
2025-09-12 05:40:43 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.21 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:43,959 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.21 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:43,959 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:43 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:43,959 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 72.58it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 100.12it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.40it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.11it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:44,009 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:44,009 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:44,010 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:44,010 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:44,010 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 81.13it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 99.25it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.62it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.36it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:44,063 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:44,063 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:44,063 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:44,074 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:44,075 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:44,085 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:44,085 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:44,095 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:44,096 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:44,096 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:44,096 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:44,096 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:44,100 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:44,101 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:44,101 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.24933413]
2025-09-12 05:40:44,101 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.16
2025-09-12 05:40:44 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:44,103 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:44,103 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:44,104 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:44 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 2.98% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:44,107 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 2.98% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:44 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:44,108 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:44,109 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:44,109 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:44,109 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:44,109 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.16, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:44,109 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:44,109 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:44,109 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 66.55it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 103.76it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 53.56it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 53.32it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:44,168 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:44,168 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:44,169 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:44 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:44,169 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:44 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:44,169 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:44,169 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.16 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:44,170 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.16 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:44,171 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:44,171 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 64.19it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 78.66it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 66.38it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 66.04it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:44,220 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:44,220 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:44,220 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:44,220 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:44,220 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 76.19it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 95.24it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.11it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.84it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:44,281 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:44,281 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:44,281 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:44,292 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:44,293 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:44,303 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:44,304 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:44,314 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:44,314 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:44,315 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:44,315 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:44,315 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:44,315 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:44,315 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:44,316 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.16857496]
2025-09-12 05:40:44,316 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.13
2025-09-12 05:40:44 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.16% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 22 (0W/11L)
2025-09-12 05:40:44,318 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.16% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 22 (0W/11L)
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:44,318 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:44,318 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:44 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 2.98% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:44,321 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 2.98% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:44 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.16% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 22 (0W/11L)
2025-09-12 05:40:44,322 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.16% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 22 (0W/11L)
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:44,322 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:44,322 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:44,322 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:44,322 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.13, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:44,322 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:44,322 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:44,322 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 94.11it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 169.60it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 66.83it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 66.52it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:44,370 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:44,370 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:44,370 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:44 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:44,370 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:44 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:44,370 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:44,370 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.13 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:44,372 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.13 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:44,372 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:44,372 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 96.69it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 64.08it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.36it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.09it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:44,424 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:44,424 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:44,424 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:44,424 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:44,425 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 57.68it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 108.76it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.40it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.13it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:44,477 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:44,477 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:44,477 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:44,488 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:44,488 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:44,498 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:44,499 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:44,509 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:44,510 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:44,511 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:44,511 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:44,511 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:44,511 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:44,512 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:44,512 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [1.]
2025-09-12 05:40:44,513 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.10
2025-09-12 05:40:44 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.15% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 24 (0W/12L)
2025-09-12 05:40:44,514 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.15% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 24 (0W/12L)
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.40/10.25 USDT (2.0%/50.0%), Solde dispo: 20.10 USDT
2025-09-12 05:40:44,514 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.40/10.25 USDT (2.0%/50.0%), Solde dispo: 20.10 USDT
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.40/10.25 USDT (2.0%/50.0%), Solde dispo: 20.10 USDT
2025-09-12 05:40:44,514 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.40/10.25 USDT (2.0%/50.0%), Solde dispo: 20.10 USDT
2025-09-12 05:40:44 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 2.97% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:44,517 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 2.97% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019835 @ 83849.80000000 | Valeur: 16.63 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.10 USDT
2025-09-12 05:40:44,518 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019835 @ 83849.80000000 | Valeur: 16.63 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.10 USDT
2025-09-12 05:40:44 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.15% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 25 (0W/12L)
2025-09-12 05:40:44,518 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.15% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 25 (0W/12L)
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.42/10.25 USDT (2.0%/50.0%), Solde dispo: 3.45 USDT
2025-09-12 05:40:44,519 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.42/10.25 USDT (2.0%/50.0%), Solde dispo: 3.45 USDT
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.42/10.25 USDT (2.0%/50.0%), Solde dispo: 3.45 USDT
2025-09-12 05:40:44,519 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.42/10.25 USDT (2.0%/50.0%), Solde dispo: 3.45 USDT
2025-09-12 05:40:44,519 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:44,519 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.08, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:44,519 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:44,519 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:44,519 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 97.98it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 104.83it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.83it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.57it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:44,572 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:44,573 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:44,573 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:44 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:44,573 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:44 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:44,573 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:44,573 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019835 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.06 USDT | Équité: 3.45 USDT
2025-09-12 05:40:44,574 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019835 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.06 USDT | Équité: 3.45 USDT
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.08 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:44,575 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.08 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:44,575 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:44,575 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 75.36it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 119.10it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 66.70it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 66.37it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:44,623 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:44,623 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:44,623 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:44,623 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:44,623 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 82.61it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 134.00it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 73.49it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 73.08it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.04 secondes
2025-09-12 05:40:44,667 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.04 secondes
2025-09-12 05:40:44,667 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:44,667 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:44,678 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:44,679 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:44,689 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:44,690 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:44,699 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:44,700 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:44,700 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:44,701 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:44,701 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:44,701 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:44,701 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:44,702 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.30612803]
2025-09-12 05:40:44,702 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.20
2025-09-12 05:40:44 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.11% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 18 (0W/9L)
2025-09-12 05:40:44,704 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.11% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 18 (0W/9L)
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:44,704 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:44,704 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:44 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 2.99% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:44,707 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 2.99% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:44 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.11% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 18 (0W/9L)
2025-09-12 05:40:44,708 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.11% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 18 (0W/9L)
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:44,708 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:44,708 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:44,708 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:44,708 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.20, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:44,709 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:44,709 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:44,709 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 74.89it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 110.62it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.93it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.66it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:44,760 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:44,760 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:44,760 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:44 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:44,760 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:44 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:44,761 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:44,761 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.20 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:44,762 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.20 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:44,762 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:44,762 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 74.05it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 102.09it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.00it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.74it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:44,816 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:44,816 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:44,816 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:44,816 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:44,816 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 77.90it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 95.72it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 72.24it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 71.85it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.04 secondes
2025-09-12 05:40:44,861 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.04 secondes
2025-09-12 05:40:44,861 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:44,861 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:44,876 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:44,877 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:44,893 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:44,893 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:44,905 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:44,906 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:44 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:44,906 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:44,906 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:44,907 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:44,910 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:44,911 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:44,911 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.17686753]
2025-09-12 05:40:44,912 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.16
2025-09-12 05:40:44 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:44,914 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:44,914 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:44,914 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:44 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 2.97% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:44,918 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 2.97% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019906 @ 83849.80000000 | Valeur: 16.69 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.16 USDT
2025-09-12 05:40:44,918 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019906 @ 83849.80000000 | Valeur: 16.69 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.16 USDT
2025-09-12 05:40:44 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 21 (0W/10L)
2025-09-12 05:40:44,919 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.09% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 21 (0W/10L)
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.35/10.25 USDT (1.7%/50.0%), Solde dispo: 3.46 USDT
2025-09-12 05:40:44,920 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.35/10.25 USDT (1.7%/50.0%), Solde dispo: 3.46 USDT
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.35/10.25 USDT (1.7%/50.0%), Solde dispo: 3.46 USDT
2025-09-12 05:40:44,920 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.35/10.25 USDT (1.7%/50.0%), Solde dispo: 3.46 USDT
2025-09-12 05:40:44,920 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:44,920 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.15, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:44,920 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:44,920 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:44,920 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 59.03it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 73.37it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 51.92it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 51.62it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:44,981 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:44,981 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:44,981 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:44 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:44,981 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:44 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:44,981 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:44,982 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019906 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.13 USDT | Équité: 3.46 USDT
2025-09-12 05:40:44,984 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019906 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.13 USDT | Équité: 3.46 USDT
2025-09-12 05:40:44 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.15 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:44,985 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.15 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:44,985 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:44 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:44,985 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 83.11it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 136.19it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.54it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.25it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:45,036 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:45,037 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:45,037 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:45,037 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:45,037 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 59.18it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 111.87it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.77it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.45it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:45,087 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:45,087 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:45,087 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:45,097 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:45,098 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:45,108 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:45,109 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:45,118 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:45,119 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:45,120 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:45,120 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:45,120 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:45,120 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:45,120 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:45,121 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [1.]
2025-09-12 05:40:45,121 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.13
2025-09-12 05:40:45 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.16% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 22 (0W/11L)
2025-09-12 05:40:45,123 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.16% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 22 (0W/11L)
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:45,123 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:45,123 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:45 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 2.98% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:45,126 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 2.98% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019877 @ 83849.80000000 | Valeur: 16.67 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.13 USDT
2025-09-12 05:40:45,126 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019877 @ 83849.80000000 | Valeur: 16.67 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.13 USDT
2025-09-12 05:40:45 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.16% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 23 (0W/11L)
2025-09-12 05:40:45,127 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.16% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 23 (0W/11L)
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.39/10.25 USDT (1.9%/50.0%), Solde dispo: 3.45 USDT
2025-09-12 05:40:45,127 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.39/10.25 USDT (1.9%/50.0%), Solde dispo: 3.45 USDT
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.39/10.25 USDT (1.9%/50.0%), Solde dispo: 3.45 USDT
2025-09-12 05:40:45,127 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.39/10.25 USDT (1.9%/50.0%), Solde dispo: 3.45 USDT
2025-09-12 05:40:45,128 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:45,128 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.11, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:45,128 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:45,128 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:45,128 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 86.79it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 148.31it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 54.16it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 53.93it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:45,187 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:45,188 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:45,188 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:45 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:45,188 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:45 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:45,188 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:45,188 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019877 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.10 USDT | Équité: 3.45 USDT
2025-09-12 05:40:45,190 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019877 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.10 USDT | Équité: 3.45 USDT
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.11 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:45,190 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.11 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:45,190 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:45,190 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 74.86it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 136.31it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.45it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.18it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:45,243 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:45,243 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:45,243 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:45,243 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:45,243 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 56.29it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 105.84it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 64.73it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 64.31it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:45,294 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:45,295 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:45,295 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:45,305 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:45,306 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:45,316 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:45,317 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:45,326 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:45,327 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:45,328 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:45,328 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:45,328 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:45,328 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:45,329 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:45,329 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.24753049]
2025-09-12 05:40:45,329 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.06
2025-09-12 05:40:45 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.18% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 26 (0W/13L)
2025-09-12 05:40:45,331 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.18% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 26 (0W/13L)
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:45,331 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:45,331 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:45 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 2.96% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:45,334 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 2.96% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019802 @ 83849.80000000 | Valeur: 16.60 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.06 USDT
2025-09-12 05:40:45,334 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019802 @ 83849.80000000 | Valeur: 16.60 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.06 USDT
2025-09-12 05:40:45 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.18% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 27 (0W/13L)
2025-09-12 05:40:45,335 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.18% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 27 (0W/13L)
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.45/10.25 USDT (2.2%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:45,335 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.45/10.25 USDT (2.2%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.45/10.25 USDT (2.2%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:45,335 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.45/10.25 USDT (2.2%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:45,336 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:45,336 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.05, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:45,336 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:45,336 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:45,336 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 51.47it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 97.69it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.55it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.29it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:45,389 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:45,389 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:45,389 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:45 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:45,389 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:45 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:45,389 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:45,389 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019802 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.03 USDT | Équité: 3.44 USDT
2025-09-12 05:40:45,391 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019802 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.03 USDT | Équité: 3.44 USDT
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.05 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:45,391 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.05 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:45,391 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:45,392 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 53.55it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 101.99it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.08it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.80it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:45,442 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:45,442 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:45,442 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:45,442 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:45,442 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 88.60it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 138.87it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.23it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.95it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:45,493 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:45,494 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:45,494 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:45,504 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:45,505 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:45,515 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:45,515 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:45,525 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:45,526 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:45,526 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:45,526 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:45,526 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:45,526 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:45,527 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:45,528 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.7063741]
2025-09-12 05:40:45,528 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.20
2025-09-12 05:40:45 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.11% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 18 (0W/9L)
2025-09-12 05:40:45,529 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.11% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 18 (0W/9L)
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:45,529 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:45,529 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:45 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 2.98% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:45,532 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 2.98% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:45 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.11% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 18 (0W/9L)
2025-09-12 05:40:45,534 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.11% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 18 (0W/9L)
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:45,534 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:45,534 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:45,534 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:45,534 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.20, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:45,534 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:45,534 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:45,534 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 84.48it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 101.85it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 68.94it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 68.63it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:45,580 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:45,581 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:45,581 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:45 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:45,581 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:45 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:45,581 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:45,581 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.20 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:45,582 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.20 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:45,582 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:45,582 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 110.44it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 145.81it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.67it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.37it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:45,635 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:45,636 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:45,636 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:45,636 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:45,636 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 70.37it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 136.85it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.56it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.29it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:45,687 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:45,688 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:45,688 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:45,698 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:45,699 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:45,709 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:45,709 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:45,719 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:45,720 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:45,720 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:45,720 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:45,720 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:45,724 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:45,725 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:45,725 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [1.]
2025-09-12 05:40:45,725 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.13
2025-09-12 05:40:45 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.14% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 22 (0W/11L)
2025-09-12 05:40:45,727 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.14% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 22 (0W/11L)
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:45,728 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:45,728 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:45 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 2.97% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:45,732 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 2.97% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019874 @ 83849.80000000 | Valeur: 16.66 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.13 USDT
2025-09-12 05:40:45,732 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019874 @ 83849.80000000 | Valeur: 16.66 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.13 USDT
2025-09-12 05:40:45 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.14% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 23 (0W/11L)
2025-09-12 05:40:45,733 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.14% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 23 (0W/11L)
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.39/10.25 USDT (1.9%/50.0%), Solde dispo: 3.45 USDT
2025-09-12 05:40:45,733 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.39/10.25 USDT (1.9%/50.0%), Solde dispo: 3.45 USDT
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.39/10.25 USDT (1.9%/50.0%), Solde dispo: 3.45 USDT
2025-09-12 05:40:45,733 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.39/10.25 USDT (1.9%/50.0%), Solde dispo: 3.45 USDT
2025-09-12 05:40:45,733 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:45,733 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.11, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:45,733 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:45,733 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:45,733 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 42.81it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 81.74it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 49.22it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 49.04it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:45,798 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:45,798 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:45,798 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:45 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:45,798 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:45 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:45,798 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:45,798 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019874 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.10 USDT | Équité: 3.45 USDT
2025-09-12 05:40:45,800 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019874 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.10 USDT | Équité: 3.45 USDT
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.11 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:45,800 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.11 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:45,800 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:45,800 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 70.00it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 136.15it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 68.53it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 68.19it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:45,847 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:45,847 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:45,847 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:45,847 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:45,847 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 50.53it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 97.70it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 54.94it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 54.71it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:45,905 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:45,905 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:45,905 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:45,916 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:45,917 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:45,927 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:45,927 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:45,937 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:45,938 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:45 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:45,938 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:45,938 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:45,938 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:45,938 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:45,939 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:45,940 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [1.]
2025-09-12 05:40:45,940 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.10
2025-09-12 05:40:45 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.19% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 24 (0W/12L)
2025-09-12 05:40:45,942 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.19% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 24 (0W/12L)
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.40/10.25 USDT (2.0%/50.0%), Solde dispo: 20.10 USDT
2025-09-12 05:40:45,942 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.40/10.25 USDT (2.0%/50.0%), Solde dispo: 20.10 USDT
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.40/10.25 USDT (2.0%/50.0%), Solde dispo: 20.10 USDT
2025-09-12 05:40:45,942 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.40/10.25 USDT (2.0%/50.0%), Solde dispo: 20.10 USDT
2025-09-12 05:40:45 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 2.97% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:45,945 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 2.97% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019844 @ 83849.80000000 | Valeur: 16.64 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.10 USDT
2025-09-12 05:40:45,946 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019844 @ 83849.80000000 | Valeur: 16.64 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.10 USDT
2025-09-12 05:40:45 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.19% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 25 (0W/12L)
2025-09-12 05:40:45,946 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.19% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 25 (0W/12L)
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.42/10.25 USDT (2.0%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:45,947 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.42/10.25 USDT (2.0%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.42/10.25 USDT (2.0%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:45,947 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.42/10.25 USDT (2.0%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:45,947 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:45,947 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.08, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:45,947 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:45,947 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:45,947 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 89.96it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 104.65it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 71.05it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 70.56it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:45,992 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:45,992 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:45,992 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:45 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:45,992 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:45 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:45,992 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:45,993 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019844 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.06 USDT | Équité: 3.44 USDT
2025-09-12 05:40:45,994 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019844 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.06 USDT | Équité: 3.44 USDT
2025-09-12 05:40:45 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.08 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:45,994 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.08 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:45,994 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:45 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:45,994 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 68.22it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 130.39it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.34it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.04it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:46,045 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:46,045 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:46,045 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:46,046 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:46,046 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 102.59it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 97.01it/s, BTCUSDT 1h - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.31it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.02it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:46,099 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:46,099 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:46,099 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:46,110 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:46,111 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:46,121 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:46,122 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:46,131 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:46,132 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:46,132 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:46,132 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:46,132 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:46,133 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:46,133 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:46,134 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.07969397]
2025-09-12 05:40:46,134 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.03
2025-09-12 05:40:46 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.20% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:46,135 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.20% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:46,136 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:46,136 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:46 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.97% | TP: 2.96% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:46,139 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.97% | TP: 2.96% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:46 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.20% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:46,140 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.20% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:46,140 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:46,140 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:46,140 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:46,140 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.03, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:46,140 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:46,140 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:46,140 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 68.21it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 129.75it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.23it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.96it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:46,192 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:46,192 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:46,193 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:46 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:46,193 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:46 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:46,193 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:46,193 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.03 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:46,195 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.03 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:46,195 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:46,195 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 78.63it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 91.12it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.66it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.43it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:46,251 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:46,251 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:46,251 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:46,251 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:46,251 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 49.24it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 94.87it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.49it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.24it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:46,303 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:46,304 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:46,304 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:46,314 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:46,315 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:46,326 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:46,326 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:46,336 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:46,336 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:46,337 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:46,337 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:46,337 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:46,337 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:46,338 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:46,338 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.21616647]
2025-09-12 05:40:46,338 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.20
2025-09-12 05:40:46 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.11% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 18 (0W/9L)
2025-09-12 05:40:46,340 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.11% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 18 (0W/9L)
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:46,340 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:46,340 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.30/10.25 USDT (1.5%/50.0%), Solde dispo: 20.20 USDT
2025-09-12 05:40:46 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 2.98% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:46,343 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 2.98% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019948 @ 83849.80000000 | Valeur: 16.73 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.20 USDT
2025-09-12 05:40:46,343 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019948 @ 83849.80000000 | Valeur: 16.73 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.20 USDT
2025-09-12 05:40:46 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.11% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 19 (0W/9L)
2025-09-12 05:40:46,345 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.11% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 19 (0W/9L)
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.32/10.25 USDT (1.6%/50.0%), Solde dispo: 3.45 USDT
2025-09-12 05:40:46,345 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.32/10.25 USDT (1.6%/50.0%), Solde dispo: 3.45 USDT
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.32/10.25 USDT (1.6%/50.0%), Solde dispo: 3.45 USDT
2025-09-12 05:40:46,345 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.32/10.25 USDT (1.6%/50.0%), Solde dispo: 3.45 USDT
2025-09-12 05:40:46,345 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:46,345 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.18, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:46,345 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:46,345 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:46,345 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 59.50it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 75.34it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 65.68it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 65.38it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:46,394 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:46,394 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:46,394 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:46 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:46,394 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:46 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:46,394 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:46,394 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019948 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.16 USDT | Équité: 3.45 USDT
2025-09-12 05:40:46,396 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019948 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.16 USDT | Équité: 3.45 USDT
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.18 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:46,396 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.18 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:46,396 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:46,396 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 83.86it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 119.63it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.95it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.70it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:46,450 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:46,450 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:46,450 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:46,450 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:46,450 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 72.32it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 140.59it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.93it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.65it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:46,503 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:46,503 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:46,503 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:46,514 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:46,514 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:46,524 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:46,525 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:46,534 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:46,534 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:46,535 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:46,535 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:46,535 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:46,539 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:46,540 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:46,541 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.9835567]
2025-09-12 05:40:46,541 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.10
2025-09-12 05:40:46 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.17% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 24 (0W/12L)
2025-09-12 05:40:46,543 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.17% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 24 (0W/12L)
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.40/10.25 USDT (2.0%/50.0%), Solde dispo: 20.10 USDT
2025-09-12 05:40:46,543 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.40/10.25 USDT (2.0%/50.0%), Solde dispo: 20.10 USDT
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.40/10.25 USDT (2.0%/50.0%), Solde dispo: 20.10 USDT
2025-09-12 05:40:46,543 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.40/10.25 USDT (2.0%/50.0%), Solde dispo: 20.10 USDT
2025-09-12 05:40:46 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 2.97% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:46,547 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 2.97% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019841 @ 83849.80000000 | Valeur: 16.64 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.10 USDT
2025-09-12 05:40:46,547 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019841 @ 83849.80000000 | Valeur: 16.64 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.10 USDT
2025-09-12 05:40:46 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.17% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 25 (0W/12L)
2025-09-12 05:40:46,549 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.17% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 25 (0W/12L)
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.42/10.25 USDT (2.0%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:46,549 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.42/10.25 USDT (2.0%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.42/10.25 USDT (2.0%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:46,549 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.42/10.25 USDT (2.0%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:46,549 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:46,549 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.08, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:46,549 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:46,549 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:46,549 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 52.67it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 88.89it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 51.21it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 51.01it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:46,611 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:46,611 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:46,611 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:46 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:46,612 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:46 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:46,612 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:46,612 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019841 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.06 USDT | Équité: 3.44 USDT
2025-09-12 05:40:46,613 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019841 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.06 USDT | Équité: 3.44 USDT
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.08 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:46,614 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.08 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:46,614 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:46,614 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 51.31it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 97.63it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.83it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.55it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:46,668 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:46,668 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:46,668 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:46,668 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:46,668 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 92.13it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 113.30it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 70.15it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 69.79it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:46,714 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:46,714 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:46,714 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:46,725 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:46,725 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:46,735 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:46,736 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:46,745 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:46,745 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:46,746 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:46,746 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:46,746 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:46,746 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:46,746 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:46,747 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.6635132]
2025-09-12 05:40:46,747 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.06
2025-09-12 05:40:46 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.22% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 26 (0W/13L)
2025-09-12 05:40:46,749 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.22% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 26 (0W/13L)
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:46,750 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:46,750 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:46 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 2.97% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:46,753 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 2.97% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:46 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.22% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 26 (0W/13L)
2025-09-12 05:40:46,754 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.22% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 26 (0W/13L)
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:46,754 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:46,754 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:46,754 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:46,754 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.06, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:46,754 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:46,754 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:46,754 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 57.01it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 100.26it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.07it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.79it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:46,804 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:46,804 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:46,805 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:46 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:46,805 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:46 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:46,805 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:46,805 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.06 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:46,806 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.06 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:46,806 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:46,806 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 79.12it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 73.84it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.92it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.66it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:46,859 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:46,859 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:46,859 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:46,859 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:46,859 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 51.45it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 95.02it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 65.30it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 64.97it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:46,908 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:46,908 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:46,908 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:46,920 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:46,921 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:46,931 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:46,931 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:46,941 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:46,941 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:46 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:46,942 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:46,942 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:46,942 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:46,942 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:46,942 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:46,943 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-1.]
2025-09-12 05:40:46,943 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.03
2025-09-12 05:40:46 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.20% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:46,945 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.20% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:46,945 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:46,945 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:46 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.97% | TP: 2.96% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:46,950 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.97% | TP: 2.96% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:46 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.20% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:46,951 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.20% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:46,951 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:46 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:46,951 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:46,951 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:46,951 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.03, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:46,951 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:46,951 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:46 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:46,951 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 77.28it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 111.25it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.87it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.57it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:47,002 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:47,002 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:47,002 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:47 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:47,002 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:47 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:47,002 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:47,003 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.03 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:47,004 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.03 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:47,004 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:47,004 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 77.94it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 118.21it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.79it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.55it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:47,058 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:47,059 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:47,059 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:47,059 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:47,059 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 86.38it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 107.97it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.06it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.80it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:47,117 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:47,117 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:47,117 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:47,128 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:47,129 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:47,139 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:47,139 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:47,149 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:47,149 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:47,150 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:47,150 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:47,150 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:47,150 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:47,151 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:47,152 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.77330655]
2025-09-12 05:40:47,152 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.16
2025-09-12 05:40:47 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.15% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:47,153 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.15% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 20 (0W/10L)
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:47,154 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:47,154 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.34/10.25 USDT (1.6%/50.0%), Solde dispo: 20.16 USDT
2025-09-12 05:40:47 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 2.98% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:47,157 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.99% | TP: 2.98% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019916 @ 83849.80000000 | Valeur: 16.70 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.16 USDT
2025-09-12 05:40:47,158 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019916 @ 83849.80000000 | Valeur: 16.70 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.16 USDT
2025-09-12 05:40:47 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.15% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 21 (0W/10L)
2025-09-12 05:40:47,159 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.15% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 21 (0W/10L)
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.35/10.25 USDT (1.7%/50.0%), Solde dispo: 3.45 USDT
2025-09-12 05:40:47,159 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.35/10.25 USDT (1.7%/50.0%), Solde dispo: 3.45 USDT
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.35/10.25 USDT (1.7%/50.0%), Solde dispo: 3.45 USDT
2025-09-12 05:40:47,159 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.35/10.25 USDT (1.7%/50.0%), Solde dispo: 3.45 USDT
2025-09-12 05:40:47,159 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:47,159 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.15, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:47,159 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:47,159 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:47,159 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 57.55it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 110.78it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.38it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.12it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:47,212 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:47,212 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:47,212 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:47 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:47,213 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:47 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:47,213 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:47,213 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019916 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.13 USDT | Équité: 3.45 USDT
2025-09-12 05:40:47,214 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019916 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.13 USDT | Équité: 3.45 USDT
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.15 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:47,215 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.15 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:47,215 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:47,215 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 81.94it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 88.23it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 64.02it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.73it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:47,265 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:47,265 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:47,265 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:47,265 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:47,265 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 65.92it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 114.63it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 72.21it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 71.83it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.04 secondes
2025-09-12 05:40:47,309 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.04 secondes
2025-09-12 05:40:47,310 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:47,310 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:47,320 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:47,321 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:47,332 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:47,332 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:47,342 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:47,342 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:47,343 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:47,343 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:47,343 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:47,347 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:47,348 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:47,348 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [1.]
2025-09-12 05:40:47,349 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.06
2025-09-12 05:40:47 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.20% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 26 (0W/13L)
2025-09-12 05:40:47,351 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.20% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 26 (0W/13L)
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:47,351 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:47,351 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:47 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.97% | TP: 2.96% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:47,355 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.97% | TP: 2.96% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019808 @ 83849.80000000 | Valeur: 16.61 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.06 USDT
2025-09-12 05:40:47,355 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019808 @ 83849.80000000 | Valeur: 16.61 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.06 USDT
2025-09-12 05:40:47 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.20% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 27 (0W/13L)
2025-09-12 05:40:47,357 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.20% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 27 (0W/13L)
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.45/10.25 USDT (2.2%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:47,357 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.45/10.25 USDT (2.2%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.45/10.25 USDT (2.2%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:47,357 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.45/10.25 USDT (2.2%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:47,357 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:47,357 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.05, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:47,357 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:47,357 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:47,357 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 61.07it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 83.73it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 54.72it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 54.49it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:47,416 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:47,416 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:47,416 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:47 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:47,416 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:47 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:47,416 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:47,416 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019808 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.03 USDT | Équité: 3.44 USDT
2025-09-12 05:40:47,418 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019808 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.03 USDT | Équité: 3.44 USDT
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.05 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:47,419 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.05 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:47,419 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:47,419 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 50.07it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 96.14it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.54it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.27it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:47,471 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:47,471 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:47,471 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:47,471 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:47,471 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 84.62it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 110.54it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.39it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.11it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:47,523 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:47,523 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:47,523 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:47,535 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:47,536 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:47,546 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:47,546 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:47,556 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:47,556 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:47,556 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:47,557 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:47,557 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:47,557 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:47,557 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:47,558 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.22018516]
2025-09-12 05:40:47,558 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.06
2025-09-12 05:40:47 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.22% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 26 (0W/13L)
2025-09-12 05:40:47,560 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.22% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 26 (0W/13L)
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:47,560 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:47,560 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:47 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 2.97% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:47,563 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 2.97% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:47 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.22% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 26 (0W/13L)
2025-09-12 05:40:47,564 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.22% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 26 (0W/13L)
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:47,564 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:47,564 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:47,565 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:47,565 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.06, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:47,565 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:47,565 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:47,565 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 47.54it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 92.16it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.88it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.57it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:47,616 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:47,616 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:47,616 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:47 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:47,617 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:47 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:47,617 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:47,617 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.06 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:47,618 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.06 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:47,618 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:47,618 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 50.59it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 81.38it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 72.66it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 72.26it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.04 secondes
2025-09-12 05:40:47,663 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.04 secondes
2025-09-12 05:40:47,663 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:47,663 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:47,663 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:47,663 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 78.24it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 77.40it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.73it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.44it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:47,717 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:47,718 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:47,718 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:47,728 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:47,729 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:47,739 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:47,739 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:47,748 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:47,749 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:47,749 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:47,749 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:47,749 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:47,750 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:47,750 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:47,751 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.47608805]
2025-09-12 05:40:47,751 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.03
2025-09-12 05:40:47 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.20% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:47,753 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.20% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:47,753 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:47,753 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:47 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.97% | TP: 2.95% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:47,756 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.97% | TP: 2.95% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:47 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.20% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:47,757 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.20% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:47,757 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:47,757 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:47,757 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:47,757 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.03, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:47,757 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:47,757 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:47,758 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 60.05it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 115.12it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 64.63it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 64.35it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:47,807 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:47,807 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:47,807 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:47 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:47,807 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:47 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:47,807 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:47,807 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.03 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:47,809 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.03 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:47,809 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:47,809 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 77.44it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 92.59it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.15it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.87it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:47,860 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:47,860 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:47,860 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:47,860 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:47,860 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 82.12it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 148.90it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.95it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.68it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:47,914 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:47,914 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:47,914 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:47,925 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:47,926 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:47,935 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:47,936 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:47,946 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:47,946 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:47 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:47,947 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:47,947 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:47,947 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:47,947 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:47,948 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:47,949 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.2070948]
2025-09-12 05:40:47,949 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.13
2025-09-12 05:40:47 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.18% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 22 (0W/11L)
2025-09-12 05:40:47,950 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.18% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 22 (0W/11L)
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:47,950 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:47,951 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:47 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 2.98% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:47,954 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 2.98% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:47 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.18% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 22 (0W/11L)
2025-09-12 05:40:47,955 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.18% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 22 (0W/11L)
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:47,955 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:47 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:47,955 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:47,955 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:47,955 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.13, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:47,955 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:47,955 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:47 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:47,955 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 54.60it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 104.96it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.21it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.92it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:48,006 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:48,006 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:48,006 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:48 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:48,006 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:48 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:48,006 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:48,006 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.13 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:48,008 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.13 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:48,008 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:48,008 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 79.11it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 88.11it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 65.78it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 65.47it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:48,056 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:48,057 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:48,057 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:48,057 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:48,057 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 83.08it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 117.87it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.23it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 55.98it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:48,113 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:48,113 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:48,113 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:48,124 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:48,125 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:48,135 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:48,135 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:48,145 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:48,145 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:48,146 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:48,146 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:48,146 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:48,151 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:48,151 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:48,153 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.3464766]
2025-09-12 05:40:48,153 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.03
2025-09-12 05:40:48 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.23% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:48,155 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.23% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:48,155 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:48,155 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:48 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.97% | TP: 2.96% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:48,159 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.97% | TP: 2.96% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:48 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.23% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:48,160 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.23% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:48,161 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:48,161 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:48,161 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:48,161 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.03, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:48,161 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:48,161 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:48,161 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 36.35it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 67.35it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 53.65it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 53.34it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:48,221 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:48,221 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:48,221 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:48 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:48,221 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:48 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:48,221 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:48,222 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.03 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:48,223 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.03 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:48,223 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:48,223 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 104.35it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 131.47it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.37it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.13it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:48,277 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:48,277 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:48,277 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:48,277 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:48,277 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 60.27it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 115.38it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.94it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.63it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:48,328 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:48,328 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:48,328 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:48,339 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:48,340 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:48,350 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:48,351 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:48,361 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:48,361 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:48,361 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:48,362 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:48,362 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:48,362 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:48,362 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:48,363 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.8551704]
2025-09-12 05:40:48,363 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.06
2025-09-12 05:40:48 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.22% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 26 (0W/13L)
2025-09-12 05:40:48,365 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.22% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 26 (0W/13L)
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:48,365 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:48,365 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.44/10.25 USDT (2.1%/50.0%), Solde dispo: 20.06 USDT
2025-09-12 05:40:48 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.97% | TP: 2.96% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:48,368 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.97% | TP: 2.96% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019811 @ 83849.80000000 | Valeur: 16.61 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.06 USDT
2025-09-12 05:40:48,368 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019811 @ 83849.80000000 | Valeur: 16.61 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.06 USDT
2025-09-12 05:40:48 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.22% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 27 (0W/13L)
2025-09-12 05:40:48,369 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.22% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 27 (0W/13L)
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.45/10.25 USDT (2.2%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:48,369 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.45/10.25 USDT (2.2%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.45/10.25 USDT (2.2%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:48,369 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.45/10.25 USDT (2.2%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:48,369 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:48,369 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.05, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:48,369 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:48,369 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:48,369 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 84.15it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 82.22it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.43it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.18it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:48,423 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:48,423 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:48,423 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:48 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:48,423 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:48 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:48,423 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:48,423 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019811 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.03 USDT | Équité: 3.44 USDT
2025-09-12 05:40:48,425 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019811 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.03 USDT | Équité: 3.44 USDT
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.05 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:48,425 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.05 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:48,425 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:48,425 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 82.78it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 83.11it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.03it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.77it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:48,478 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:48,478 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:48,478 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:48,478 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:48,478 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 94.17it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 84.07it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.88it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.65it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:48,533 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:48,533 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:48,533 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:48,544 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:48,544 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:48,556 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:48,557 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:48,567 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:48,567 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:48,568 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:48,568 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:48,568 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:48,568 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:48,568 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:48,569 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.60578]
2025-09-12 05:40:48,569 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.03
2025-09-12 05:40:48 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.20% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:48,571 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.20% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:48,571 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:48,571 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:48 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.96% | TP: 2.95% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:48,574 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.96% | TP: 2.95% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:48 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.20% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:48,575 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.20% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:48,575 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:48,575 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:48,575 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:48,575 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.03, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:48,576 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:48,576 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:48,576 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 70.73it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 135.73it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 64.67it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 64.37it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:48,625 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:48,626 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:48,626 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:48 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:48,626 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:48 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:48,626 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:48,626 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.03 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:48,627 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.03 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:48,628 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:48,628 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 71.48it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 136.58it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.58it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.31it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:48,680 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:48,680 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:48,681 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:48,681 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:48,681 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 102.64it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 113.72it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 67.80it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 67.43it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:48,727 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:48,727 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:48,728 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:48,738 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:48,739 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:48,749 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:48,749 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:48,759 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:48,760 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:48,760 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:48,760 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:48,760 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:48,761 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:48,761 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:48,762 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-1.]
2025-09-12 05:40:48,762 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.13
2025-09-12 05:40:48 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.18% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 22 (0W/11L)
2025-09-12 05:40:48,763 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.18% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 22 (0W/11L)
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:48,763 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:48,763 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:48 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 2.97% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:48,767 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 2.97% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:48 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.18% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 22 (0W/11L)
2025-09-12 05:40:48,767 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.18% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 22 (0W/11L)
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:48,767 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:48,768 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:48,768 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:48,768 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.13, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:48,768 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:48,768 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:48,768 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 77.66it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 111.18it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.66it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.42it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:48,822 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:48,822 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:48,822 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:48 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:48,822 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:48 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:48,822 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:48,822 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.13 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:48,824 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.13 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:48,824 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:48,824 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 77.74it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 123.99it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 62.22it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.92it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:48,875 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:48,875 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:48,875 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:48,875 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:48,876 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 74.59it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 138.51it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.70it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 60.43it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:48,927 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:48,928 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:48,928 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:48,939 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:48,940 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:48,950 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:48,951 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:48,961 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:48,961 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:48 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:48,962 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:48,962 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:48,962 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:48,966 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:48,967 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:48,968 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.02289228]
2025-09-12 05:40:48,968 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.03
2025-09-12 05:40:48 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.23% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:48,970 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.23% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:48,970 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:48,971 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:48 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.97% | TP: 2.95% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:48,975 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.97% | TP: 2.95% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:48 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.23% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:48,977 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.23% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:48,977 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:48 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:48,977 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:48,977 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:48,977 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.03, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:48,977 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:48,977 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:48 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:48,977 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 62.15it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 69.45it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 55.67it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 55.43it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:49,036 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:49,036 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:49,036 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:49 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:49,037 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:49 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:49,037 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:49,037 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.03 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:49,039 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.03 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:49,039 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:49,039 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 81.02it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 108.95it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.77it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.50it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:49,094 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:49,094 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:49,095 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:49,095 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:49,095 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 83.64it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 87.54it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.45it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 56.22it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:49,151 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:49,151 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:49,151 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:49,162 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:49,163 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:49,175 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:49,175 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:49,187 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:49,187 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:49,188 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:49,188 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:49,188 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:49,188 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:49,188 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:49,189 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [1.]
2025-09-12 05:40:49,189 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.03
2025-09-12 05:40:49 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.24% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:49,191 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.24% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:49,191 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:49,191 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:49 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.97% | TP: 2.96% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:49,195 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.97% | TP: 2.96% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019777 @ 83849.80000000 | Valeur: 16.58 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.03 USDT
2025-09-12 05:40:49,195 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019777 @ 83849.80000000 | Valeur: 16.58 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.03 USDT
2025-09-12 05:40:49 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.24% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 29 (0W/14L)
2025-09-12 05:40:49,196 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.24% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 29 (0W/14L)
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.49/10.25 USDT (2.4%/50.0%), Solde dispo: 3.43 USDT
2025-09-12 05:40:49,196 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.49/10.25 USDT (2.4%/50.0%), Solde dispo: 3.43 USDT
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.49/10.25 USDT (2.4%/50.0%), Solde dispo: 3.43 USDT
2025-09-12 05:40:49,196 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.49/10.25 USDT (2.4%/50.0%), Solde dispo: 3.43 USDT
2025-09-12 05:40:49,196 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:49,196 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.01, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:49,196 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:49,196 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:49,196 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 89.64it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 115.78it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.62it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.32it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:49,246 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:49,247 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:49,247 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:49 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:49,247 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:49 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:49,247 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:49,247 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019777 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.00 USDT | Équité: 3.43 USDT
2025-09-12 05:40:49,248 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019777 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.00 USDT | Équité: 3.43 USDT
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.01 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:49,249 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.01 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:49,249 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:49,249 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 54.42it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 61.73it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.53it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.27it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:49,302 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:49,302 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:49,302 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:49,302 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:49,302 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 53.23it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 99.96it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 72.55it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 72.17it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.04 secondes
2025-09-12 05:40:49,347 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.04 secondes
2025-09-12 05:40:49,347 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:49,347 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:49,358 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:49,359 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:49,369 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:49,369 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:49,379 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:49,380 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:49,380 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:49,380 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:49,380 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:49,380 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:49,381 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:49,382 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [0.8502387]
2025-09-12 05:40:49,382 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.03
2025-09-12 05:40:49 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.20% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:49,383 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.20% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:49,383 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:49,383 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:49 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.96% | TP: 2.94% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:49,386 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.96% | TP: 2.94% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019767 @ 83849.80000000 | Valeur: 16.57 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.03 USDT
2025-09-12 05:40:49,387 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019767 @ 83849.80000000 | Valeur: 16.57 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.03 USDT
2025-09-12 05:40:49 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.20% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 29 (0W/14L)
2025-09-12 05:40:49,388 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.20% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 29 (0W/14L)
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.49/10.25 USDT (2.4%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:49,388 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.49/10.25 USDT (2.4%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.49/10.25 USDT (2.4%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:49,388 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.49/10.25 USDT (2.4%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:49,388 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:49,388 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.01, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:49,388 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:49,389 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:49,389 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 81.47it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 157.50it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.70it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.31it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:49,445 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:49,445 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:49,445 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:49 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:49,446 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:49 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:49,446 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:49,446 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019767 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.00 USDT | Équité: 3.44 USDT
2025-09-12 05:40:49,447 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019767 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.00 USDT | Équité: 3.44 USDT
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.01 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:49,448 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.01 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:49,448 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:49,448 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 54.41it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 104.08it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 70.05it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 69.70it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:49,493 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:49,493 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:49,494 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:49,494 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:49,494 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 71.47it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 137.15it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 69.51it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 69.15it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:49,540 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:49,540 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:49,540 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:49,551 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:49,552 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:49,562 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:49,563 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:49,573 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:49,573 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:49,573 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:49,574 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:49,574 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:49,574 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:49,574 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:49,575 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [1.]
2025-09-12 05:40:49,575 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.13
2025-09-12 05:40:49 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.18% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 22 (0W/11L)
2025-09-12 05:40:49,577 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.18% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 22 (0W/11L)
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:49,577 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:49,577 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.37/10.25 USDT (1.8%/50.0%), Solde dispo: 20.13 USDT
2025-09-12 05:40:49 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 2.97% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:49,580 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.98% | TP: 2.97% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019884 @ 83849.80000000 | Valeur: 16.67 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.13 USDT
2025-09-12 05:40:49,580 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019884 @ 83849.80000000 | Valeur: 16.67 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.13 USDT
2025-09-12 05:40:49 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.18% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 23 (0W/11L)
2025-09-12 05:40:49,581 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.18% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 23 (0W/11L)
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.39/10.25 USDT (1.9%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:49,581 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.39/10.25 USDT (1.9%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.39/10.25 USDT (1.9%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:49,581 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.39/10.25 USDT (1.9%/50.0%), Solde dispo: 3.44 USDT
2025-09-12 05:40:49,582 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:49,582 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.11, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:49,582 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:49,582 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:49,582 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 77.31it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 143.40it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.82it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.57it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:49,636 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:49,637 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:49,637 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:49 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:49,637 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:49 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:49,637 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:49,637 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019884 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.10 USDT | Équité: 3.44 USDT
2025-09-12 05:40:49,638 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019884 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 20.10 USDT | Équité: 3.44 USDT
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.11 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:49,639 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.11 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:49,639 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:49,639 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 49.99it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 94.91it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.71it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.45it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:49,693 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:49,693 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:49,693 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:49,693 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:49,693 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 74.01it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 143.21it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.45it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.19it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:49,749 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.06 secondes
2025-09-12 05:40:49,750 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:49,750 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:49,760 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:49,761 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:49,771 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:49,771 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:49,781 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:49,782 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:49,782 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:49,782 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:49,782 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py:311: UserWarning: [33mWARN: env.capital to get variables from other wrappers is deprecated and will be removed in v1.0, to get this variable you can do `env.unwrapped.capital` for environment variables or `env.get_wrapper_attr('capital')` that will search the reminding wrappers.[0m
  logger.warn(
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:49,786 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:49,787 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:49,788 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-0.3180941]
2025-09-12 05:40:49,788 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.03
2025-09-12 05:40:49 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.23% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:49,790 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.23% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:49,790 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:49,791 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:49 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.96% | TP: 2.95% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:49,796 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.96% | TP: 2.95% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:49 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.23% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:49,797 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.23% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 28 (0W/14L)
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:49,797 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:49,797 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.47/10.25 USDT (2.3%/50.0%), Solde dispo: 20.03 USDT
2025-09-12 05:40:49,797 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:49,797 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.03, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:49,797 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:49,798 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:49,798 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 44.10it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 78.45it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 51.92it/s, BTCUSDT 5m - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 51.73it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:49,859 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.06 secondes
2025-09-12 05:40:49,859 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:49,859 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:49 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:49,859 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:49 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:49,859 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:49,859 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:49 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.03 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:49,861 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($20.03 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:49,861 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:49,861 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 77.14it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 100.13it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.38it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 57.13it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:49,916 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:49,916 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:49,916 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:49,916 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:49,916 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 66.90it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 104.96it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 59.24it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 58.97it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:49 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:49,970 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:49,971 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:49,971 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:49,981 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:49,982 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:49,991 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:49 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:49,992 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:50 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:50,001 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:50 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:50,002 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:50 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:50,003 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:50,003 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:50,003 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:50 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:50,003 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:50,004 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:50,004 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [1.]
2025-09-12 05:40:50,004 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.00
2025-09-12 05:40:50 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.27% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 30 (0W/15L)
2025-09-12 05:40:50,006 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.27% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 30 (0W/15L)
2025-09-12 05:40:50 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.50/10.25 USDT (2.5%/50.0%), Solde dispo: 20.00 USDT
2025-09-12 05:40:50,006 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.50/10.25 USDT (2.5%/50.0%), Solde dispo: 20.00 USDT
2025-09-12 05:40:50 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.50/10.25 USDT (2.5%/50.0%), Solde dispo: 20.00 USDT
2025-09-12 05:40:50,006 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.50/10.25 USDT (2.5%/50.0%), Solde dispo: 20.00 USDT
2025-09-12 05:40:50 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.97% | TP: 2.95% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:50,009 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.97% | TP: 2.95% | PosSize: 82.8% | Winrate: 0.0%
2025-09-12 05:40:50 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019744 @ 83849.80000000 | Valeur: 16.56 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.00 USDT
2025-09-12 05:40:50,009 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION OUVERTE] BTCUSDT - Taille: 0.00019744 @ 83849.80000000 | Valeur: 16.56 | SL: 79657.31000000 | TP: 96427.27000000 | Commission: 0.02 | Capital: 20.00 USDT
2025-09-12 05:40:50 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.27% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 31 (0W/15L)
2025-09-12 05:40:50,010 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.27% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 31 (0W/15L)
2025-09-12 05:40:50 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.52/10.25 USDT (2.5%/50.0%), Solde dispo: 3.43 USDT
2025-09-12 05:40:50,010 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.52/10.25 USDT (2.5%/50.0%), Solde dispo: 3.43 USDT
2025-09-12 05:40:50 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.52/10.25 USDT (2.5%/50.0%), Solde dispo: 3.43 USDT
2025-09-12 05:40:50,011 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.52/10.25 USDT (2.5%/50.0%), Solde dispo: 3.43 USDT
2025-09-12 05:40:50,011 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:50,011 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 19.98, Initial Equity: 20.50, Steps Since Last Trade: 0
2025-09-12 05:40:50,011 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:50,011 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:50 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:50,011 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 80.09it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 130.33it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 64.25it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 63.95it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:50 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:50,060 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 1 terminé en 0.05 secondes
2025-09-12 05:40:50,060 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 1 on attempt 1
2025-09-12 05:40:50,060 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:50 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:50,060 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Garder histoire – Append only, no reset.
2025-09-12 05:40:50 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:50,061 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - [DBE CONTINUITY] Histoire préservée. Vol history: 0 points
2025-09-12 05:40:50,061 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK] Successfully loaded chunk 2/10
2025-09-12 05:40:50 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019744 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 19.96 USDT | Équité: 3.43 USDT
2025-09-12 05:40:50,062 - adan_trading_bot.portfolio.portfolio_manager - INFO - [POSITION FERMÉE] BTCUSDT - Taille: 0.00019744 | Entrée: 83849.80000000 | Sortie: 83849.80000000 | PnL: -0.02 (0.00%) | Capital: 19.96 USDT | Équité: 3.43 USDT
2025-09-12 05:40:50 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($19.98 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:50,062 - adan_trading_bot.portfolio.portfolio_manager - INFO - [NO RESET] Capital OK ($19.98 > $11.00) - Continuité préservée (capital + DBE)
2025-09-12 05:40:50,063 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:50 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:50,063 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 74.59it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 144.15it/s, BTCUSDT 1h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.32it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.01it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:50 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:50,114 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:50,115 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:50,115 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Repositioning to step 250 in new chunk to allow for indicator warmup (250 steps).
2025-09-12 05:40:50,115 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 0 (attempt 1/3)
2025-09-12 05:40:50 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
2025-09-12 05:40:50,115 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 0 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 70.25it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 128.17it/s, BTCUSDT 4h - 1000 lignes]Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.84it/s, BTCUSDT 5m - 1000 lignes] Chargement des données: 100%|██████████| 3/3 [00:00<00:00, 61.56it/s, BTCUSDT 5m - 1000 lignes]
2025-09-12 05:40:50 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:50,166 - adan_trading_bot.data_processing.data_loader - INFO - Chargement du chunk 0 terminé en 0.05 secondes
2025-09-12 05:40:50,166 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Successfully loaded chunk 0 on attempt 1
2025-09-12 05:40:50 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:50,166 - adan_trading_bot.data_processing.state_builder - INFO - Construction de l'observation pour l'actif BTCUSDT - OK
2025-09-12 05:40:50 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:50,177 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 5m: processed_data length: 1000
2025-09-12 05:40:50 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:50,178 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 5m: window_data length: 20
2025-09-12 05:40:50 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:50,190 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 1h: processed_data length: 1000
2025-09-12 05:40:50 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:50,190 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 1h: window_data length: 20
2025-09-12 05:40:50 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:50,200 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - Before slicing for 4h: processed_data length: 1000
2025-09-12 05:40:50 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:50,201 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] _process_timeframe_data - After slicing for 4h: window_data length: 20
2025-09-12 05:40:50 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:50,201 - adan_trading_bot.data_processing.state_builder - INFO - [STATE_BUILDER_DEBUG] build_observation - Final observation shape: (3, 20, 15), size: 900, NaNs: 0
2025-09-12 05:40:50,201 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Raw observation shape: (3, 20, 15)
2025-09-12 05:40:50,201 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - Observation min/max/mean: -802654.0000/284460.1562/37838.7344
2025-09-12 05:40:50 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:50,202 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK UPDATED] Palier: Micro Capital, PosSize: 10.0%, Risk: 5.0%
2025-09-12 05:40:50,202 - adan_trading_bot.environment.multi_asset_chunked_env - ERROR - Erreur lors de la mise à jour des paramètres de risque: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 302, in update_risk_parameters
    if k in self.last_risk_params and not np.isclose(
                                          ^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/numpy/core/numeric.py", line 2345, in isclose
    dt = multiarray.result_type(y, 1.)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
numpy.exceptions.DTypePromotionError: The DType <class 'numpy._FloatAbstractDType'> could not be promoted by <class 'numpy.dtypes.StrDType'>. This means that no common DType exists for the given inputs. For example they cannot be stored in a single array unless the dtype is `object`. The full list of DTypes is: (<class 'numpy.dtypes.StrDType'>, <class 'numpy._FloatAbstractDType'>)
2025-09-12 05:40:50,203 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1 - chunk 1/10] Executing step with action: [-1.]
2025-09-12 05:40:50,203 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [STEP 1] Portfolio value: 20.00
2025-09-12 05:40:50 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.22% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 30 (0W/15L)
2025-09-12 05:40:50,205 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.22% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 30 (0W/15L)
2025-09-12 05:40:50 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.50/10.25 USDT (2.5%/50.0%), Solde dispo: 20.00 USDT
2025-09-12 05:40:50,205 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.50/10.25 USDT (2.5%/50.0%), Solde dispo: 20.00 USDT
2025-09-12 05:40:50 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.50/10.25 USDT (2.5%/50.0%), Solde dispo: 20.00 USDT
2025-09-12 05:40:50,206 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.50/10.25 USDT (2.5%/50.0%), Solde dispo: 20.00 USDT
2025-09-12 05:40:50 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.96% | TP: 2.94% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:50,209 - adan_trading_bot.environment.dynamic_behavior_engine - INFO - DBE Decision - Step: 1 | Regime: neutral | SL: 1.96% | TP: 2.94% | PosSize: 82.7% | Winrate: 0.0%
2025-09-12 05:40:50 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.22% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 30 (0W/15L)
2025-09-12 05:40:50,210 - adan_trading_bot.performance.metrics - INFO - [METRICS] Sharpe: 0.00 | Sortino: 0.00 | Profit Factor: 0.00
Max DD: 83.22% | CAGR: 0.00% | Win Rate: 0.0% | Trades: 30 (0W/15L)
2025-09-12 05:40:50 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.50/10.25 USDT (2.5%/50.0%), Solde dispo: 20.00 USDT
2025-09-12 05:40:50,210 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.50/10.25 USDT (2.5%/50.0%), Solde dispo: 20.00 USDT
2025-09-12 05:40:50 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.50/10.25 USDT (2.5%/50.0%), Solde dispo: 20.00 USDT
2025-09-12 05:40:50,210 - adan_trading_bot.portfolio.portfolio_manager - INFO - [RISK] Drawdown actuel: 0.50/10.25 USDT (2.5%/50.0%), Solde dispo: 20.00 USDT
2025-09-12 05:40:50,211 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [REWARD] Realized PnL for step: $0.00
2025-09-12 05:40:50,211 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION CHECK] Step: 1, Max Steps: 500000, Portfolio Value: 20.00, Initial Equity: 20.50, Steps Since Last Trade: -
2025-09-12 05:40:50,211 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [TERMINATION] Min steps not reached (1 < 500)
2025-09-12 05:40:50,211 - adan_trading_bot.environment.multi_asset_chunked_env - INFO - [CHUNK_LOADER] Attempting to load chunk 1 (attempt 1/3)
2025-09-12 05:40:50 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
2025-09-12 05:40:50,211 - adan_trading_bot.data_processing.data_loader - INFO - Début du chargement du chunk 1 pour 1 actifs et 3 timeframes
Chargement des données:   0%|          | 0/3 [00:00<?, ?it/s]Chargement des données:  33%|███▎      | 1/3 [00:00<00:00, 65.55it/s, BTCUSDT 1h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 99.12it/s, BTCUSDT 4h - 1000 lignes]Chargement des données:  67%|██████▋   | 2/3 [00:00<00:00, 46.60it/s, BTCUSDT 4h - 1000 lignes]
2025-09-12 05:40:50,256 - __main__ - INFO - [TRAINING] 
Interruption de l'utilisateur détectée. Sauvegarde du dernier état...
2025-09-12 05:40:50,267 - __main__ - INFO - Checkpoint saved to checkpoints/checkpoint_20250912_054050_ep000000_step0000000112_final (episode=0, steps=112)
2025-09-12 05:40:50,267 - __main__ - INFO - Dernier état sauvegardé avec succès.
2025-09-12 05:40:50,276 - __main__ - INFO - Checkpoint saved to checkpoints/checkpoint_20250912_054050_ep000000_step0000000112_final (episode=0, steps=112)
2025-09-12 05:40:50,276 - __main__ - INFO - Modèle final sauvegardé avec succès.
2025-09-12 05:40:50,277 - __main__ - INFO - Entraînement terminé. Nettoyage des ressources...
Traceback (most recent call last):
  File "/home/morningstar/Documents/trading/bot/scripts/train_parallel_agents.py", line 1883, in <module>
    success = main(
              ^^^^^
  File "/home/morningstar/Documents/trading/bot/scripts/train_parallel_agents.py", line 1715, in main
    model.learn(
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/stable_baselines3/ppo/ppo.py", line 315, in learn
    return super().learn(
           ^^^^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/stable_baselines3/common/on_policy_algorithm.py", line 277, in learn
    continue_training = self.collect_rollouts(self.env, callback, self.rollout_buffer, n_rollout_steps=self.n_steps)
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/stable_baselines3/common/on_policy_algorithm.py", line 194, in collect_rollouts
    new_obs, rewards, dones, infos = env.step(clipped_actions)
                                     ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/stable_baselines3/common/vec_env/base_vec_env.py", line 206, in step
    return self.step_wait()
           ^^^^^^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/stable_baselines3/common/vec_env/vec_normalize.py", line 181, in step_wait
    obs, rewards, dones, infos = self.venv.step_wait()
                                 ^^^^^^^^^^^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/stable_baselines3/common/vec_env/dummy_vec_env.py", line 58, in step_wait
    obs, self.buf_rews[env_idx], terminated, truncated, self.buf_infos[env_idx] = self.envs[env_idx].step(
                                                                                  ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/morningstar/Documents/trading/bot/scripts/train_parallel_agents.py", line 256, in step
    out = super().step(action)
          ^^^^^^^^^^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/site-packages/gymnasium/core.py", line 461, in step
    return self.env.step(action)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 1903, in step
    self.current_data = self._safe_load_chunk(
                        ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/environment/multi_asset_chunked_env.py", line 1005, in _safe_load_chunk
    chunk_data = self.data_loader.load_chunk(chunk_idx)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/morningstar/Documents/trading/bot/src/adan_trading_bot/data_processing/data_loader.py", line 362, in load_chunk
    for future in as_completed(futures):
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/concurrent/futures/_base.py", line 243, in as_completed
    waiter.event.wait(wait_timeout)
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/threading.py", line 629, in wait
    signaled = self._cond.wait(timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/morningstar/miniconda3/envs/trading_env/lib/python3.11/threading.py", line 327, in wait
    waiter.acquire()
KeyboardInterrupt
